!function(a,b){"use strict";a.grep=b.grep,a.map=b.map,a.trim=b.trim,a.debounce=b.debounce,a.throttle=b.throttle,a.proxy=b.proxy,a.ajax=b.ajax,a.param=b.param;var c=a.module("Kinkee",["ng","ngResource","ngAnimate","ngTouch","ngSanitize","ui.bootstrap"]);c.constant("CHECK_SESSION",!!parseInt(a.element("html").attr("check-session"))),c.constant("MODAL_TYPE",{TOKEN:"token",SUBSCRIPTION:"subscription"}),c.constant("DRIVE_REALTIME",{DEV_URL:"https:"===window.location.protocol?"https://ortc-prd.nubium.io/server/ssl/2.1":"http://ortc-prd.nubium.io/server/2.1",URL:"https:"===window.location.protocol?"https://ortc-prd.nubium.io/server/ssl/2.1":"http://ortc-prd.nubium.io/server/2.1"}),a.module("Kinkee").constant("MESSAGE_FILTERS",{ALL:"all",UNREAD:"unread"}),c.config(["$httpProvider","$sceProvider","$compileProvider","$animateProvider","$sceDelegateProvider",function(a,b,c,d,e){a.interceptors.push("redirectInterceptor"),a.interceptors.push("securityInterceptor"),a.interceptors.push("subscribeInterceptor"),a.interceptors.push("errorInterceptor"),a.interceptors.push("pagerInterceptor"),a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",c.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript):/),b.enabled(!0),e.resourceUrlWhitelist(["self","https://sandbox.pagseguro.uol.com.br/v2/checkout/**","https://pagseguro.uol.com.br/v2/checkout/**","https://m.pagseguro.uol.com.br/v2/checkout/**","https://secure.billing.creditcard/startorder**","https://www.google.com/recaptcha/**","https://maps.googleapis.com/**"]),d.classNameFilter(/ng-animate/)}]),c.run(["$rootScope","$compile","$account","$subscribe","$signup","$login","$auth","$messages","$checkUpdates","$share","$dialog","$token","$lang","$fingerprint","$uniquehash","$ecookie","$window","$newsletter","$modal","$webPush","LocalStorage","CHECK_SESSION",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.$onMany=function(b,c){a.isString(b)&&(b=b.split(" "));for(var d=0;d<b.length;d++)this.$on(b[d],c)},o(),p(),b.$account=d,b.$subscribe=e,b.$token=m,b.$signup=f,b.$login=g,b.$auth=h,b.$messages=i,b.$checkUpdates=j,b.$share=k,b.$lang=n,b.$newsletter=s,b.LocalStorage=v,r.Kinkee=r.Kinkee||{},r.Kinkee.$compile=c,r.Kinkee.$account=d,r.Kinkee.$signup=f,r.Kinkee.$login=g,r.Kinkee.$subscribe=e,r.Kinkee.$token=m,r.Kinkee.$messages=i,r.Kinkee.$dialog=l,r.Kinkee.$share=k,r.Kinkee.$fingerprint=o,r.Kinkee.$uniquehash=p,r.Kinkee.$webPush=u,r.Kinkee.$livecam={},r.Kinkee.CHECK_SESSION=w,r.Kinkee.$newsletter=s,r.Kinkee.$checkUpdates=j,r.Kinkee.$modal=t,r.Kinkee.LocalStorage=v}])}(angular,jQuery),function(){"use strict";String.prototype.bool=function(){var a=this;return!!a&&(["f","false","undefined","null","0"].indexOf(a)===-1&&!!a)}}(),function(a){"use strict";a.module("Kinkee").directive("alertDismissible",function(){return{restrict:"AC",link:function(b,c,d){c.find('[data-dismiss="alert"]').one("click",function(e){e.preventDefault(),c.remove(),a.isDefined(d.alertDismiss)&&b.$eval(d.alertDismiss)})}}})}(angular),function(a){"use strict";a.module("Kinkee").directive("autoGrow",function(){return function(b,c,d){function e(){f=c[0].offsetHeight,0!==f&&(g=c.css("paddingLeft"),h=c.css("paddingRight"),i=a.element("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:c[0].offsetWidth-parseInt(g?g:0,10)-parseInt(h?h:0,10),fontSize:c.css("fontSize"),fontFamily:c.css("fontFamily"),lineHeight:d.lineHeight||c.css("lineHeight"),resize:"none"}),a.element(document.body).append(i))}var f,g,h,i=null,j=d.max||200,k=d.min||50;c.css("height",k);var l=function(){if(null===i&&e(),null!==i){var a=function(a,b){for(var c=0,d="";c<b;c++)d+=a;return d},b=c.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/\s{2,}/g,function(b){return a("&nbsp;",b.length-1)+" "});i.html(b);var d=Math.max(i[0].offsetHeight+20,f);c.css("overflow","auto"),d<j?(c.css("overflow","hidden"),c.css("height",Math.max(i[0].offsetHeight+20,f)+"px"),m()):c.css("height",j+"px")}},m=a.debounce(function(){setTimeout(function(){b.$evalAsync(d.autoGrow)},300)},300);c.bind("keyup keydown keypress change focus",l),b.$watch(d.ngModel,l),b.$watch(function(){return"none"!==c[0].style.display},l)}})}(angular),function(a){"use strict";a.module("Kinkee").directive("autoRemove",function(){return{restrict:"A",link:function(a,b,c){var d=c.$observe("autoRemove",function(c){a.$eval(c)&&(d(),b.remove())})}}})}(angular),function(a){"use strict";a.module("Kinkee").directive("autoSelect",function(){return{restrict:"A",link:function(a,b){b.on("focus",function(a){a.preventDefault(),setTimeout(function(){b.select()})})}}})}(angular),function(a){"use strict";a.module("Kinkee").directive("autoVisible",function(){return{restrict:"A",link:function(b,c,d){d.$observe("autoVisible",function(d){var e=b.$eval(d);a.isDefined(e)&&(e?(c.removeClass("hide"),c.show()):c.hide())})}}})}(angular),function(a){"use strict";a.module("Kinkee").directive("autotab",["$detection",function(a){function b(a,b,d){a.off("keypress.autotab").on("keypress.autotab",function(){setTimeout(function(){var e=a.val().length;d&&(e=d.$viewValue?d.$viewValue.length:0),e>=b&&c(a)},300)})}function c(a){var b=a.closest("form"),c=b.find(d),e=c.eq(c.index(a)+1);e.focus()}var d="input,select,textarea";return{restrict:"A",require:"?ngModel",link:function(c,d,e,f){a.isMobile()||e.$observe("autotab",function(a,c){a&&a!==c&&b(d,a,f)})}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("bindFile",[function(){return{require:"ngModel",restrict:"A",link:function(a,b,c,d){b.on("change",function(b){d.$setViewValue(b.target.files[0]),a.$apply()}),a.$watch(function(){return d.$viewValue},function(a){a||b.val("")})}}}])}(angular),function(){"use strict";angular.module("Kinkee").directive("bindHtml",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtml),a.$watch(c.bindHtml,function(a){b.html(a||"")})}}),angular.module("Kinkee").directive("bindHtmlCompile",["$compile",function(a){return function(b,c,d){c.addClass("ng-binding").data("$binding",d.bindHtmlCompile);var e=b.$watch(d.bindHtmlCompile,function(d){d&&angular.isString(d)&&(a(d)(b,function(a){c.empty(),a.appendTo(c)}),e())})}}])}(),function(){"use strict";var a=angular.module("Kinkee");a.directive("bindonce",function(){var a=function(a){if(a&&0!==a.length){var b=angular.lowercase(""+a);a=!("f"===b||"0"===b||"false"===b||"no"===b||"n"===b||"[]"===b)}else a=!1;return a},b=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(b)&&(b=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var c={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(c,d,e,f){var g=function(b,c,d){var e="show"===c?"":"none",f="hide"===c?"":"none";b.css("display",a(d)?e:f)},h=function(a,b){if(angular.isObject(b)&&!angular.isArray(b)){var c=[];angular.forEach(b,function(a,b){a&&c.push(b)}),b=c}b&&a.addClass(angular.isArray(b)?b.join(" "):b)},i=function(a,b){a.transclude(b,function(b){var c=a.element.parent(),d=a.element&&a.element[a.element.length-1],e=c&&c[0]||d&&d.parentNode,f=d&&d.nextSibling||null;angular.forEach(b,function(a){e.insertBefore(a,f)})})},j={watcherRemover:void 0,binders:[],group:e.boName,element:d,ran:!1,addBinder:function(a){this.binders.push(a),this.ran&&this.runBinders()},setupWatcher:function(a){var b=this;this.watcherRemover=c.$watch(a,function(a){void 0!==a&&(b.removeWatcher(),b.checkBindonce(a))},!0)},checkBindonce:function(a){var b=this,c=a.$promise?a.$promise.then:a.then;"function"==typeof c?c(function(){b.runBinders()}):b.runBinders()},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var c=this.binders.shift();if(!this.group||this.group==c.group){var d=c.scope.$eval(c.interpolate?f(c.value):c.value);switch(c.attr){case"boIf":a(d)&&i(c,c.scope.$new());break;case"boSwitch":var e,j=c.controller[0];(e=j.cases["!"+d]||j.cases["?"])&&(c.scope.$eval(c.attrs.change),angular.forEach(e,function(a){i(a,c.scope.$new())}));break;case"boSwitchWhen":var k=c.controller[0];k.cases["!"+c.attrs.boSwitchWhen]=k.cases["!"+c.attrs.boSwitchWhen]||[],k.cases["!"+c.attrs.boSwitchWhen].push({transclude:c.transclude,element:c.element});break;case"boSwitchDefault":var k=c.controller[0];k.cases["?"]=k.cases["?"]||[],k.cases["?"].push({transclude:c.transclude,element:c.element});break;case"hide":case"show":g(c.element,c.attr,d);break;case"class":h(c.element,d);break;case"text":c.element.text(d);break;case"html":c.element.html(d);break;case"style":c.element.css(d);break;case"disabled":c.element.prop("disabled",d);break;case"src":c.element.attr(c.attr,d),b&&c.element.prop("src",d);break;case"attr":angular.forEach(c.attrs,function(a,b){var d,e;b.match(/^boAttr./)&&c.attrs[b]&&(d=b.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e=c.scope.$eval(c.attrs[b]),c.element.attr(d,e))});break;case"href":case"alt":case"title":case"id":case"value":c.element.attr(c.attr,d)}}}this.ran=!0}};angular.extend(this,j)}],link:function(a,b,c,d){var e=c.bindonce&&a.$eval(c.bindonce);void 0!==e?d.checkBindonce(e):(d.setupWatcher(c.bindonce),b.bind("$destroy",d.removeWatcher))}};return c}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boDisabled",attribute:"disabled"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(b){var c=200;return a.directive(b.directiveName,function(){var a={priority:b.priority||c,transclude:b.transclude||!1,terminal:b.terminal||!1,require:["^bindonce"].concat(b.require||[]),controller:b.controller,compile:function(a,c,d){return function(a,c,e,f){var g=f[0],h=e.boParent;if(h&&g.group!==h){var i=g.element.parent();g=void 0;for(var j;9!==i[0].nodeType&&i.length;){if((j=i.data("$bindonceController"))&&j.group===h){g=j;break}i=i.parent()}if(!g)throw new Error("No bindonce controller: "+h)}g.addBinder({element:c,attr:b.attribute||b.directiveName,attrs:e,value:e[b.directiveName],interpolate:b.interpolate,group:h,transclude:d,controller:f.slice(1),scope:a})}}};return a})})}(),function(a){"use strict";a.module("Kinkee").directive("blurOn",function(){return function(a,b,c){a.$on("blurOn",function(a,d){d!==c.blurOn&&d!==b[0].name||b[0].blur()})}})}(angular),function(a){"use strict";a.module("Kinkee").directive("btnProcess",["$url","BTN_STATE",function(a,b){return{restrict:"E",replace:!0,templateUrl:a.commonDirective("btn-process/template/btn-process"),scope:{method:"&method"},link:function(a,c,d){function e(a){switch(a){case b.NORMAL:f=!0,g=!1;break;case b.PROCESSING:f=!1,g=!0}}var f=!0,g=!1;a.text=d.text,a.getState=function(){return{processing:g,normal:f}},a.process=function(){e(b.PROCESSING),a.method()["finally"](function(){e(b.NORMAL)})}}}}])}(angular),function(){"use strict";angular.module("Kinkee").constant("BTN_STATE",{NORMAL:"normal",PROCESSING:"processing"})}(angular),function(a){"use strict";a.module("Kinkee").directive("buttonSubscribe",["$subscribe","$url",function(a,b){return{restrict:"EA",scope:!0,link:function(c,d,e){d.on("click",function(){e.action=e.action||"ACTION-GENERAL";var c={params:{action:e.action},onSuccess:function(a){b.reload(),a.$modalInstance.close()}};a.modal(c)})}}}])}(angular),function(a,b,c){"use strict";function d(a){return Math.min.apply(Math,a)}var e=jQuery(b),f=jQuery(c),g=10,h=0,i=599,j=650;a.module("Kinkee").directive("cardContainer",["$timeout","$debounce","$screen","$detection","$q","$cardContainer",function(b,c,k,l,m,n){return{restrict:"EAC",scope:!0,controller:["$scope","$element","$attrs",function(o,p,q){function r(a,b,c){var e=d(P),f=P.indexOf(e),h=L+f*(M+L);h<0&&(h=g),(!c||c&&a.index()>b)&&s({left:h+"px",top:e===g?0:e+"px",position:"absolute"},a),P[f]=v(e,a)}function s(a,b){var c=b[0].style;for(var d in a)c[d]=a[d]}function t(a){a.forEach(function(a){s({left:"",top:"",position:""},a),a.addClass(N)}),p.css("height","auto")}function u(a,b,c){a.hasClass(N)||(a.addClass(N),a.visible=!0),C(c)}function v(a,b){return(a===g?0:a)+b.height()+L}function w(b){var c=[];return a.isArray(b)&&b.length&&a.forEach(b,function(b){if(!x(b)){var d=m.defer(),e=new Image,f=a.element(b),g=f.attr("src");g&&(e.src=g,e.onload=function(){d.resolve()},e.onerror=function(){d.resolve()},c.push(d.promise))}}),c}function x(a){return!!a.complete&&0!==a.naturalWidth}function y(){var a=Math.max.apply(null,P);p.height(a)}function z(){return k.width()<=i}function A(){P=[],M=E(),K=p.outerWidth(),M=M<=0?p.children(":first-child").outerWidth()||0:M,J=Math.floor(K/(M+L)),B()}function B(){P=[];for(var a=0;a<J;a++)P.push(L)}function C(a){a&&(o.$emit("positionBlocks"),y())}function D(b,c,d){var e=P.length<=1,f=m.defer();return Q=!1,e?(t(b),f.resolve()):(a.forEach(b,function(a,e){var f=e+1===b.length;r(a,c,d),u(a,e,f)}),f.resolve()),f.promise}function E(){return isNaN(parseInt(q.columnWidth))?h:parseInt(q.columnWidth)}function F(){return isNaN(parseInt(q.columnMargin))?g:parseInt(q.columnMargin)}function G(){return q.showClass||"show"}function H(){return q.source||!1}var I=this,J=0,K=0,L=F(),M=E(),N=G(),O=H(),P=[],Q=!1,R=l.isMobile()?400:200;I.createColumns=function(a,b){var c=m.defer();return p.children().length&&p.is(":visible")?(a&&!z()||A(),I.positionBlocks(a,b).then(function(){c.resolve()})):c.reject(),c.promise},I.recreateColumns=function(){return I.createColumns(0,!0)},I.getElemIndex=function(a){return n.getTrackby(a)},I.positionBlocks=function(a,c){var d=n.get(a),e=n.getImages(d),f=m.defer();return b(function(){var b=w(e);m.all(b).then(function(){D(d,a,c).then(function(){f.resolve()})})}),f.promise},o.update=function(a,b){return b?I.recreateColumns():I.createColumns(a)},o.clear=function(){B()},o.toggleTransitions=function(){p.toggleClass("no-transitions")},n.init(),o.$on("$screenChange",c(function(){I.createColumns()},R)),f.on("visibilitychange",c(function(){o.toggleTransitions(),I.createColumns().then(function(){o.toggleTransitions()})},R)),e.on("scroll",c(function(){var a=p.outerHeight()-e.outerHeight();a-=j,e.scrollTop()>=a&&!Q&&(Q=!0,o.$evalAsync(q.onScroll))},200)),O&&o.$watch(function(){return o.$eval(q.source)},function(b){a.isArray(b)&&b.length&&setTimeout(function(){n.init(),I.createColumns()})}),e.on("beforeunload",function(){a.element("body").hide(),e.scrollTop(0)})}]}}])}(angular,window,document),function(a){"use strict";a.module("Kinkee").directive("countdown",["$lang","$templateCache",function(b,c){return{restrict:"EA",scope:{until:"@countdown",langs:"@",code:"@",layout:"@",format:"@",onExpiry:"&"},link:function(d,e){if(a.isDefined(d.until)){var f=c.get("template/assets/js/sl/angular/_common/_app/directives/countdown/countdown.html"),g=a.element(f),h=d.layout||g.html(),i=d.format||"ydHMS",j=d.onExpiry||a.noop,k=[b("date_years"),b("date_months"),b("date_weeks"),b("date_days"),b("date_hours"),b("date_minutes"),b("date_seconds")];d.langs&&(k=JSON.parse(d.langs)),e.countdown({until:d.until,format:i,layout:h,onExpiry:j,labels:k,labels1:k}),g.remove()}else e.remove()}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("cardSecurityCode",["$rootScope","$timeout",function(a,b){return{require:"?ngModel",restrict:"A",scope:!0,link:function(c,d,e,f){function g(a,g){b(function(){d.maskNew(a,{placeholder:g,clearIfNotMatch:!!e.clearIfNotMatch,onComplete:function(a){f&&c.$apply(function(){f.$setViewValue(a)})},onKeyPress:function(){f&&c.$apply(function(){f.$setViewValue("")})}}),f.$modelValue!==d.val()&&d.val(f.$modelValue)})}var h="999",i="000";a.$on("$cardValidationRule",function(a,b){d.is(":visible")&&"credit"===b.cardType&&(d.data("mask-pattern",b.mask),d.data("mask-placeholder",b.placeholder),g(b.mask,b.placeholder))}),g(d.data("mask-pattern")||h,d.data("mask-placeholder")||i)}}}])}(angular),function(){"use strict";angular.module("Kinkee").directive("creditCardValidity",["$cacheFactory","$timeout","SubscribeModel",function(a,b,c){var d=+((new Date).getFullYear()+"").substr(2,2),e=(new Date).getMonth()+1;return{restrict:"A",require:"ngModel",link:function(a,b,c,f){var g=function(a){if(!a)return f.$setValidity("required",!1),a;f.$setValidity("required",!0);var b=a.split("/"),c=+b[0].substr(0,2),g=+b[1];return c<1||c>12?(f.$setValidity("month",!1),f.$setValidity("month2",!0),void f.$setValidity("year",!0)):isNaN(g)||g<d?void f.$setValidity("year",!1):g===d&&c<e?(f.$setValidity("month2",!1),f.$setValidity("month",!0),void f.$setValidity("year",!0)):(f.$setValidity("month",!0),f.$setValidity("month2",!0),f.$setValidity("year",!0),f.$setValidity("required",!0),a)};f.$formatters.push(g),f.$parsers.unshift(g)}}}])}(),function(){"use strict";var a=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,b=6;angular.module("Kinkee").directive("creditCard",["$timeout","$window","SubscribeModel",function(c,d,e){return{restrict:"A",scope:{},require:"?ngModel",link:function(c,f,g,h){function i(b){if(!a.test(b))return!1;var c=0,d=0,e=!1;b=b.replace(/\D/g,"");for(var f=b.length-1;f>=0;f--){var g=b.charAt(f);d=parseInt(g,10),e&&(d*=2)>9&&(d-=9),c+=d,e=!e}return c%10===0}function j(a){!k()&&!a||n||(n=!0,e.checkCard({type:g.cardType,flag:l()&&!a?g.creditCard:"",card:{number:h.$viewValue||""}},function(a){a=angular.extend({cardType:g.cardType},p,a),h.$setValidity("flag",!!a.flag),o=a,q(h.$viewValue),c.$emit("$cardValidationRule",a),g.$set("autotab",a.size||16),h.$valid&&h.$inlineValidator.clearErrors(),setTimeout(function(){n=!1},1e3)}))}function k(){return!!g.cardType&&f.is(":visible")}function l(){return o.cardType===g.cardType}function m(a){if(a)return a.replace(/-/g,"").replace(/ /g,"")}if(h){var n=!1,o={cardType:g.cardType},p={minSize:14,maxSize:19,cvv:{code:3,cssClass:"securityCode"}},q=function(a){if(!a)return"";if(k()){var c=!0;return a=m(a),a.length<b?c=!1:i(a)?o.flag&&a.length>o.size?c=!1:!o.flag&&a.length<p.minSize&&a.length>p.maxSize&&(c=!1):c=!1,h.$setValidity("creditCard",c),c?a:""}return h.$setValidity("creditCard",""),""};h.$formatters.push(q),h.$parsers.unshift(q),g.$observe("creditCard",function(){j()}),c.$on("$subscribe-retry",function(){k()&&c.$emit("$cardValidationRule",o),angular.isFunction(d.SetGoogleEventTrack)&&d.SetGoogleEventTrack("Monitor_Evento","Retry na Assinatura")}),f.on("input propertychange",function(a){7===f.val().length&&j(!0)}),f.on("blur",function(){j()}),f.on("paste",function(a){a.preventDefault()})}}}}])}(),function(a){"use strict";a.module("Kinkee").directive("disableAnimate",["$animate",function(a){return{restrict:"AC",link:function(b,c){a.enabled(!1,c)}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("disableCopy",function(){return{restrict:"A",link:function(a,b){b.on("contextmenu",function(){return!1}),b.addClass("user-select-none")}}})}(angular),function(a){"use strict";a.module("Kinkee").directive("endPage",function(){return{template:'<div class="text-center"><div class="endpage"><i></i><div ng-transclude></div></div></div>',transclude:!0,replace:!0}})}(angular),function(a){"use strict";a.module("Kinkee").directive("slEventBind",["$parse",function(b){return function(c,d,e){var f=c.$eval(e.slEventBind);a.forEach(f,function(a,e){var f=b(a);d.on(e,function(a){var b=Array.prototype.slice.call(arguments);b=b.splice(1),f(c,{$event:a,$params:b}),c.$$phase||c.$apply()})})}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("fallbackSrc",function(){return{link:function(b,c,d){c.bind("error",function(){a.element(this).attr("src",d.fallbackSrc)})}}})}(angular),function(a,b){"use strict";var c="sl-feedback";a.module("Kinkee").directive("slFeedback",["$dialog","$templateRequest","$lang","$url","$http","$legacy",function(d,e,f,g,h,i){return{restrict:"A",link:function(j,k,l){k.on("click",function(){e("template/modal/modal-feedback",{},!0).then(function(e){d.alert({title:l.feedbackTitle||f("WhatKinkee"),message:l.feedbackMessage||f("SendOpinion"),ok:f("Send"),html:e,modalClass:c,noConflict:i.isLegacy(),disableAction:function(){return this&&!this.options.feedback}}).then(function(c){var d=l.slFeedback?"#"+l.slFeedback+": ":"",e={feedback:d+c.feedback,status:c.status};h({method:"POST",url:g.base("feedback/send"),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e,transformRequest:function(b){return a.param(b)}}).success(function(){b.message.showSuccessMessage(f("CommentSuccessfullySent"))})})})})}}}])}(angular,window.lib),function(a){"use strict";a.module("Kinkee").directive("focusOn",function(){return function(a,b,c){a.$on("focusOn",function(a,d){d!==c.focusOn&&d!==b[0].name||b.focus()})}})}(angular),function(a){"use strict";a.module("Kinkee").directive("slFocus",["$timeout",function(a){return{link:function(b,c){a(function(){c[0].focus()},100)}}}])}(angular),function(a,b){"use strict";a.module("Kinkee").directive("slInfiniteScroll",["$debounce","$screen","$parse",function(c,d,e){return{restrict:"A",link:function(f,g,h){var i=a.isDefined(h.debounceDelay)?parseInt(h.debounceDelay):200,j=a.isDefined(h.scrollOffset)?parseInt(h.scrollOffset):0,k=a.isDefined(h.scrollUp),l=a.isDefined(h.appendToWindow),m=!!a.isDefined(h.scrollCallback)&&e(h.scrollCallback),n=a.element(b),o=l?n:g;o.on("scroll",c(function(){if(l){var b=g.outerHeight()-n.outerHeight();if(b-=j,n.scrollTop()>=b&&f.$evalAsync(h.slInfiniteScroll),m){var c=d.visibleTop(),e=null;g.find(".result-item").each(function(){var a=this.getBoundingClientRect(),b=a.top+a.height;if(b>c)return e=this,!1}),f.$eval(function(){m(f,{$elementIndex:a.element(e).data("index")})})}}else o=g[0],o.scrollTop+o.offsetHeight>=o.scrollHeight-j&&f.$evalAsync(h.slInfiniteScroll),k&&o.scrollTop-j<=0&&f.$evalAsync(h.scrollUp)},i))}}}])}(angular,window),function(a){"use strict";var b="lat_lon";a.module("Kinkee").directive("slLocationSearch",["$geolocation","$url","$focus","$locationSearch","$rootScope","LocationModel",function(c,d,e,f,g,h){function i(a){c.getLocation().then(function(b){a.location=k(b.data),a.loadingLocation=!1,a.selectedLocation=a.formatSelection(a.location)})}function j(a){return!a.location||!a.location.cityid&&!a.location.stateid&&!a.location.countryid}function k(a){var c={cityid:a.cityid,cityname:a.cityname,stateid:a.stateid,statename:a.statename,stateshortname:a.stateshortname,countryid:a.countryid,countryname:a.countryname,countryshortname:a.countryshortname,district:a.district,districtid:a.districtid,districtname:a.districtname};return c.cityid&&(c[b]=a[b]),c}return{restrict:"EA",scope:{location:"=ngModel",countryid:"=",cityid:"="},templateUrl:d.templateKey("location/template/","location-search"),link:function(b,d,l){g.$locationSearch=f,b.loadingLocation=!1,b.getLocation=function(){if(!b.loadingLocation)return b.loadingLocation=!0,c.getCurrentPosition({timeout:1e4}).then(function(){i(b)},function(){i(b)})},b.getAutocomplete=function(a){if(a&&!(a.length<3))return b.loadingLocation=!0,h.get({search:a,latitude:c.position.coords.latitude,longitude:c.position.coords.longitude,countryid:b.countryid,cityid:b.cityid}).$promise.then(function(a){var c=[];return c=c.concat(a.countries||[]),c=c.concat(a.states||[]),c=c.concat(a.cities||[]),c=c.concat(a.districts||[]),c.length||(a.any&&a.any.length?c=a.any:c.push({notFound:!0,parentId:l.locationParent})),b.loadingLocation=!1,c},function(){return b.loadingLocation=!1,[]})},b.hideGetLocationIcon=function(){return b.loadingLocation||!j(b)||b.cityid},b.hideClearLocationIcon=function(){return j(b)||b.loadingLocation},b.selectLocation=function(a){b.clearLocation(),b.location=k(a)},b.clearLocation=function(a){b.location=null,a&&(b.selectedLocation=null)},b.formatSelection=function(a){if(a)return a.districtid?a.districtname:a.cityid?a.cityname:a.stateid?a.statename:a.countryid?a.countryname:a},b.getPlaceholder=function(a,c){return b.cityid?c:a},b.focus=function(){return e("locationSearchSetFocus")},b.setLocation=function(a,c){b.location=k(a),b.selectedLocation=c},b.$watch("selectedLocation",function(c,d){!c&&a.isDefined(d)&&b.clearLocation()}),b.$watch("cityid",function(){b.clearLocation(!0)}),f.set(l.slLocationSearch,b)}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("ngMask",function(){return{require:"?ngModel",restrict:"A",link:function(b,c,d,e){function f(f){a.isUndefined(c.data("mask"))&&c.maskNew(f,{placeholder:d.placeholder,clearIfNotMatch:!!d.clearIfNotMatch,onComplete:function(a){e&&b.$apply(function(){e.$setViewValue(a)})},onKeyPress:function(){e&&b.$apply(function(){e.$setViewValue("")})}})}f(d.ngMask)}}})}(angular),function(a){"use strict";a.module("Kinkee").directive("slMessengerTrigger",function(){return{restrict:"A",scope:{user:"=slMessengerTrigger"},link:function(b,c){c.attr("user",a.toJson({id:b.user.accountid,username:b.user.login,urlimage:b.user.avatar}))}}})}(angular),function(a){"use strict";function b(){throw new Error("Chave pública do recaptcha não encontrada ou inválida.")}a.module("Kinkee").directive("slNewRecaptcha",["$timeout","$newRecaptcha",function(a,c){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"@",theme:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(d,e,f,g){f.hasOwnProperty("key")||b(),d.widgetId=null;var h=d.$watch("key",function(i){if(i){40!==i.length&&b();var j=function(b){a(function(){g&&g.$setValidity("recaptcha",!0),d.response=b,d.onSuccess({response:b,widgetId:d.widgetId})}),a(function(){g&&g.$setValidity("recaptcha",!0),d.response="",d.onExpire({widgetId:d.widgetId})},12e4)};c.create(e[0],i,j,{theme:d.theme||f.theme||null}).then(function(a){g&&g.$setValidity("recaptcha",!0),d.widgetId=a,d.onCreate({widgetId:a})}),h()}})}}}])}(angular),function(){"use strict";angular.module("Kinkee").directive("ngWig",["$window",function(a){return{scope:{content:"=ngWig",sanitizer:"&"},restrict:"A",replace:!0,templateUrl:"template/assets/js/sl/angular/_common/_app/directives/ng-wig/ng-wig.html",link:function(b,c,d){b.originalHeight=c.outerHeight(),b.editMode=!1,b.autoexpand=!("autoexpand"in d)||"off"!==d.autoexpand,b.toggleEditMode=function(){b.editMode=!b.editMode},b.execCommand=function(c,d){"createlink"===c&&(d=a.prompt("Please enter the URL","http://")),b.$emit("execCommand",{command:c,options:d})},b.resizeEditor=function(a){var b=c.children();for(var d in b){var e=b.eq(d);if(e.hasClass("nw-editor")){e.outerHeight(a);break}}}}}}])}(),function(){"use strict";angular.module("Kinkee").directive("ngWigEditable",["$q","$timeout",function(a,b){return{restrict:"A",require:"ngModel",replace:!0,link:function(c,d,e,f){function g(){var a;a=c.autoexpand?angular.element(i.documentElement).outerHeight():c.originalHeight,c.resizeEditor(a)}var h,i=d[0].contentDocument;i.open(),i.write('<!DOCTYPE html><html><head></head><body contenteditable="true" style="font-size: 12px; font-family: \'Signika Negative\', tahoma,verdana,arial,sans-serif; color: #666;"></body></html>'),i.close(),h=angular.element(d[0].contentDocument.body),f.$render=function(){h[0].innerHTML=f.$viewValue||""},h.bind("keyup change blur",function(){g(),c.$apply(function(){f.$setViewValue(h.html())})}),h.bind("paste",function(){var d={},e=!1;b(function(){angular.isDefined(c.sanitizer)&&(e=!0,d=c.sanitizer({html:h.html()})),a.when(d).then(function(a){return g(),e?(h.html(a),f.$setViewValue(a)):void f.$setViewValue(h.html())})},100)}),c.$on("execCommand",function(a,b){var d=i.selection,e=b.command,j=b.options;if(d){var k=d.createRange();i.execCommand(e,!1,j),k.collapse(!1),k.select()}else i.execCommand(e,!1,j);i.body.focus(),c.$evalAsync(function(){f.$setViewValue(h.html()),g()})}),c.$watch("autoexpand",g),c.$watch("content",function(){g()})}}}])}(),function(a){"use strict";a.module("Kinkee").directive("slNotificationsBackdrop",function(){return{restrict:"A",scope:!0,require:"^slNotifications",link:function(a,b,c,d){a.slNotifications=d,a.closeBackdrop=function(){d.closeNotifications()}}}})}(angular),function(a){"use strict";a.module("Kinkee").directive("slNotificationsFriends",["NotificationModel","$checkUpdates","$window",function(b,c,d){return{restrict:"A",scope:!0,require:"^slNotifications",link:function(e,f,g,h){e.slNotifications=h,e.open=function(){e.friends=[],e.stop=!1,e.data={},h.friendsOpened||e.load(),e.slNotifications.openNotifications("friends"),c.clear("friends")},e.load=function(c){e.busy||e.stop||(e.noData=!1,e.busy=!0,b.friendRequests(e.data,function(b){e.friends=e.friends.concat(b),e.busy=!1,e.noData=!e.friends.length,e.showMore=b.length>=10,e.stop=b.length<10,e.friends.length&&(e.data.friendId=e.friends[e.friends.length-1].friendid,e.data.notificationTimestamp=e.friends[e.friends.length-1].dtnotification),a.isFunction(d.loadOverlayContentCard)&&setTimeout(function(){d.loadOverlayContentCard.call()},500),c&&c(b)}))},e.more=function(){e.showMore=!1,e.load(function(a){a.length||(e.noData=!0)})},e.handleFriendRequests=function(a,c,d){a.preventDefault(),c.remove=!0,setTimeout(function(){e.friends.splice(e.friends.indexOf(c),1),e.noData=!e.friends.length,e.$apply()},250),b[d]({requestId:c.accountid})},e.close=function(){e.slNotifications.openNotifications("friends")}}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("slNotificationsMessages",["NotificationModel","$checkUpdates","$window",function(b,c,d){return{restrict:"A",scope:!0,require:"^slNotifications",link:function(e,f,g,h){e.slNotifications=h,e.open=function(){e.messages=[],e.stop=!1,e.data={},h.messagesOpened||e.load(),e.slNotifications.openNotifications("messages"),c.clear("scraps")},e.load=function(c){e.busy||e.stop||(e.noData=!1,e.busy=!0,b.messages(e.data,function(b){e.messages=e.messages.concat(b),e.busy=!1,e.noData=!e.messages.length,e.showMore=b.length>=10,e.stop=b.length<10,e.messages.length&&(e.data.messageId=e.messages[e.messages.length-1].contentid),a.isFunction(d.loadOverlayContentCard)&&setTimeout(function(){d.loadOverlayContentCard.call()},500),c&&c(b)}))},e.more=function(){e.showMore=!1,e.load(function(a){a.length||(e.noData=!0)})},e.close=function(){e.slNotifications.openNotifications("messages")}}}}])}(angular,jQuery),function(a){"use strict";a.module("Kinkee").directive("slNotificationsNotifications",["NotificationModel","$checkUpdates","$token","$compile","$window",function(b,c,d,e,f){return{restrict:"A",scope:!0,require:"^slNotifications",link:function(g,h,i,j){g.slNotifications=j,g.open=function(){g.notifications=[],g.stop=!1,g.data={},j.notificationsOpened||g.load(),g.slNotifications.openNotifications("notifications"),c.clear("general")},g.load=function(c){g.busy||g.stop||(g.noData=!1,g.busy=!0,b.generalRequests(g.data,function(b){g.notifications=g.notifications.concat(b),g.busy=!1,g.noData=!g.notifications.length,g.showMore=b.length>=10,g.stop=b.length<10,g.notifications.length&&(g.data.requestId=g.notifications[g.notifications.length-1].notificationid),a.isFunction(f.loadOverlayContentCard)&&setTimeout(function(){f.loadOverlayContentCard.call()},500),c&&c(b)}))},g.more=function(){g.showMore=!1,g.load(function(a){a.length||(g.noData=!0)})},g.notificationLink=function(a,b){return b.url||"#"},g.notificationClick=function(b,c){if(c.url||b.preventDefault(),"1"===c.typecontent&&fJs_OpenModalMP(c.promotion_title,"1,2,3,4"),
"CENSO"===c.typecontent){b.preventDefault();var f=c.url,h=c.title,i=getWindowsWidth()>=1050?1050:getWindowsWidth(),j=getWindowsHeight()>=780?780:getWindowsHeight();h&&$("#divCensoSl .topForm h2").html(h),$("#divCensoSl").dialog({autoOpen:!0,height:j,width:i,position:["center",100],modal:!0,resizable:!1,create:function(a,b){$("#divCensoSl .centerDialogForm").html('<iframe id="modalIframeId" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto" />'),$("#modalIframeId").attr("src",f),$(".closeDialog").click(function(){$("#divCensoSl").dialog("close")}),$("#divCensoSl .centerDialogForm").css("height",j),$(this).siblings(".ui-dialog-titlebar").hide()},open:function(a,b){SetGoogleEventTrack("Monitor_Evento","Censo Kinkee","Sucesso")}})}if("videoModal"===c.typecontent){var k='<promote-video video="{videoModalUrl}" title="{title}" template="{template}" link-more="{link}"></promote-video>';k=k.replace("{title}",c.promotion_title).replace("{template}",Kinkee.baseUrl("promote/get-template-video-modal")).replace("{videoModalUrl}",c.videoModalUrl).replace("{link}",c.link?c.link:""),a.element("body").append(e(k)(g))}"tokenModal"===c.typecontent&&d.modal()},g.remove=function(a,c){c.preventDefault(),a.remove=!0,setTimeout(function(){g.notifications.splice(g.notifications.indexOf(a),1),g.noData=!g.notifications.length,g.$apply()},250),b.remove({notificationid:a.notificationid})},g.subscribe=function(a,b,c,e){a.preventDefault();var g=$(h).attr("sTitle"),i=$(h).attr("sSubTitle"),j=b,k=c;return void 0!=g&&null!=g||(g=""),void 0!=i&&null!=i||(i=""),void 0!=j&&null!=j||(j=""),void 0!=k&&null!=k||(k=0),e?(1==k&&SetGoogleEventTrack("Notification",j,"Comprar Tokens"),"MODAL_SUBSCRIBER_LIMIT"==j&&SetGoogleEventTrack("Monitor_Evento","Abriu Modal Token",document.location.pathname.toString()),void d.modal({params:{action:"NOTIFICATION-TOKEN-"+b},onSuccess:function(){$timeout(function(){f.location.reload()},2e3)}})):(1==k&&SetGoogleEventTrack("Notification",j,"Quero Assinar"),"MODAL_SUBSCRIBER_LIMIT"==j&&SetGoogleEventTrack("Monitor_Evento","Abriu Modal Assinatura",document.location.pathname.toString()),void loadSubs(!0,$("#divSubscribe"),$("#domain").val(),$("#goto").val(),!0,g,i,"","","","","","",j,k))},g.close=function(){g.slNotifications.openNotifications("notifications")},g.showText=function(a){var b=["0","1","CENSO","videoModal","tokenModal"];return b.indexOf(a.typecontent)!==-1},g.showKinkeeLogo=function(a){var b=["0","CENSO","videoModal","tokenModal"];return b.indexOf(a.typecontent)!==-1},g.showAvatar=function(a){var b=["0","1","CENSO","videoModal","tokenModal"];return b.indexOf(a.typecontent)===-1}}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("slNotificationsTokens",function(){return{restrict:"A",scope:!0,require:"^slNotifications",link:function(a,b,c,d){a.slNotifications=d}}})}(angular),function(a,b){"use strict";a.module("Kinkee").directive("slNotifications",["$clickOutside","$detection","$screen","$browser","$legacy",function(c,d,e,f,g){return{scope:!0,restrict:"A",controller:["$scope",function(d){var f=b("#mainMessenger"),h=b(".navbar-search"),i=this;i.friendsOpened=!1,i.messagesOpened=!1,i.notificationsOpened=!1,i.openNotifications=function(a){var b=i[a+"Opened"];i.closeNotifications();var e=i[a+"Opened"]=!b;e?(c.bind(function(){i.closeNotifications(),i.unblockScroll(),f.removeClass("close"),h.removeClass("dropbox-opened"),d.$digest()}),f.addClass("close"),h.addClass("dropbox-opened")):(c.unbind(),f.removeClass("close"),h.removeClass("dropbox-opened")),i.blockScroll(e),d.$on("$screenChange",function(){i.blockScroll(e)})},i.stopPropagation=function(a){a.stopPropagation()},i.closeNotifications=function(){i.friendsOpened=!1,i.messagesOpened=!1,i.notificationsOpened=!1},i.blockScroll=function(b){var c=g.isLegacy(),d=e.isPortrait(),f=e.size,h=a.element(".notification-close");(i.friendsOpened||i.messagesOpened||i.notificationsOpened)&&b&&("xs"===f||"sm"===f&&d)?(e.blockScroll(),c&&(e.fixSize(),h.show())):i.unblockScroll()},i.unblockScroll=function(){var a=g.isLegacy();e.unblockScroll(),a&&e.unfixSize()},d.$on("sidebarToggle",function(){i.closeNotifications(),d.$digest()})}]}}]),b(".dropdown > a").click(function(a){a.preventDefault()})}(angular,jQuery),function(a){"use strict";a.module("Kinkee").directive("numericOnly",function(){return{require:"ngModel",link:function(a,b,c,d){b.attr("pattern","[0-9]+"),d.$parsers.push(function(a){var b=a?a.replace(/[^\d.-]/g,""):null;return b!==a&&(d.$setViewValue(b),d.$render()),b})}}})}(angular),function(a){a.module("Kinkee").directive("slOnBoarding",["$url",function(a){return{templateUrl:a.commonDirective("on-boarding/on-boarding"),restrict:"EA",replace:!0,scope:{title:"@",description:"@","class":"@",primaryText:"@",primaryAction:"&",secondaryText:"@",secondaryAction:"&",mtKeyClose:"@",mtKeyPrimaryAction:"@",mtKeySecondaryAction:"@",show:"=",placement:"@"},link:function(a,b){b.context.parentElement.style.position="relative";var c=a.placement?a.placement:"bottom",d="placement-"+c;a.getClass=function(){var b={};return b[a["class"]]=a["class"],b.show=a.show,b[d]=!0,b},a.close=function(){a.show=!1}}}}])}(angular),function(a,b){"use strict";b.module("Kinkee").directive("placeholder",["$timeout","$browser",function(a,b){function c(a,b){""===a.val()&&a.val(b).addClass("placeholder")}function d(a,b){a.val()===b&&a.val("").removeClass("placeholder")}return{restrict:"A",link:function(e,f,g){var h=g.placeholder;b.ie()&&b.version<10&&(f.on("focus",function(){d(f,h),e.$apply()}),f.on("blur",function(){c(f,h),e.$apply()}),a(function(){c(f,h)}))}}}])}(jQuery,angular),function(a){"use strict";a.module("Kinkee").directive("slPopoverInline",["$document",function(a){return{restrict:"A",link:function(b,c){function d(a){!a.isDefaultPrevented()&&f.hasClass("in")&&f.removeClass("in")}function e(a){f.toggleClass("in"),a.stopPropagation()}var f=c.find(".popover");a.on("click.slPopoverInline",d),a.on("click.slPopoverInline","[sl-popover-inline]",e)}}}])}(angular),function(a,b,c){"use strict";a.module("Kinkee").directive("slPopover",[function(){return{scope:!0,restrict:"A",link:function(d,e,f){function g(c){c.preventDefault(),window.timeOutLeft&&clearTimeout(window.timeOutLeft),e.hasClass("in")?p||(e.removeClass("in"),a.element(b).off("click.popover.backdrop")):(j(i()),e.addClass("in"),a.element(b).on("click.popover.backdrop",k).on("click.popover.backdrop","."+f.elemTarget+", ."+n,function(a){a.stopPropagation()}))}function h(){window.timeOutLeft&&clearTimeout(window.timeOutLeft),window.timeOutLeft=setTimeout(function(){j(i())},q)}function i(){var a="."+f.elemTarget;return c(a).parents(".in")}function j(a){var b=a.length;1===b?a.removeClass("in"):b>1&&a.forEach(function(a){c(a).removeClass("in")})}function k(a){a&&3===a.which||e.hasClass("in")&&e.removeClass("in")}var l=4e3,m=a.element(e),n=f.tmplClass,o=f.eventShow,p=f.eventHide,q=f.timeout?+f.timeout:l;window.timeOutLeft=0,m.on(o,g),m.on(p,h)}}}])}(angular,document,jQuery),function(a){"use strict";a.module("Kinkee").directive("slPreventScroll",function(){return{restrict:"A",link:function(b,c){function d(a){return a.stopPropagation(),a.preventDefault(),a.returnValue=!1,!1}c.on("DOMMouseScroll mousewheel",function(b){var c=a.element(this),e=this.scrollTop,f=this.scrollHeight,g=c.outerHeight(),h="DOMMouseScroll"===b.type?b.originalEvent.detail*-40:b.originalEvent.wheelDelta,i=h>0;if(f>g){if(!i&&-h>f-g-e)return c.scrollTop(f),d(b);if(i&&h>e)return c.scrollTop(0),d(b)}})}}})}(angular),function(a){"use strict";a.module("Kinkee").directive("slProfileBeta",["$http","$url",function(a,b){return{restrict:"A",link:function(c,d,e){var f=e.slProfileBeta?e.slProfileBeta:"opt-in";d.one("click",function(){a.post(b.api("profile/beta/"+f)).then(function(){b.reload()})})}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("slPerfilCommentsTokens",function(){return{restrict:"A",scope:{amountTokens:"=slPerfilCommentsTokens"},link:function(a,b){var c=100,d=b.find(".form-comments-checkbox");d.on("change",function(){this.checked?(a.amountTokens<=c||!a.amountTokens)&&(a.amountTokens=c):a.amountTokens=null,a.$apply()})}}})}(angular),function(a,b){"use strict";a.module("Kinkee").controller("GiftController",["$scope","$rootScope",function(a,c){a.modalPreGiftAvatar=c.modalPreGiftAvatar,a.modalPreGiftAvatarOwner=c.modalPreGiftAvatarOwner,a.gift=function(){b.Gift("GIFT-MODAL-PRE-PRESENT"),a.$close()}}])}(angular,window),function(a,b){"use strict";a.module("Kinkee").directive("slProfileGift",["$timeout","$modal","$modalLoading","$url","$http",function(a,c,d,e,f){return{restrict:"A",link:function(g,h,i){function j(){d.create(),l=c.open(k),l.opened.then(function(){a(function(){l.elem.addClass("opened")},300)})}g.enableOnboarding=!1,g.modalPreGift=i.modalPreGift,g.modalPreGiftAvatar=i.modalPreGiftAvatar,g.modalPreGiftAvatarOwner=i.modalPreGiftAvatarOwner,a(function(){g.enableOnboarding=!!i.giftOnboarding},2e3);var k={templateUrl:e.api("template/modal/modal-pre-gift"),windowClass:"sl-modal modal-gift",controller:"GiftController",keyboard:!1,backdrop:"static"},l=null;g.onboardingGift=function(){b.Gift("PROFILE-ONBOARDING-GIFT"),g.enableOnboarding=!1},g.openGift=function(a){a.preventDefault(),g.enableOnboarding=!1,g.modalPreGift?j():f.get(e.base("subscribe/ab/gift-modal")).then(function(){j()},function(){b.Gift()})}}}}])}(angular,window),function(a){"use strict";a.module("Kinkee").directive("slPromotionLegacy",["$url","$rootScope",function(a,b){return{restrict:"AC",replace:!1,templateUrl:a.api("account/promotion"),link:function(){b.$broadcast("promotionLegacyLoaded")}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("slPromotion",["$account","$token","$window","$url","$screen","$cookies","$subscribe","$modal","$modalLoading","$lang","$rootScope","$compile","$campaign","AccountModel","SubscribeModel",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return{scope:!0,restrict:"C",controllerAs:"promotion",controller:["$scope","$element","$attrs",function(i,j,l){function q(){if("xs"===f.size||"sm"===f.size&&f.isPortrait()){var a=j.hasClass("active");if(a)return void w.addClass("promotion-scroll-block");w.removeClass("promotion-scroll-block")}}function r(){var a=s();return a?void u():void t()}function s(){return g(l.action)}function t(){g(l.action,!0,{path:"/",expires:30})}function u(){g.remove(l.action,{path:"/"})}d=a.element(d),i.$screen=f,i.videoUrl=l.url;var v=this,w=a.element("body");v.isActive=function(){return j.hasClass("active")},v.toggle=function(){j.toggleClass("active"),n.autosize(j),q(),a.isDefined(l.hasCountdown)&&r()},v.close=function(){j.removeClass("active"),n.autosize(j)},v.subscribe=function(a){a.stopPropagation(),v.isActive()||v.close();var c={params:{action:l.action}},d=j.data("auto-close");d&&(c.onSuccess=function(){n.autosize(j,!0)}),b.modal(c)},v.token=function(a){a.stopPropagation(),v.close(),c.modal({params:{action:l.action},onSuccess:function(){e.reload()}})},v.expiry=function(a){return h.modalOpened?void n.autosize(j,!0):a?void e.redirect(a):void e.reload()},v.remove=function(a){a.stopPropagation(),n.autosize(j,!0),o.disablePromotion({code:l.code})},v.removeNotification=function(a){a.stopPropagation(),n.autosize(j,!0),p.disabledNotification()},v.modalCombo=function(a){a.stopPropagation(),h.modal()},v.openVideo=function(b){b.stopPropagation();var c='<promote-video video="{videoModalUrl}" title="{title}" template="{template}"></promote-video>',d=window.Kinkee.baseUrl("promote/get-template-video-modal");i.templateView&&(d=e.customParams(d,{view:i.templateView})),c=c.replace("{title}",i.title).replace("{template}",d).replace("{videoModalUrl}",i.videoUrl),a.element("body").append(m(c)(i))},v.modalCurrentSubscribe=function(b,c,d){var e={params:{showverotel:!1,action:"END-SUBSCRIBE",payment:c,preventOneBuy:"credit"!==c&&!a.isUndefined(d)},onSuccess:function(){n.autosize(j,!0)}};b&&(e={title:k("subscribe_chooseNewPayment"),subtitle:k("notification_description"),params:{showdebit:!1,showdebitonline:!1,showinvoice:!1,showverotel:!1,action:"FIX-SUBSCRIBE",preventOneBuy:!d}}),h.modal(e)},i.$on("$destroy",function(){d.off("resize.slPromotion orientationchange.slPromotion")}),i.$on("$screenChange",function(){n.autosize(j),q()}),d.load(function(){n.autosize(j)}),n.autosize(j)}]}}])}(angular,window),function(a){"use strict";a.module("Kinkee").filter("rangeSliderFilter",function(){return function(b,c,d){return d=a.isDefined(d)?d:" ",b+d+c}})}(angular),function(a){"use strict";a.module("Kinkee").directive("rangeSlider",["$document","$filter","$log",function(b,c,d){var e=".rangeSlider",f={disabled:!1,orientation:"horizontal",step:0,decimalPlaces:0,showValues:!0,preventEqualMinMax:!1,attachHandleValues:!1},g=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup",over:"pointerdown",out:"mouseout"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp",over:"MSPointerDown",out:"mouseout"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend",over:"mouseover touchstart",out:"mouseout"},h=g.start+e,i=g.move+e,j=g.end+e,k=g.over+e,l=g.out+e,m=function(a){try{return[a.clientX||a.originalEvent.clientX||a.originalEvent.touches[0].clientX,a.clientY||a.originalEvent.clientY||a.originalEvent.touches[0].clientY]}catch(b){return["x","y"]}},n=function(a){return a<0?0:a>100?100:a},o=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},p={disabled:"=?",min:"=",max:"=",modelMin:"=?",modelMax:"=?",onHandleDown:"&",onHandleUp:"&",orientation:"@",step:"@",decimalPlaces:"@",filter:"@",filterOptions:"@",showValues:"@",pinHandle:"@",preventEqualMinMax:"@",attachHandleValues:"@"};return{restrict:"A",replace:!0,template:['<div class="ngrs-range-slider">','<div class="ngrs-runner">','<div class="ngrs-handle ngrs-handle-min"><i></i></div>','<div class="ngrs-handle ngrs-handle-max"><i></i></div>','<div class="ngrs-join"></div>','<div class="ngrs-join background"></div>',"</div>",'<div class="ngrs-value-runner">','<div class="ngrs-value ngrs-value-min" ng-show="showValues"><div>{{filteredModelMin}}</div></div>','<div class="ngrs-value ngrs-value-max" ng-show="showValues"><div>{{filteredModelMax}}</div></div>',"</div>","</div>"].join(""),scope:p,link:function(g,p,q){function r(b){"min"===b?(a.element(z[0]).css("display","none"),a.element(z[1]).css("display","block")):"max"===b?(a.element(z[0]).css("display","block"),a.element(z[1]).css("display","none")):(a.element(z[0]).css("display","block"),a.element(z[1]).css("display","block"))}function s(a){a?y.addClass("ngrs-disabled"):y.removeClass("ngrs-disabled")}function t(){g.min>g.max&&w("min must be less than or equal to max"),a.isDefined(g.min)&&a.isDefined(g.max)&&(o(g.min)||w("min must be a number"),o(g.max)||w("max must be a number"),G=g.max-g.min,F=[g.min,g.max],u())}function u(){if(g.modelMin>g.modelMax&&(x("modelMin must be less than or equal to modelMax"),g.modelMin=g.modelMax),(a.isDefined(g.modelMin)||"min"===g.pinHandle)&&(a.isDefined(g.modelMax)||"max"===g.pinHandle)){o(g.modelMin)||("min"!==g.pinHandle&&x("modelMin must be a number"),g.modelMin=g.min),o(g.modelMax)||("max"!==g.pinHandle&&x("modelMax must be a number"),g.modelMax=g.max);var b,d,e=n((g.modelMin-g.min)/G*100),f=n((g.modelMax-g.min)/G*100);g.attachHandleValues&&(b=e,d=f),g.modelMin=Math.max(g.min,g.modelMin),g.modelMax=Math.min(g.max,g.modelMax),g.filter?(g.filteredModelMin=c(g.filter)(g.modelMin,g.filterOptions),g.filteredModelMax=c(g.filter)(g.modelMax,g.filterOptions)):(g.filteredModelMin=g.modelMin,g.filteredModelMax=g.modelMax),g.min===g.max&&g.modelMin===g.modelMax?(a.element(z[0]).css(C,"0%"),a.element(z[1]).css(C,"100%"),g.attachHandleValues&&(a.element(".ngrs-value-runner").addClass("ngrs-attached-handles"),a.element(A[0]).css(C,"0%"),a.element(A[1]).css(C,"100%")),a.element(B).css(C,"0%").css(D,"0%")):(a.element(z[0]).css(C,e+"%"),a.element(z[1]).css(C,f+"%"),g.attachHandleValues&&(a.element(".ngrs-value-runner").addClass("ngrs-attached-handles"),a.element(A[0]).css(C,b+"%"),a.element(A[1]).css(C,d+"%"),a.element(A[1]).css(D,"auto")),a.element(B).css(C,e+"%").css(D,100-f+"%"),e>95&&a.element(z[0]).css("z-index",3))}}function v(c){var d=z[c];d.bind(h+"X",function(f){var h=(0===c?"ngrs-handle-min":"ngrs-handle-max")+"-down",k=(0===c?g.modelMin:g.modelMax)-g.min,l=k/G*100,o=m(f),p=o,q=!1;a.isFunction(g.onHandleDown)&&g.onHandleDown(),a.element("body").bind("selectstart"+e,function(){return!1}),g.disabled||(H=!0,d.addClass("ngrs-down"),y.addClass("ngrs-focus "+h),a.element("body").addClass("ngrs-touching"),b.bind(i,function(a){a.preventDefault();var b,e,f=m(a),h=g.step/G*100,i=((0===c?g.modelMax:g.modelMin)-g.min)/G*100;"x"!==f[0]&&(f[0]-=o[0],f[1]-=o[1],b=[p[0]!==f[0],p[1]!==f[1]],e=l+100*f[E]/(E?y.height():y.width()),e=n(e),g.preventEqualMinMax&&(0===h&&(h=1/G*100),0===c?i-=h:1===c&&(i+=h)),0===c?e=e>i?i:e:1===c&&(e=e<i?i:e),g.step>0&&e<100&&e>0&&(e=Math.round(e/h)*h),e>95&&0===c?d.css("z-index",3):d.css("z-index",""),b[E]&&e!==q&&(0===c?g.modelMin=parseFloat(parseFloat(e*G/100+g.min).toFixed(g.decimalPlaces)):1===c&&(g.modelMax=parseFloat(parseFloat(e*G/100+g.min).toFixed(g.decimalPlaces))),g.$apply(),q=e),p=f)}).bind(j,function(){a.isFunction(g.onHandleUp)&&g.onHandleUp(),b.off(i),b.off(j),a.element("body").removeClass("ngrs-touching"),H=!1,d.removeClass("ngrs-down"),d.removeClass("ngrs-over"),y.removeClass("ngrs-focus "+h)}))}).on(k,function(){d.addClass("ngrs-over")}).on(l,function(){H||d.removeClass("ngrs-over")})}function w(a){throw g.disabled=!0,new Error("RangeSlider: "+a)}function x(a){d.warn(a)}var y=a.element(p),z=[p.find(".ngrs-handle-min"),p.find(".ngrs-handle-max")],A=[p.find(".ngrs-value-min"),p.find(".ngrs-value-max")],B=p.find(".ngrs-join:not(.background)"),C="left",D="right",E=0,F=[0,0],G=0,H=!1;g.filteredModelMin=g.modelMin,g.filteredModelMax=g.modelMax,q.$observe("disabled",function(b){a.isDefined(b)||(g.disabled=f.disabled),g.$watch("disabled",s)}),q.$observe("orientation",function(b){a.isDefined(b)||(g.orientation=f.orientation);for(var c,d=g.orientation.split(" "),e=0,h=d.length;e<h;e++)d[e]="ngrs-"+d[e];c=d.join(" "),y.addClass(c),"vertical"!==g.orientation&&"vertical left"!==g.orientation&&"vertical right"!==g.orientation||(C="top",D="bottom",E=1)}),q.$observe("step",function(b){a.isDefined(b)||(g.step=f.step)}),q.$observe("decimalPlaces",function(b){a.isDefined(b)||(g.decimalPlaces=f.decimalPlaces)}),q.$observe("showValues",function(b){a.isDefined(b)?"false"===b?g.showValues=!1:g.showValues=!0:g.showValues=f.showValues}),q.$observe("pinHandle",function(b){a.isDefined(b)&&("min"===b||"max"===b)?g.pinHandle=b:g.pinHandle=null,g.$watch("pinHandle",r)}),q.$observe("preventEqualMinMax",function(b){a.isDefined(b)?"false"===b?g.preventEqualMinMax=!1:g.preventEqualMinMax=!0:g.preventEqualMinMax=f.preventEqualMinMax}),q.$observe("attachHandleValues",function(b){a.isDefined(b)?"false"===b?g.attachHandleValues=!1:g.attachHandleValues=!0:g.attachHandleValues=f.attachHandleValues}),g.$watch("min",t),g.$watch("max",t),g.$watch("modelMin",u),g.$watch("modelMax",u),g.$on("$destroy",function(){y.off(e),a.element("body").off(e),b.off(e);for(var c=0,d=z.length;c<d;c++)z[c].off(e),z[c].off(e+"X")}),y.bind("selectstart"+e,function(){return!1}).bind("click",function(a){a.stopPropagation()}),v(0),v(1)}}}]),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()}(angular),function(a){"use strict";a.module("Kinkee").directive("recaptcha",["reCAPTCHA","$compile","$url",function(b,c,d){return{restrict:"A",require:"ngModel",templateUrl:"template/assets/js/sl/angular/_common/_app/directives/recaptcha/recaptcha.html",replace:!0,scope:{ngModel:"=",langs:"="},link:function(e,f,g){e.clear=function(){e.ngModel={response:"",challenge:!1}},e.imgFolder=function(a){return d.base("assets/images/icons/gif/recaptcha/"+a)},b.create(f[0],g.key,function(){e.clear(),e.$watch(function(){return b.challenge()},function(a){e.ngModel.challenge=a}),c(a.element(document.querySelector("input#recaptcha_response_field")).attr("ng-model","ngModel.response"))(e),c(a.element(document.querySelector("a#recaptcha_reload_btn")).attr("ng-click","clear()"))(e)}),e.$on("$destroy",b.destroy)}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("scrollOn",function(){return function(a,b,c){a.$on("scrollOn",function(a,d,e){d===c.scrollOn&&("top"===e&&(b[0].scrollTop=0),"bottom"===e&&(b[0].scrollTop=b[0].scrollHeight))})}})}(angular),function(a,b){"use strict";a.module("Kinkee").directive("slScrollTo",function(){return{restrict:"A",link:function(c,d,e){d.on("click",function(){var c=0;if(e.slScrollTo){var d=a.element(e.slScrollTo);c=d.length?d.offset().top:0}b("body, html").animate({scrollTop:c},"slow")})}}})}(angular,jQuery),function(a,b){"use strict";a.module("Kinkee").directive("slSendConfirmationSignup",function(){return{restrict:"A",link:function(a,c,d){b.post(d.url,{ai:d.accountid,eml:d.email})}}})}(angular,jQuery),function(a){"use strict";a.module("Kinkee").directive("spinner",function(){return{restrict:"A",replace:!0,template:function(){return'<div class="spinner"><div class="one"></div><div class="two"></div><div class="three"></div></div>'},link:function(a,b,c){var d=c.color,e=c.size;if(d||e){var f=b.children();d&&f.css("background-color",d),e&&f.width(e).height(e)}}}})}(angular),function(a,b){"use strict";var c="sl-sticky-menu";a.module("Kinkee").directive("slStickyMenu",["$screen",function(d){return{restrict:"A",link:function(e,f,g){function h(a){if(g.minWidth&&d.width()<parseInt(g.minWidth))return void i(a);var b=n+o,e=m.scrollTop()+b;e>l+o?(p||(a.addClass(c).css("top",b),k.height(a.outerHeight()).show()),p=!0):i(a)}function i(a){p&&(a.removeClass(c).css("top","auto"),k.hide()),p=!1}function j(){k=a.element('<div class="sl-stick-menu"></div>').insertAfter(f)}var k,l=f.offset().top,m=a.element(b),n=a.element(".sl.navbar").outerHeight(),o=0,p=!1;j(),m.on("scroll.stickyMenu",function(){h(f)}),e.$on("$screenChange",function(){h(f)}),e.$on("promotionReady",function(a,b){o=b.height})}}}])}(angular,window),function(a){"use strict";a.module("Kinkee").directive("stopPropagation",function(){return function(a,b,c){b.on(c.stopPropagation,function(a){a.stopPropagation()})}})}(angular),function(){"use strict";angular.module("Kinkee").directive("svgIcon",["$url",function(a){return{restrict:"EA",templateUrl:function(b,c){return"template/"+a.commonDirective("svg-icon/"+c.svgIcon)},replace:!0,link:function(a,b,c){var d=b.find("svg"),e=(d[0].attributes.viewBox?d[0].attributes.viewBox.value:"").split(" "),f=c.width||e[2],g=c.height||e[3],h=c.fill||"#D8D8D8";d.attr("width",f),d.attr("height",g),d.attr("fill",h)}}}])}(),function(a){"use strict";a.module("Kinkee").directive("tabs",function(){return{restrict:"AC",scope:!0,link:function(b,c,d){function e(){var a=j.find("> .active"),b=k.find("> .panel-pane.active");a.removeClass("active"),b.removeClass("active")}function f(a){var b=j.find("[href="+a.hash+"]");l=k.find(a.hash),b.parent().addClass("active"),l.addClass("active")}function g(){l.find(".panel-tabs > .active").removeClass("active"),l.find(".panel-panes > .panel-pane.active").removeClass("active")}function h(a){l.find(".panel-tabs [href="+a+"]").parent().addClass("active"),l.find(".panel-panes "+a).addClass("active")}var i=c.find("> .panel-tabs a"),j=c.find("> .panel-tabs"),k=c.find("> .panel-panes"),l=null;i.on("click",function(a){a.preventDefault(),e(),f(a.currentTarget)}),a.isUndefined(d.children)&&b.$on("tab.activeTab",function(b,c,d){a.isDefined(c)&&(e(),f({hash:c})),a.isDefined(d)&&(g(),h(d))})}}})}(angular),function(a){"use strict";a.module("Kinkee").directive("slTooltip",["$detection",function(b){return{restrict:"A",compile:function(c,d){if(!b.isMobile()||d.force)return function(c,d,e){e.$observe("title",function(c){var f={title:c,html:e.html};b.isMobile()&&a.extend(f,{trigger:"click"}),d.tooltip(f)}),c.$on("$destroy",function(){d.tooltip("destroy")})}}}}])}(angular),function(){"use strict";angular.module("Kinkee").directive("addressnum",["$cacheFactory","$timeout","SubscribeModel",function(a,b,c){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(a){if(!a)return d.$setValidity("required",!1),a;d.$setValidity("required",!0);var b=a;return 0===parseInt(b)?void d.$setValidity("addressnum",!1):(d.$setValidity("addressnum",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e)}}}])}(),function(){"use strict";angular.module("Kinkee").directive("cpf",["$cacheFactory","$timeout","SubscribeModel",function(a,b,c){var d,e,f,g;return{restrict:"A",require:"ngModel",link:function(a,b,c,h){var i=function(a){if(!a)return h.$setValidity("required",!1),a;h.$setValidity("required",!0);var b=a.replace(".","");if(b=b.replace(".",""),b=b.replace("-",""),b.length<11)return void h.$setValidity("cpf",!1);if("00000000000"===b||"11111111111"===b||"22222222222"===b||"33333333333"===b||"44444444444"===b||"55555555555"===b||"66666666666"===b||"77777777777"===b||"88888888888"===b||"99999999999"===b)return void h.$setValidity("cpf",!1);d=b.substring(0,9),e=b.substring(9),f=0;for(var c=10;c>1;c--)f+=d.charAt(10-c)*c;if(g=f%11<2?0:11-f%11,g!==parseInt(e.charAt(0)))return void h.$setValidity("cpf",!1);d=b.substring(0,10),f=0;for(var i=11;i>1;i--)f+=d.charAt(11-i)*i;return g=f%11<2?0:11-f%11,g!==parseInt(e.charAt(1))?void h.$setValidity("cpf",!1):(h.$setValidity("cpf",!0),a)};h.$formatters.push(i),h.$parsers.unshift(i)}}}])}(),function(){"use strict";angular.module("Kinkee").directive("ddd",["$cacheFactory","$timeout","SubscribeModel",function(a,b,c){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(a){if(!a)return d.$setValidity("required",!1),a;d.$setValidity("required",!0);var b=a;if(2!==b.length)return void d.$setValidity("ddd",!1);var c=[{ddd:"11"},{ddd:"12"},{ddd:"13"},{ddd:"14"},{ddd:"15"},{ddd:"16"},{ddd:"17"},{ddd:"18"},{ddd:"19"},{ddd:"21"},{ddd:"22"},{ddd:"24"},{ddd:"27"},{ddd:"28"},{ddd:"31"},{ddd:"32"},{ddd:"33"},{ddd:"34"},{ddd:"35"},{ddd:"37"},{ddd:"38"},{ddd:"41"},{ddd:"42"},{ddd:"43"},{ddd:"44"},{ddd:"45"},{ddd:"46"},{ddd:"47"},{ddd:"48"},{ddd:"49"},{ddd:"51"},{ddd:"53"},{ddd:"54"},{ddd:"55"},{ddd:"61"},{ddd:"62"},{ddd:"63"},{ddd:"64"},{ddd:"65"},{ddd:"66"},{ddd:"67"},{ddd:"68"},{ddd:"69"},{ddd:"71"},{ddd:"73"},{ddd:"74"},{ddd:"75"},{ddd:"77"},{ddd:"79"},{ddd:"81"},{ddd:"82"},{ddd:"83"},{ddd:"84"},{ddd:"85"},{ddd:"86"},{ddd:"87"},{ddd:"88"},{ddd:"89"},{ddd:"91"},{ddd:"92"},{ddd:"93"},{ddd:"94"},{ddd:"95"},{ddd:"96"},{ddd:"97"},{ddd:"98"},{ddd:"99"}],e=!1;return angular.forEach(c,function(a){a.ddd===b&&(e=!0)}),e?(d.$setValidity("ddd",!0),a):void d.$setValidity("ddd",!1)};d.$formatters.push(e),d.$parsers.unshift(e)}}}])}(),function(){"use strict";angular.module("Kinkee").directive("fullname",["$cacheFactory","$timeout","SubscribeModel",function(a,b,c){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(a){if(!a)return d.$setValidity("required",!1),a;var b=a.split(" ");return 1===b.length?(d.$setValidity("required",!1),a):(d.$setValidity("required",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e)}}}])}(),function(){"use strict";angular.module("Kinkee").directive("phone",["$cacheFactory","$timeout","SubscribeModel",function(a,b,c){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(a){if(!a)return d.$setValidity("required",!1),a;d.$setValidity("required",!0);var b=a;return b.length<7||b.length>9?void d.$setValidity("phone",!1):0===parseInt(b)?void d.$setValidity("phone",!1):(d.$setValidity("phone",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e)}}}])}(),function(){"use strict";angular.module("Kinkee").directive("state",["$cacheFactory","$timeout","SubscribeModel",function(a,b,c){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(a){if(!a)return d.$setValidity("required",!1),a;d.$setValidity("required",!0);var b=a;if(2!==b.length)return void d.$setValidity("state",!1);var c=[{state:"AC"},{state:"AL"},{state:"AP"},{state:"AM"},{state:"BA"},{state:"CE"},{state:"DF"},{state:"ES"},{state:"GO"},{state:"MA"},{state:"MT"},{state:"MS"},{state:"MG"},{state:"PA"},{state:"PB"},{state:"PR"},{state:"PE"},{state:"PI"},{state:"RJ"},{state:"RN"},{state:"RS"},{state:"RO"},{state:"RR"},{state:"SC"},{state:"SP"},{state:"SE"},{state:"TO"}],e=!1;return angular.forEach(c,function(a){a.state===b.toUpperCase()&&(e=!0)}),e?(d.$setValidity("state",!0),a):void d.$setValidity("state",!1)};d.$formatters.push(e),d.$parsers.unshift(e)}}}])}(),function(){"use strict";angular.module("Kinkee").directive("zipcode",["$cacheFactory","$timeout","SubscribeModel",function(a,b,c){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=function(a){if(!a)return d.$setValidity("required",!1),a;d.$setValidity("required",!0);var b=a;return b.length<7?void d.$setValidity("zipcode",!1):0===parseInt(b)?void d.$setValidity("zipcode",!1):(d.$setValidity("zipcode",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e)}}}])}(),function(a){"use strict";a.module("Kinkee").directive("vcardCommonFriends",["$detection","$rootScope",function(a,b){return{restrict:"A",link:function(c,d,e){a.isMobile()||d.click(function(){b.$broadcast("vcard-load-common-friends",e.accountId,e.friendId)})}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("vcardFriends",["$detection","$rootScope",function(a,b){return{restrict:"A",link:function(c,d,e){a.isMobile()||d.click(function(){b.$broadcast("vcard-load-friends",e.accountId)})}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("vcard",["$window","$compile","$detection",function(b,c,d){return{restrict:"A",link:function(e,f){e.$compile=c,d.isMobile()||setTimeout(a.debounce(function(){f.addClass("overlayContentCard"),a.element(".overlayContentCard").attr("hoverintent_s","0").off("mouseenter mouseleave").hoverIntent(b.overlayContentConfig)},500))}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("slVideoInline",["$url",function(a){return{restrict:"A",replace:!0,template:function(b,c){var d='<div class="embed-responsive embed-responsive-16by9"><iframe src="{url}" allowfullscreen></div>';return d.replace("{url}",a.api("embed/video/"+c.slVideoInline))}}}])}(angular),function(a){"use strict";a.module("Kinkee").filter("comma",function(){return function(b){if(b.length&&a.isArray(b))return b.join(", ")}})}(angular),function(a){"use strict";a.module("Kinkee").filter("messageTime",["$moment",function(a){return function(b){var c,d=a(b).fromNow(!0);if("s"===d.key)c=d.now;else if("m"===d.key||"mm"===d.key)c=d.value+"min";else if("h"===d.key||"hh"===d.key){var e=+a().format("H");c=d.value>e?d.yesterday:a(b).format("LT")}else"d"===d.key&&1===d.value?c=d.yesterday:"dd"===d.key&&d.value>1&&d.value<7?c=a(b).format("ddd"):"dd"===d.key&&d.value>=7||"M"===d.key||"MM"===d.key?c=a(b).format("ll"):"y"!==d.key&&"yy"!==d.key||(c=a(b).format("l"));return c}}])}(angular),function(a){"use strict";a.module("Kinkee").filter("formatDate",["$moment",function(a){return function(b,c){return a(b).format(c||"LLL")}}])}(angular),function(a){"use strict";a.module("Kinkee").filter("moment",["$moment",function(a){return function(b,c){return c?a(b).format(c):a(b).fromNow()}}])}(angular),function(a){"use strict";a.module("Kinkee").filter("nl2br",function(){return function(a){return a?a.replace(new RegExp("\r?\n","g"),"<br />").replace(/(<br\s*\/?>){3,}/gi,"<br />"):""}})}(angular),function(a){"use strict";a.module("Kinkee").filter("reverse",function(){return function(a){return a.slice().reverse()}})}(angular),function(a){"use strict";a.module("Kinkee").filter("toArray",function(){return function(a,b){return a?b===!1?Object.keys(a).map(function(b){return a[b]}):Object.keys(a).map(function(b){return Object.defineProperty(a[b],"$key",{enumerable:!1,value:b})}):a}})}(angular),function(a){"use strict";
a.module("Kinkee").factory("AddressModel",["BaseModel","$url",function(a,b){return new a("address",{get:{method:"GET",url:b.base("subscribe/get-address/:cep"),isArray:!1,cache:!0}})}])}(angular),function(a){"use strict";var b=a.module("Kinkee");b.factory("BaseModel",["$resource","$url",function(b,c){function d(d,e,f,g){return e=a.isUndefined(e)?{}:e,f=a.isUndefined(f)?{}:f,this.model=a.extend({save:{method:"POST",url:c.api(d,!0),withCredentials:!0},update:{method:"PUT",url:c.api(d,!0)},search:{method:"GET",url:c.api(d+"/search",!0)},template:{method:"GET",url:c.api(d+"/template",!0)},langs:{method:"GET",url:c.api(d+"/langs",!0),cache:!0}},e),a.isDefined(g)&&a.forEach(this.model,function(b){b=a.extend(b,g)}),this.parameters=a.extend({id:"@id"},f),a.extend(b(c.api(d),this.parameters,this.model),{templateUrl:function(a){return c.customParams(c.api(d+"/template"),a)},baseUrl:function(a){return c.customParams(c.api(d),a)}})}return d}]),a.forEach("Message Subscribe Account Signup".split(" "),function(a){b.factory(a+"Model",["BaseModel",function(b){return new b(a.toLocaleLowerCase(),{})}])})}(angular),function(a){"use strict";a.module("Kinkee").factory("CultureModel",["BaseModel","$url",function(a,b){return new a("culture",{save:{method:"POST",url:b.api("edit-language")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("LocationModel",["$url","BaseModel",function(a,b){return new b("location",{suggest:{method:"POST",url:a.api("location/suggest")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("NotificationModel",["BaseModel","$url",function(b,c){return new b("notification",{friendRequests:{method:"GET",isArray:!0,url:c.api("notification/friend-requests")},accept:{method:"POST",url:c.api("notification/friend-requests/accept")},reject:{method:"POST",url:c.api("notification/friend-requests/reject")},messages:{method:"GET",isArray:!0,url:c.api("notification/messages"),transformResponse:function(b){return b?a.fromJson(b):[]}},generalRequests:{method:"GET",isArray:!0,url:c.api("notification/general-requests"),transformResponse:function(b){return b?a.fromJson(b):[]}},remove:{method:"POST",url:c.api("notification/general-requests/delete")}})}])}(angular),function(a){"use strict";a.module("Kinkee").service("StorageModel",["$http","$q","$url",function(a,b,c){function d(d){var e=b.defer();return a.get(c.api("storage/get/"+d.toLowerCase())).then(function(a){e.resolve(a.data)})["catch"](function(){e.reject()}),e.promise}function e(d,e){var f=b.defer();return a.post(c.api("storage/set/"+d.toLowerCase()),{value:e}).then(function(a){f.resolve(a.data)})["catch"](function(){f.reject()}),f.promise}function f(b){return a["delete"](c.api("storage/clear/"+b))}return{getItem:d,setItem:e,clear:f}}])}(angular),function(a){"use strict";a.module("Kinkee").factory("WebPushModel",["BaseModel","$url",function(a,b){return new a("web-push",{sign:{method:"POST",url:b.api("web-push/sign")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$animatedContainer",["$q","$parse","$timeout","$compile","$window","$rootScope",function(b,c,d,e,f,g){function h(){var b=a.element('<button type="button">&times;</button>');return b.addClass("animated-container-close"),b.on("click",u.close),b}function i(){var b=a.element("<div></div>"),c=a.element('<ng-include src="url"></ng-include>'),d=g.$new();return d.url=u.options.urlContent,b.append(e(c)(d)),b.addClass(t),b}function j(){var c=b.defer(),e=null,f=n(u.target)+" "+o(u.target,u.container);return u.placeholder=a.element("<div/>"),u.placeholder.addClass(s),a.forEach(p,function(a){u.placeholder.css(a,f)}),u.options.btnClose&&(e=h(),u.placeholder.prepend(e)),u.content=i(),u.placeholder.prepend(u.content),u.container.append(u.placeholder),d(function(){a.forEach(p,function(a){u.placeholder.css(a,"translate3d(0px, 0px, 0px)")}),u.placeholder.addClass("in"),u.content.addClass("in"),u.options.btnClose&&e.addClass("in"),c.resolve()},40),c.promise}function k(){u.content.removeClass("out");var b=n(u.target)+" "+o(u.target,u.container);a.forEach(p,function(a){u.placeholder.css(a,b)}),u.placeholder.removeClass("out"),u.target.removeClass("in"),d(function(){u.target.removeClass(r),u.placeholder.remove(),v.resolve()},700)}function l(){u.placeholder.addClass("out"),u.placeholder.removeClass("in"),d(function(){u.content.addClass("out"),u.content.removeClass("in")},500)}function m(a){var b,c;return"x"===a?(b=u.container.width(),c=u.container.innerWidth()):"y"===a&&(b=u.container.height(),c=u.container.innerHeight()),b<c?c:b}function n(a){return"translate3d("+a.position().left+"px,"+a.position().top+"px, 0px)"}function o(a,b){return"scale3d("+a.outerWidth()/b.outerWidth()+","+a.outerHeight()/m("y")+",1)"}var p=["transform","WebkitTransform","MozTransform","MsTransform"],q="animated-container",r="animated-container-target",s="animated-container-placeholder",t="animated-container-content",u={content:null,container:null,placeholder:null,target:null,options:{close:!0}},v=b.defer();return u.open=function(b){if(a.extend(u.options,b),!u.options.targetContainer)throw new Error("The param of target container is required!");if(!u.options.event&&!u.options.target)throw new Error("The param of target event is required!");if(!(f.document.getElementsByClassName(s).length>0)){var c=u.options.target;u.options.event&&(c=u.options.event.currentTarget);var d=a.element(c);return u.target=d.parents("."+u.options.targetContainer),u.container=a.isDefined(u.options.parentContainer)?u.target.parents("."+u.options.parentContainer):a.element("body"),u.container.addClass(q),u.target.addClass(r),u.target.addClass("in"),j().then(function(){l()}),v.promise}},u.close=function(){u.target||(u.target=a.element("."+r)),u.container||(u.container=a.element("."+q)),u.placeholder||(u.placeholder=a.element("."+s)),k()},u}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$auth",["$q","AccountModel","SubscribeModel",function(b,c,d){var e,f,g=b.defer(),h={user:{},STATUS:{SUBSCRIPTION_NEEDED:403}};return h.checkSession=function(a,f){return e=b.defer(),h.isLogged()||a?(f=f||{},d.checkSession(f,function(a){h.user=a,e.resolve(a)},function(){e.reject()})):c.checkSession({},function(a){h.user=a,e.resolve(a)},function(){e.reject()}),e.promise},h.checkSubscription=function(){return c.checkSubscription({},function(a){g.resolve(a)},function(){g.reject()}),g.promise},h.revalidateSubscription=function(){var a=b.defer();return c.checkSubscription({},function(b){a.resolve(b)},function(){a.reject()}),a.promise},h.keyUserSession=function(){return a.isUndefined(f)?f=a.element("#KeyUserSession").val():f},h.isLogged=function(){return!!h.keyUserSession()},h}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$blur",["$rootScope","$timeout",function(a,b){return function(c){return b(function(){a.$broadcast("blurOn",c)})}}])}(angular),function(a,b){"use strict";function c(){var a=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return a?parseInt(a[1]):void 0}var d=c();d&&a("body").addClass("ie"+d),b.module("Kinkee").config(["$provide",function(a){a.decorator("$browser",["$delegate","$window","$injector",function(a,c,d){var e,f=c.navigator.userAgent,g="",h=""+parseFloat(c.navigator.appVersion),i=function(){if(j.chrome===!0)e=f.indexOf("Chrome"),h=f.substring(e+7);else if(j.ie===!0)e=f.indexOf("MSIE"),h=f.substring(e+5);else if(j.safari===!0){e=f.indexOf("Safari"),h=f.substring(e+7);var a=f.indexOf("Version");a!==-1&&(h=f.substring(a+8))}else j.firefox===!0?(e=f.indexOf("Firefox"),h=f.substring(e+8)):j.edge===!0&&(e=f.indexOf("Edge"),h=f.substring(e+5))},j={safari:/safari/i,chrome:/chrome/i,firefox:/firefox/i,ie:/(msie|trident)/i,opera:/opr/i,edge:/edge/i};for(var k in j)j[k].test(f)&&(g=k,j[k]=!0);return i(),b.extend(a,{name:g,version:parseInt(""+h,10),fullVersion:h,ie:function(){return j.ie===!0},firefox:function(){return j.firefox===!0},safari:function(){return j.safari===!0&&j.chrome!==!0},chrome:function(){return j.chrome===!0&&j.edge!==!0},opera:function(){return j.opera===!0},edge:function(){return j.edge===!0},"native":function(){return j.ie!==!0&&j.edge!==!0&&j.firefox!==!0&&j.safari!==!0&&j.chrome!==!0&&j.opera!==!0},"private":function(){var a=d.get("$q"),b=a.defer();if(this.chrome()&&window.webkitRequestFileSystem(window.TEMPORARY,1,function(){b.resolve(!1)},function(){b.resolve(!0)}),this.firefox()){var c;try{c=window.indexedDB.open("test")}catch(e){b.resolve(!0)}"done"===c.readyState&&b.resolve(!c.result),b.resolve(!1)}if(this.ie()||this.edge()){try{window.indexedDB||b.resolve(!0)}catch(e){b.resolve(!0)}b.resolve(!1)}if(this.safari()){try{window.localStorage.setItem("test",!0)}catch(e){b.resolve(!0)}b.resolve(!1)}return b.promise}}),a}])}])}(jQuery,angular),function(){"use strict";angular.module("Kinkee").provider("$detection",[function(){this.userAgent=navigator.userAgent,this.setUserAgent=function(a){this.userAgent=a},this.$get=function(){var a=this.userAgent,b={getUserAgent:function(){return a},isiOS:function(){return/(iPad|iPhone|iPod)/gi.test(a)},isAndroid:function(){return/(Android)/gi.test(a)},isWindowsPhone:function(){return/(IEMobile)/gi.test(a)},isMobile:function(){return b.isiOS()||b.isAndroid()||b.isWindowsPhone()}};return b}}])}(),function(a){"use strict";a.module("Kinkee").factory("$campaign",["$rootScope","$screen",function(b,c){var d={};return d.autosize=function(e){function f(d,e){return e?(g.remove(),h.remove(),i.css("bottom",0),void d.remove()):void setTimeout(function(){var e=d.height(),f=a.element(".chat");g.height(e),h.height(e),c.isDesktop()&&(j.css("bottom",0),i.css("bottom",e),f.css("bottom",0)),c.isMobile()&&(j.css("bottom",e),i.css("bottom",0),f.css("bottom",e)),b.$broadcast("promotionReady",{height:e})},0)}var g=a.element('<div class="sl-promotion-offset-mobile"></div>'),h=a.element('<div class="sl-promotion-offset-desktop"></div>'),i=a.element("aside.sidebar").find(".sidebar-footer"),j=a.element("#SexMessenger");g.appendTo("body"),h.prependTo("body"),f(e),d.autosize=f},d}])}(angular),function(){"use strict";var a="<div news-item></div>";angular.module("Kinkee").factory("$cardContainer",["$rootScope","$compile","$timeout",function(b,c,d){function e(a,b){return b=angular.isDefined(b)?b:1e3,d(function(){return o.update(a,p).then(function(){p&&(p=!1)})},b)}function f(d,e){var f,g,h=b.$new(!0);return h.resource=d,f=angular.element(a),g=n.children(l.cardItemSelector).eq(e),e&&g.length?g.before(f):f.appendTo(n),f=c(f)(h),j(f,d),f}function g(a){if(!l.trackby)return a;var b=h();return angular.grep(a,function(a){return b.indexOf(a[l.trackby])===-1})}function h(){if(angular.isString(l.trackby))return angular.map(m,function(a){return a.uuid})}function i(a){return angular.isArray(a)||(a=[a]),a}function j(a,b){a.uuid=k(a,b),a.visible=!1,a.resource=b||{},a.fixed=a.data("fixed")}function k(a,b){var c="";return b?c=b[l.trackby]:l.trackby&&(c=a.data(l.trackby)),c||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}var l={trackby:!1,visibleClass:"show",containerSelector:".card-container",cardItemSelector:".card-item",cardImageSelector:"img.card-image"},m=[],n=angular.element(l.containerSelector+":first"),o={},p=!1,q=!1;return l.init=function(){m=[],p=!1,n.children(l.cardItemSelector).each(function(a,b){b=angular.element(b),j(b),m.push(b)})},l.get=function(a){return a&&a>0?m.slice(a):m},l.getImages=function(a){var b=[];return angular.forEach(a,function(a){a.image=a.find(l.cardImageSelector),!a.visible&&a.image.length&&b.push(a.image)}),b},l.getIndex=function(a){return m[angular.isDefined(a)?a:0]},l.getTrackby=function(a){var b=angular.map(m,function(b,c){if(b.uuid===a)return c});if(b.length)return b[0]},l.add=function(a,b,c){if(a){var d=m.length;a=i(a),a=g(a);var h=[];return angular.forEach(a,function(a){h.push(f(a,c))}),b?(angular.forEach(h,function(a){c?m.splice(c,0,a):m.unshift(a)}),l.rebuild()):m=m.concat(h),e(d)}},l.remove=function(a){var b=l.getIndex(a);b.remove(),m.splice(a,1),e()},l.removeTrackby=function(a){return l.remove(l.getTrackby(a))},l.update=function(a,b){if(!q)return e(a,b)},l.clear=function(){m.forEach(function(a){a.fixed||(a.toRemove=!0,a.remove())}),m=angular.grep(m,function(a){return!a.toRemove})},l.total=function(){return m.length},l.rebuild=function(){p=!0},l.loading=function(a){q=!angular.isDefined(a)||!!a},l.isLoading=function(){return q},setTimeout(function(){n.length||(n=angular.element(l.containerSelector+":first")),o=n.scope()}),l}])}(),function(a,b){"use strict";var c=6e4,d="sl/CheckUpdates",e="notification/newcheckupdate";a.module("Kinkee").factory("$checkUpdates",["$document","$window","$url","$http","$auth","$rootScope",function(f,g,h,i,j,k){function l(){s||setTimeout(function(){return i.get(h.base(d)).then(function(a){var b=a.data.result;q={news:b.news,scraps:b.scraps,groups:b.groups},k.$broadcast("$checkUpdates",q),m(),v=g.setInterval(m,c)})},1e4)}function m(){if(!s)return i.get(h.base(e)).then(function(c){var d=c.data,e=d.result;0===d.returncode?(r={friends:e.friend_request.notifications,scraps:e.scraps.notifications,general:e.general.notifications},w.checkSession(e),b(f).trigger(new b.Event("checkUpdate",{updates:e}))):parseInt(d.returncode)===-1&&a.isFunction(g.logout)&&g.logout(g.location.toString())})}function n(){t||(l(),t=!0)}function o(){g.clearInterval(u),g.clearInterval(v),u=null,v=null,t=!1}function p(a){return a=a||0,a>99?"99+":a}var q={news:0,scraps:0,groups:0},r={friends:0,scraps:0,general:0},s=!1,t=!1,u=null,v=null,w={start:n,menu:function(a){return p(q[a])},navbar:function(a){return p(r[a])},initMenu:function(b,c){n(),a.isDefined(q[b])&&(q[b]=c)},initNavbar:function(b,c){n(),a.isDefined(r[b])&&(r[b]=c)},menuCounters:function(){return q},navbarCounters:function(){return r},pause:function(){s=!0,o()},unpause:function(b){return a.isNumber(b)?void setTimeout(function(){w.unpause()},1e3*b):(s=!1,void n())},isPaused:function(){return s},checkSession:function(a){j.keyUserSession()!==a.keyusersession&&g.lib&&(g.lib.message.showErrorMessage(a.message,!1),g.setTimeout(function(){g.reload()},3e3)),a.blocked>0&&g.lib&&(g.lib.message.showErrorMessage(a.message,!1),setTimeout(function(){g.logout(a.href)},3e3))},clear:function(a){return a?void(r[a]=0):void(r={friends:0,scraps:0,general:0})},setMessageUnread:function(a,b){b=b||!1,r.scraps=p(a),b&&k.$digest()}};return w}])}(angular,jQuery),function(a,b){"use strict";a.module("Kinkee").factory("$clickOutside",function(){var c={callback:a.noop,bind:function(d){var e,f=a.element("body");f.find(".dropbox-backdrop").length||(e=b('<div class="dropbox-backdrop"></div>').prependTo(".notifications"),a.isFunction(d)&&(c.callback=d),e.on("click",function(){e.remove(),c.callback.apply()}))},unbind:function(){c.callback=a.noop,b(".dropbox-backdrop").remove()}};return c})}(angular,jQuery),function(a){"use strict";a.module("Kinkee").factory("$cookies",["$document",function(b){function c(a){try{return decodeURIComponent(a)}catch(b){}}return function(){function d(d,e,f){var g,h,i,j,k,l,m,n,o;if(f=f||{},void 0!==e)return e="object"==typeof e?JSON.stringify(e):String(e),"number"==typeof f.expires&&(o=f.expires,f.expires=new Date,o===-1?f.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):void 0!==f.expirationUnit?"hours"===f.expirationUnit?f.expires.setHours(f.expires.getHours()+o):"minutes"===f.expirationUnit?f.expires.setMinutes(f.expires.getMinutes()+o):"seconds"===f.expirationUnit?f.expires.setSeconds(f.expires.getSeconds()+o):f.expires.setDate(f.expires.getDate()+o):f.expires.setDate(f.expires.getDate()+o)),b[0].cookie=[encodeURIComponent(d),"=",encodeURIComponent(e),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("");for(h=[],n=b[0].cookie,n&&(h=n.split("; ")),g={},m=!1,i=0;i<h.length;++i)if(h[i]){if(j=h[i],k=j.indexOf("="),l=j.substring(0,k),e=c(j.substring(k+1)),a.isUndefined(e))continue;if(void 0===d||d===l){try{g[l]=JSON.parse(e)}catch(p){g[l]=e}if(d===l)return g[l];m=!0}}return m&&void 0===d?g:void 0}return d.remove=function(a,b){var c=void 0!==d(a);return c&&(b||(b={}),b.expires=-1,d(a,"",b)),c},d}()}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$debounce",["$timeout","$q",function(a,b){return function(c,d,e){var f,g=b.defer();return function(){var h=this,i=arguments,j=function(){f=null,e||(g.resolve(c.apply(h,i)),g=b.defer())},k=e&&!f;return f&&a.cancel(f),f=a(j,d),k&&(g.resolve(c.apply(h,i)),g=b.defer()),g.promise}}}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$device",["$window",function(a){var b=a.navigator.userAgent,c=null,d={android:/Android/i,blackberry:/BlackBerry/i,ios:/iPhone|iPad|iPod/i,iphone:/iPhone/i,ipad:/iPad/i,ipod:/iPod/i,windows:/IEMobile/i};for(var e in d)d[e].test(b)&&(d[e]=!0,c=e);var f={name:c,isAndroid:function(){return d.android===!0},isBlackberry:function(){return d.blackberry===!0},isIos:function(){return d.ios===!0},isIphone:function(){return d.iphone===!0},isIpad:function(){return d.ipad===!0},isIpod:function(){return d.ipod===!0},isWindows:function(){return d.windows===!0},isMobile:function(){return f.isAndroid()||f.isBlackberry()||f.isIos()||f.isIphone()||f.isIpad()||f.isIpod()||f.isWindows()}};return f}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$dialog",["$q","$url","$templateCache","$rootScope","$compile","$lang",function(b,c,d,e,f,g){function h(a){a.modal("hide")}var i={},j=a.element("body"),k={title:"",message:"",yes:g("yes"),no:g("no"),ok:"OK",modalClass:"",info:"",html:"",close:!0,noConflict:!1};return a.forEach(["confirm","alert"],function(g){i[g]=function(i){var l,m=b.defer(),n="template/"+c.commonService("dialog/modal-"+g),o=d.get(n),p=e.$new(!0);return p.options=a.extend({},k,i),p.yes=function(){m.resolve(p.options),h(l)},p.no=function(){m.reject(p.options),h(l)},p.ok=function(){m.resolve(p.options),h(l)},p.close=function(){m.reject(p.options),h(l)},p.isDisabled=function(){return!!p.options.disableAction&&p.options.disableAction.call(p)},f(o)(p,function(a){var b={backdrop:!0,keyboard:!0};p.options.close||(b={backdrop:"static",keyboard:!1}),l=a,j.append(l),p.options.noConflict&&l.removeClass("sl-flex-modal"),l.addClass(p.options.modalClass).modal(b),l.on("hidden.bs.modal",function(){l.remove()})}),m.promise}}),i}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$driveRealtime",["$q","$window",function(b,c){var d={library:null,type:null};return d.get=function(){var e=b.defer();return d.library=c.loadOrtcFactory,d.type=c.IbtRealTimeSJType,a.isFunction(d.library)?d.library(d.type,function(a,b){return null!==b?(console.error(b.message),void e.reject(b.message)):void e.resolve(a.createClient())}):e.reject("Biblioteca Realtime não foi encontrada."),e.promise},d}])}(angular),function(a,b){"use strict";function c(a,b,c){if(a.indexOf("&"+b+"=")>-1||0===a.indexOf(b+"=")){var d,e,f=a.indexOf("&"+b+"=");return f===-1&&(f=a.indexOf(b+"=")),d=a.indexOf("&",f+1),e=d!==-1?a.substr(0,f)+a.substr(d+(f?0:1))+"&"+b+"="+c:a.substr(0,f)+"&"+b+"="+c}return a+"&"+b+"="+c}function d(a,b){if("string"==typeof b){var c,d,e=a+"=",f=b.split(/[;&]/);for(c=0;c<f.length;c++){for(d=f[c];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(e))return d.substring(e.length,d.length)}}}var e=b.indexedDB||b.mozIndexedDB||b.webkitIndexedDB||b.msIndexedDB,f=1;a.module("Kinkee").factory("$ecookie",["$q","$cookies",function(a,g){function h(e,f){var g=a.defer();try{f&&(b.name=c(b.name,e,f)),g.resolve(d(e,b.name))}catch(h){g.resolve(null)}return g.promise}function i(b,c){var d=a.defer();try{if(e){var g=e.open("idb_ecookie",f);g.onerror=function(){d.resolve(null)},g.onupgradeneeded=function(a){var b=a.target.result;b.createObjectStore("ecookie",{keyPath:"name",unique:!1})},c?g.onsuccess=function(a){var e=a.target.result;if(e.objectStoreNames.contains("ecookie")){var f=e.transaction(["ecookie"],"readwrite"),g=f.objectStore("ecookie");g.put({name:b,value:c})}e.close(),d.resolve(c)}:g.onsuccess=function(a){var c=a.target.result;if(c.objectStoreNames.contains("ecookie")){var e=c.transaction(["ecookie"]),f=e.objectStore("ecookie"),g=f.get(b);g.onsuccess=function(){return g.result?d.resolve(g.result.value):void d.resolve(null)}}else d.resolve(null);c.close()}}else d.resolve(null)}catch(h){d.resolve(null)}return d.promise}function j(a,b){return b&&g(a,b,{path:"/"}),g(a)}function k(a,b){return[j(a,b),i(a,b),h(a,b)]}return function(b,c){var d=a.defer();return a.all(k(b,c)).then(function(c){var e=c[0]||c[1]||c[2];return e?d.resolve(a.all(k(b,e))):d.reject()}),d.promise}}])}(angular,window),function(a){"use strict";a.module("Kinkee").factory("$errorMessages",function(){var b={};return{set:function(c,d){b[c]=a.extend(b[c]||{},d||{})},get:function(c,d,e){try{return a.isUndefined(d)?b[c]:a.isUndefined(e)?b[c][d]:b[c][d][e]}catch(f){var g=c+(d?"."+d:"")+(e?"."+e:"");throw new Error('Error message for "'+g+'" not found.')}}}})}(angular),function(a){"use strict";a.module("Kinkee").factory("$feedback",["$q","$dialog","$lang","$legacy","$http","$url","$templateRequest",function(b,c,d,e,f,g,h){return function(i){var j=b.defer();return h("template/modal/modal-feedback",{},!0).then(function(b){var h={title:i.title||d("WhatKinkee"),message:i.message||d("SendOpinion"),ok:d("Send"),html:b,modalClass:"sl-feedback",noConflict:e.isLegacy(),disableAction:function(){return this&&!this.options.feedback}},k=a.extend({},h,i);c.alert(k).then(function(b){var c=i.group?"#"+i.group+": ":"",d={feedback:c+b.feedback,status:b.status};f({method:"POST",url:g.base("feedback/send"),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:d,transformRequest:function(b){return a.param(b)}}).success(function(a){j.resolve(a)})["catch"](function(a){j.reject(a)})})}),j.promise}}])}(angular),function(a,b){"use strict";var c="fagalton",d="/assets/js/vendor/plugins/fingerprint/fingerprint2.min.js";a.module("Kinkee").factory("$fingerprint",["$ecookie","$q","$url",function(e,f,g){return function(){return e(c)["catch"](function(){var h={swfPath:"/assets/js/vendor/plugins/fingerprint/FontList.swf"},i=f.defer(),j=function(){var a=new b.Fingerprint2(h);a.get(function(a){e(c,a).then(function(a){i.resolve(a)})})};return a.isDefined(b.Fingerprint2)?j():jQuery.getScript(g.getCDN()+d).done(function(){j()}),i.promise})}}])}(angular,window),function(a){"use strict";a.module("Kinkee").factory("$flash",["$url","$window","$q","$interval","$modal","$timeout","$browser",function(b,c,d,e,f,g,h){function i(){if(navigator.plugins&&navigator.plugins.length){var a=navigator.plugins.namedItem(k.name);if(a)return j(a.description);if(navigator.mimeTypes&&navigator.mimeTypes[k.type]){var b=navigator.mimeTypes[k.type];if(b.enabledPlugin&&b.enabledPlugin.description)return j(b.enabledPlugin.description)}}}function j(a){var b=a.split(/ +/);return{description:a,version:parseFloat(b[2]),versionStr:b[2],revision:parseInt(b[3].replace(/[a-zA-Z]/g,""),10)}}var k={name:"Shockwave Flash",type:"application/x-shockwave-flash",swf:b.base("assets/swf/load-test.swf"),modal:{keyboard:!0,backdrop:"static",onClose:a.noop}},l={installed:null,enabled:null,properties:{version:null,versionStr:null,revision:null,description:null}};return l.getVersion=function(){return this.properties.version},l.getRevision=function(){return this.properties.revision},l.isInstalled=function(){return this.installed},l.isEnabled=function(){return this.enabled},l.detect=function(){var b=d.defer(),e=i();return a.isDefined(e)?(a.extend(this,{properties:e,installed:!0}),c.swfobject?this.simulate().then(function(){l.enabled=!0,b.resolve()},function(){l.enabled=!1,b.reject()}):b.resolve()):(this.installed=!1,b.reject()),b.promise},l.simulate=function(){var b=d.defer(),e="swfTest"+1e4*Math.random(),f=a.element("<div/>",{id:e}),i=a.element("<param/>",{name:"allowscriptacess",value:"sameDomain"});return f.append(i),a.element("body").append(f),c.swfobject.embedSWF(k.swf,e,1,1,l.properties.versionStr,!1,!1,!1,{name:e,allowScriptAccess:"always"},function(a){if(a.ref){var d=c.document.getElementById(e),f=d.style.cssText;g(function(){var a=!0;h.ie()&&(a="ActiveXObject"in c&&"Pan"in new c.ActiveXObject("ShockwaveFlash.ShockwaveFlash")),"Pan"in d&&a?b.resolve():d.style.cssText!==f?b.reject():b.reject()},2e3)}else b.reject()}),b.promise},l.modalInstall=function(c){var d=f.open(a.extend(k.modal,{windowClass:"sl-modal flash-install",templateUrl:b.api("template/modal/modal-install-flash/"+c),controller:["$scope",function(a){a.close=function(){d.close()}}],size:"lg"}));return d},l.modalUnlock=function(){var c=f.open(a.extend(k.modal,{windowClass:"sl-modal flash-unlock",templateUrl:b.api("template/modal/modal-unlock-flash"),controller:["$scope","$browser","$lang",function(a,b,d){a.getClass=function(){return d.currentLanguage+" "+b.name},a.browserDefault="opera"===b.name||"native"===b.name,a.close=function(){c.close()}}],size:"lg"}));return c},l.modalUpdate=function(c){var d=f.open(a.extend(k.modal,{windowClass:"sl-modal flash-update",templateUrl:b.api("template/modal/modal-update-flash/"+c),controller:["$scope",function(a){a.close=function(){d.close()}}],size:"lg"}));return d},l}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$focus",["$rootScope","$timeout",function(b,c){var d=function(a){return c(function(){b.$broadcast("focusOn",a)})};return d.getFirstError=function(b){var c=a.element(b).find(".has-error .form-control:eq()").attr("name");d(c)},d}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$geolocation",["$rootScope","$window","$q","$url","$http",function(a,b,c,d,e){function f(){return"geolocation"in b.navigator}var g={position:{coords:{latitude:null,longitude:null}}};return g.getCurrentPosition=function(d){var e=c.defer();return f()?b.navigator.geolocation.getCurrentPosition(function(b){a.$apply(function(){g.position.coords=b.coords,g.position.timestamp=b.timestamp,e.resolve(b)})},function(b){a.$apply(function(){e.reject({error:b})})},d):e.reject({error:{code:2,message:"This web browser does not support HTML5 Geolocation"}}),e.promise},g.watchPosition=function(c){f()?this.watchId||(this.watchId=b.navigator.geolocation.watchPosition(function(b){a.$apply(function(){g.position.coords=b.coords,g.position.timestamp=b.timestamp,delete g.position.error,a.$broadcast("$geolocation.position.changed",b)})},function(b){a.$apply(function(){g.position.error=b,delete g.position.coords,delete g.position.timestamp,a.$broadcast("$geolocation.position.error",b)})},c)):g.position={error:{code:2,message:"This web browser does not support HTML5 Geolocation"}}},g.clearWatch=function(){this.watchId&&(b.navigator.geolocation.clearWatch(this.watchId),delete this.watchId)},g.getLocation=function(a,b){return a=a?a:g.position.coords.latitude,b=b?b:g.position.coords.longitude,e({method:"GET",url:d.api("location/auto-detect"),cache:!0,params:{latitude:a,longitude:b}})},g}])}(angular),function(a,b){"use strict";a.module("Kinkee").factory("$googleAnalytics",["$webpage",function(c){function d(){return a.isObject(b._gat)}function e(){return b._gat._createTracker(f)}var f=c.meta("ga-key");return{trackEvent:function(c,g,h,i){if(a.isObject(c)){var j=a.copy(c);c=j.category,g=j.action,h=j.label,i=j.value}if(d()){var k=e();return k._initData(),void k._trackEvent(c,g,h,i)}var l=b._gas||[];l.push(["_setAccount",f]),l.push(["_trackEvent",c,g,h,i])}}}])}(angular,window),function(a){"use strict";function b(){var b=void 0===arguments[0]?{}:arguments[0];return a.fromJson(a.toJson(b))}a.module("Kinkee").factory("$history",["$rootScope","$window",function(c,d){var e=[],f=d.history,g={set:function(a,c,d){f.pushState(b(a),c,d)},replace:function(a,c,d){f.replaceState(b(a),c,d)},change:function(b){a.isFunction(b)&&e.push(b)}};return d.onpopstate=function(b){a.forEach(e,function(a){c.$evalAsync(function(){a.call(this,b,b.state)})})},g}])}(angular),function(a){"use strict";var b="sl-iframe",c='<div class="'+b+'"><div class="sl-iframe-content"><iframe></iframe></div></div>';a.module("Kinkee").factory("$iframe",["$window",function(d){var e={},f={fullscreen:!1,width:0,height:0};return e.open=function(b){var e=a.element(c),g=e.find("iframe"),h=a.extend({},f,b),i=a.element("body"),j=a.element("body > main");g.attr("src",h.src),h.fullscreen&&e.addClass("fullscreen"),h.width&&g.css("width",h.width),h.height&&g.css("height",h.height),h.onClose&&d.addEventListener("message",function(a){"close"===a.data.message&&(h.onClose(a),j.show())},!1),i.append(e),j.hide()},e.destroy=function(){a.element("."+b).remove()},e}])}(angular),function(a,b){"use strict";a.module("Kinkee").factory("$imageLoader",["$q","$rootScope",function(c,d){function e(a){this.imageLocations=a,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=c.defer(),this.promise=this.deferred.promise}return e.load=function(b){a.isArray(b)||(b=[b]);var c=new e(b);return c.load()},e.prototype={constructor:e,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var a=0;a<this.imageCount;a++)this.loadImageLocation(this.imageLocations[a]);return this.promise},handleImageError:function(a){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(a))},handleImageLoad:function(a){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:a}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:function(a){var c=this,e=b(new Image).load(function(a){d.$evalAsync(function(){c.handleImageLoad(a.target.src),c=e=a=null})}).error(function(a){d.$evalAsync(function(){c.handleImageError(a.target.src),c=e=a=null})}).prop("src",a)}},e}])}(angular,jQuery),function(a){"use strict";a.module("Kinkee").factory("$inlineValidator",["$errorMessages","$googleAnalytics",function(b,c){return function(d,e,f,g,h){if(a.isUndefined(e.$modelValue))throw new Error("Invalid ngModel.");if(a.isUndefined(f))throw new Error("Invalid field name.");var i={},j={},k=!1,l=d.closest(".form-group"),m=d.closest("form").data("errors"),n=d.attr("name"),o=a.element('<span class="help-block" />'),p=d.nextAll(".help-hint").find(".hint-error"),q=d.parents(".sl-form");return l.addClass("has-feedback"),i.addError=function(b){b&&(j[b.validationKey]=b,e.$setValidity(b.validationKey,!1),e.errorMessage=b.validationMessage),a.isDefined(h)&&"SubscribeValidator"===h&&c.trackEvent("Subscriber","Validation",b.validationMessage),i.toggleValidationClass()},i.clearErrors=function(){a.forEach(j,function(a){e.$setValidity(a.validationKey,!0)}),e.errorMessage=null,o.text(""),i.toggleValidationClass()},i.clearError=function(a){e.$setValidity(a,!0),e.errorMessage=null,o.text(""),i.toggleValidationClass()},i.toggleValidationClass=function(){l.removeClass("has-error has-success"),i.isInvalid()?l.addClass("has-error"):i.isValid(),i.toggleErrorMessage()},i.toggleErrorMessage=function(){e.errorMessage&&(p.text(e.errorMessage),o.text(e.errorMessage))},i.isValid=function(){return e.$valid&&e.$dirty},i.isInvalid=function(){return e.$invalid&&e.$dirty},i.setData=function(a){var b={};return b[f]=a,b},i.offlineValidation=function(){var a=!0,c=null,d=null;if(e.$dirty)for(c in i.getLocalErrors(e.$error))if(e.$error[c]){d=b.get(m,n,c),d&&i.addError({validationKey:c,validationMessage:b.get(m,n,c)}),a=!1;break}return a&&i.isValid()&&i.clearErrors(),i.toggleValidationClass(),a&&e.$dirty},i.onlineValidation=function(){return a.isFunction(g)?void g(i.setData(e.$modelValue),function(){i.clearErrors()},function(a){i.addError(a.data)}):void i.clearErrors()},i.getLocalErrors=function(c){var d={};return a.forEach(c,function(a,c){
b.get(m,n,c)&&(d[c]=a)}),d},k||(k=!0,l.append(o),o=l.find(".help-block")),d.on("blur",function(){i.offlineValidation()&&i.onlineValidation(),q.removeClass("focused")}),d.on("focus",function(){q.addClass("focused")}),e.$inlineValidator=i,i}}])}(angular),function(a,b){"use strict";a.module("Kinkee").factory("errorInterceptor",["$q","$lang",function(a,c){var d=550,e=400;return{responseError:function(f){if(d===f.status){var g=f.data.returnmessage||c("error_onProcessing")||"Desculpe, erro ao processar solicitação!";b.lib.message.showErrorMessage(g)}return e===f.status&&f.data.errorMessage&&b.lib.message.showErrorMessage(f.data.errorMessage),a.reject(f)}}}])}(angular,window),function(){"use strict";var a="Total",b="Pages",c="Score",d="X-Title",e=204;angular.module("Kinkee").factory("pagerInterceptor",["$q","$webpage",function(f,g){function h(a){return"GET"===a.method&&a.params?a.params.$$pager:"POST"===a.method&&a.data?a.data.$$pager:void 0}function i(a,b){b.page=angular.isNumber(b.page)?b.page:void 0,b.take=angular.isNumber(b.take)?b.take:void 0,angular.extend(a.headers,{"X-Page":b.page,"X-Take":b.take}),"GET"===a.method&&delete a.params.$$pager,"POST"===a.method&&delete a.data.$$pager,a.hasPager=!0}return{request:function(a){var b=h(a);return b&&i(a,b),f.when(a)},response:function(h){if(h.config.hasPager){if(h.status===e)return h.data=[{noContent:!0}],f.when(h);if(!angular.isArray(h.data))throw new Error("Result must be an Array");h.headers(d)&&g.title(h.headers(d)),h.data.push({pages:h.headers(b),total:h.headers(a),score:h.headers(c),noContent:!1})}return f.when(h)}}}])}(),function(a){"use strict";a.module("Kinkee").factory("redirectInterceptor",["$q","$url","$browser",function(b,c,d){for(var e=[],f=300;f<=307;f++)e.push(f);return{responseError:function(f){return e.indexOf(f.status)===-1||f.config.ignoreRedirect?d.ie()&&402===f.status&&!f.config.ignoreRedirect&&a.isString(f.data.redirectTo)?(f.data.isredirect=!0,c.redirect(f.data.redirectTo),b.reject(f)):b.reject(f):(f.data.isredirect=!0,c.redirect(f.data.redirectTo),b.reject(f))}}}])}(angular),function(){"use strict";angular.module("Kinkee").factory("securityInterceptor",["$q","$webpage",function(a,b){return{request:function(c){return"GET"===c.method?a.when(c):(c.headers["X-CSRF-Token"]=b.meta("X-CSRF-Token"),a.when(c))}}}])}(),function(a){"use strict";a.module("Kinkee").factory("subscribeInterceptor",["$q","$rootScope",function(a,b){var c=403;return{responseError:function(d){if(c===d.status){if(b.$auth.isLogged())return d.data.token?(b.$token.modal(d.data),a.reject(d)):(b.$subscribe.modal(d.data),a.reject(d));b.$signup.modal(d.data)}return a.reject(d)}}}])}(angular);var globalLang=window.lib?window.lib.lang:{};!function(a,b){"use strict";a.module("Kinkee").factory("$lang",function(){var c=function(a){if(b.line){if(a=b.line(a),a.match(/\{(\d+)\}/g)&&(null===arguments[1]||void 0===arguments[1]))return a;var c=Array.prototype.slice.call(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,b){return c[b]})}};return c.currentLanguage=a.element("html").attr("lang"),c})}(angular,globalLang),function(a){"use strict";a.module("Kinkee").factory("$legacy",function(){return{isLegacy:function(){return!!a.element("meta[name=x-legacy]").attr("content")}}})}(angular),function(a,b){"use strict";var c={local:"localStorage",session:"sessionStorage",redis:"redisStorage"};a.module("Kinkee").provider("LocalStorage",function(){this.$get=["$q","StorageModel",function(d,e){return function(){function f(a){return l?k[a]||k.localStorage:k.redisStorage}function g(b){if(b){var c=d.defer();return d.when(m.getItem(b)).then(function(b){return l&&(b=a.isString(b)?JSON.parse(b):b),b?void c.resolve(b):void c.reject(null)})["catch"](function(){c.reject(null)}),c.promise}}function h(a,b){if(a&&b){var c=d.defer(),e=l?JSON.stringify(b):b;return d.when(m.setItem(a,e)).then(function(a){a=a||b,c.resolve(a)})["catch"](function(a){c.reject(a)}),c.promise}}function i(a){if(a){var b=d.defer();return d.when(m.removeItem(a)).then(function(){b.resolve()})["catch"](function(a){b.reject(a)}),b.promise}}function j(){var a="localstoragetest";try{return k.localStorage.setItem(a,a),k.localStorage.removeItem(a),!0}catch(b){return!1}}var k={localStorage:b.localStorage,sessionStorage:b.sessionStorage,redisStorage:e},l=j(),m=f(c.local);return{ADAPTERS:c,getAdapter:f,get:g,set:h,clear:i}}}]})}(angular,window),function(a){"use strict";a.module("Kinkee").factory("$locationSearch",["$rootScope","$timeout","LocationModel",function(b,c,d){var e={},f={};return f.set=function(a,b){e[a]=b,c(function(){f.reload(a,b)})},f.get=function(a){return e[a]||{}},f.reload=function(a){var c=f.get(a);b.$broadcast("locationSearchReady:"+a,c)},f.isLocation=function(a){return!a.model.districtid&&!a.model.notFound},f.isDistrict=function(a){return a.model.cityid&&a.model.districtid},f.isNotFound=function(a){return a.model.notFound},f.getLocationSpan=function(a){return a.model.cityid?a.model.cityname:a.model.statename||a.model.countryname},f.getLocationSmall=function(a){var b=a.model.cityid&&a.model.stateid?a.model.statename+", ":"";return b+=a.model.countryname},f.getResultCss=function(a){return{notFound:a.model.notFound}},f.suggestLocation=function(b,c){var e=f.get(b.model.parentId).location,g={};b.model.suggesting=!0,g.suggestion=c,a.extend(g,e),d.suggest(g).$promise.then(function(){b.model.suggesting=!1,b.model.suggested=!0})},f}])}(angular),function(a,b){"use strict";var c=!!b.fn.modal;a.module("Kinkee").factory("$modalLoading",["$templateCache",function(d){var e=d.get("template/assets/js/sl/angular/_common/_app/services/modal/modal-loading.html"),f=null,g=null,h=0;return{create:function(d){c&&!f&&(h=b("html").scrollTop(),f=b(e).appendTo("body").modal(a.extend({backdrop:"static",keyboard:!1},d)),g=b(".modal-backdrop.in:last"),f.modal("moveToTop"))},remove:function(){f&&(f.modal("hide"),setTimeout(function(){f.remove(),g.remove(),f=null,g=null},500))},restoreScroll:function(){setTimeout(function(){b("html").scrollTop(h)},500)}}}]),c&&(b.fn.modal.Constructor.prototype.moveToTop=function(){var a=b(".ui-dialog:visible").last().css("z-index");a&&(this.$backdrop.css("z-index",a),this.$element.css("z-index",a+1));var c=b(".modal:visible").last().css("z-index");c&&(this.$backdrop.css("z-index",c),this.$element.css("z-index",c+1))})}(angular,jQuery),function(a){"use strict";a.module("Kinkee").factory("$modalTransition",["$q","$templateRequest","$compile","$rootScope",function(b,c,d,e){function f(a){var b=e.$new(!0),c=d('<span spinner data-size="15">')(b),f=h.modal.content.children();f.remove(),a&&h.modal.content.append(c)}function g(a){f(!1),a.content&&h.modal.content.empty().append(d(a.content)(a.scope))}var h={modal:{}};return h.transitionTo=function(d,e){h.modal={content:a.element(".modal-dialog").find(".modal-content")};var i={url:d,scope:e};if(!i.url)throw"URL is a parameter required!";if(!i.scope)throw"Scope is a parameter required!";var j=b.defer();return f(!0),c(i.url,{},!0).then(function(a){i.content=a,g(i),j.resolve()}),j.promise},h}])}(angular),function(a,b){"use strict";a.module("Kinkee").factory("$moment",["$lang",function(a){return b.applyMessageOptions=function(){if("en-us"===a.currentLanguage)b.locale("en",{relativeTime:function(a,b,c){return{value:a,key:c,now:"Now",yesterday:"Yesterday"}},longDateFormat:{l:"MM/DD/YY",ll:"MMM DD",LT:"h:mma"}});else if("pt-br"===a.currentLanguage)b.locale("pt-br",{monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),relativeTime:function(a,b,c){return{value:a,key:c,now:"Agora",yesterday:"Ontem"}},longDateFormat:{ll:"DD MMM",l:"DD/MM/YY",LT:"HH:mm"}});else if("it-it"===a.currentLanguage)b.locale("it",{monthsShort:"Gen_Feb_Mar_Apr_Mag_Giu_Lug_Ago_Set_Ott_Nov_Dic".split("_"),relativeTime:function(a,b,c){return{value:a,key:c,now:"Ora",yesterday:"Ieri"}},longDateFormat:{l:"DD/MM/YY",ll:"DD MMM",LT:"HH:mm"}});else if("es-es"===a.currentLanguage){var c="Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_");b.locale("es",{relativeTime:function(a,b,c){return{value:a,key:c,now:"Ahora",yesterday:"Ayer"}},monthsShort:function(a){return c[a.month()]},weekdaysShort:"Dom_Lun_Mar_Mié_Jue_Vie_Sáb".split("_"),longDateFormat:{l:"DD/MM/YY",ll:"DD MMM",LT:"HH:mm"}})}},b}])}(angular,window.moment),function(a){"use strict";a.module("Kinkee").service("$newRecaptcha",["$document","$window","$timeout","$q",function(b,c,d,e){function f(){return i?e.when(i):(h(),l)}function g(){if(!i)throw new Error("reCaptcha has not been loaded yet.")}function h(){var c={"en-us":"en","es-es":"es","pt-br":"pt-BR","it-it":"it"},d=c[a.element("html").attr("lang")],e=b.createElement("script");e.type="text/javascript",e.async=!0,e.src="//www.google.com/recaptcha/api.js?onload=slRecapthaApiLoaded&render=explicit&hl="+d;var f=a.element("body")[0];return f.appendChild(e),k.promise}var i,j=e.defer(),k=e.defer(),l=j.promise;return b=b[0],c.slRecapthaApiLoaded=function(){i=c.grecaptcha,j.resolve(i),k.resolve()},a.isDefined(c.grecaptcha)&&c.slRecapthaApiLoaded(),{create:function(a,b,c,d){return d.callback=c,d.sitekey=b,f().then(function(b){return b.render(a,d)})},reload:function(){g(),i.reset()},getResponse:function(a){return g(),i.getResponse(a)}}}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$notificationWorkflow",["$http","$url",function(a,b){var c={};return c.create=function(c,d,e,f){var g=b.baseAccounts("sl/workflow-notification");if(c){var h={login:d,type:c,qtd:e,ajax:1,account:f};a.post(g,h)}},c}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$os",["$window",function(a){var b,c=a.navigator.platform,d={mac:"Mac",windows:"Win",linux:"Linux"};for(var e in d)c.indexOf(d[e])!==-1&&(d[e]=!0,b=e);var f={name:b,isMac:function(){return d.mac===!0},isWindows:function(){return d.windows===!0},isLinux:function(){return d.linux===!0}};return f}])}(angular),function(a){"use strict";a.module("Kinkee").provider("Pager",function(){function b(a,b){e[a]=b}function c(a){var b=a.replace(/([A-Z])/g,"$1");return"set"+b.charAt(0).toUpperCase()+b.slice(1)}function d(b){return!a.isUndefined(b.$promise)||a.isFunction(b.then)}var e={page:0,take:10,pages:0,total:0,end:!1,loading:!1};"page take".split(" ").forEach(a.proxy(function(a){this[c(a)]=function(c){b(a,c)}},this)),this.setDefaults=function(b){e=a.extend(e,b)},this.$get=["$q",function(b){return function(c,f){function g(a,b){return b||0===b?(j[a]=b,b):j[a]}function h(){j.loading=!1,i.$dirty=!0,i.$pristine=!1}var i={},j=a.extend(a.copy(e),f),k=[];return"page take".split(" ").forEach(function(a){i[a]=function(b){return g(a,b)}}),i.total=function(){return j.total},i.pages=function(){return j.pages},i.getPageFromIndex=function(a){return Math.floor(a/i.take())+1},i.score=function(){return j.score},i.next=function(){return j.page>j.pages&&j.pages?j.pages:++j.page},i.prev=function(){return j.page<=0?0:--j.page},i.hasMorePages=function(){return j.pages>0&&j.page<j.pages},i.isLoading=function(){return j.loading},i.shouldPaginate=function(){return!i.isLoading()&&!(!i.hasMorePages()&&i.$dirty)},i.endOfPagination=function(){return j.end},i.clear=function(){j.page=0,j.take=10,j.pages=0,j.total="",j.score=0,j.end=!1,j.loading=!1},i.history=function(){return k},i.lastHistory=function(){if(k.length)return k[k.length-1]},i.paginate=function(b){if(a.isFunction(c))return b=a.extend(b||{},{$$pager:j}),k.push({params:b,options:j}),j.loading=!0,i.process(b)},i.process=function(e){var f=b.defer(),g=c.call({},e);if(!d(g))throw new Error("Uma promise não foi encontrada no resultado dos dados.");return b.when(g.$promise||g).then(function(b){var c=b[b.length-1];if(a.isObject(c)){var d=c.total,e=c.pages,g=c.score;j.end=c.noContent,a.isString(g)&&(j.score=parseFloat(g)),a.isString(d)&&(j.total=d),a.isString(e)&&(j.pages=parseInt(e)),b.pop()}j.end||i.next(),h(),f.resolve(b)},function(a){f.reject(a),h()}),f.promise},i.$pristine=!0,i.$dirty=!1,i}}]})}(angular),function(a){"use strict";a.module("Kinkee").provider("reCAPTCHA",function(){var a=null,b={theme:"custom",custom_theme_widget:"recaptcha"},c=this;this.setPublicKey=function(b){a=b},this.setOptions=function(a){b=a},this._createScript=function(a,b){var c=a.createElement("script");c.type="text/javascript",c.async=!0,c.src="//www.google.com/recaptcha/api/js/recaptcha_ajax.js",c.onreadystatechange=function(){"complete"==this.readyState&&b()},c.onload=b;var d=a.getElementsByTagName("body")[0];d.appendChild(c)},this.$get=["$q","$rootScope","$window","$document",function(a,d,e,f){var g=a.defer();return{create:function(a,d,h){return e.Recaptcha?g.resolve():c._createScript(f[0],g.resolve),b.callback=h,g.promise.then(function(){e.Recaptcha.create(d,a,b)})},response:function(){return e.Recaptcha.get_response()},challenge:function(){return e.Recaptcha.get_challenge()},reload:function(){return e.Recaptcha.reload()},destroy:function(){return e.Recaptcha.destroy()}}}]})}(angular),function(a,b,c,d){"use strict";a.module("Kinkee").factory("$screen",["$timeout","$rootScope","$detection","$debounce",function(e,f,g,h){function i(a){return a&&!a.style.display.toString().match(/none/i)&&a.offsetWidth}var j=a.element("body").append('<div class="screen-visibility"></div>').find(".screen-visibility"),k='<div data-mode="xs" class="visible-xs"></div><div data-mode="sm" class="visible-sm"></div><div data-mode="md" class="visible-md"></div><div data-mode="lg" class="visible-lg"></div><div data-mode="xl" class="visible-xl"></div><div data-mode="hd" class="visible-hd"></div>',l=d("html"),m=d("body"),n=d(c),o=d(b),p=null,q=!1,r="modal-open",s=g.isMobile(),t=s?"orientationchange.screen":"resize.screen",u=s?500:50,v=0;j.append(k),p=j.find("div"),n.on(t,h(function(){w.update(),q&&w.fixSize()},u));var w={SIDEBAR_BREAKPOINT_MOBILE:992,SIDEBAR_BREAKPOINT_DESKTOP:1200,XS_WIDTH:480,SM_WIDTH:600,MD_WIDTH:992,LG_WIDTH:1200,HD_WIDTH:1415,size:"xs",calculatedSize:"xs",calculedSizeMatch:480,mode:"mobile",setSize:function(a){w.size=a},setMode:function(a){w.mode=a},equals:function(b){return!a.isUndefined(b)&&b.indexOf(w.size)>-1},isWideScreen:function(){return"xl"===w.size||"hd"===w.size},isLargeScreen:function(){return"md"===w.size||"lg"===w.size},isMediumScreen:function(){return"md"===w.size},isSmallScreen:function(){return"sm"===w.size||"xs"===w.size},isWide:function(){return"wide"===w.mode},isMobile:function(){return"mobile"===w.mode},isDesktop:function(){return"desktop"===w.mode||"wide"===w.mode},orientation:function(){return c.orientation||c.screen&&c.screen.orientation||c.screen.orientation&&c.screen.orientation.angle||0},isPortrait:function(){return 0===w.orientation()||180===w.orientation()},isLandscape:function(){return 90===w.orientation()||w.orientation()===-90},isMobileBreakpoint:function(){return w.width()<w.SIDEBAR_BREAKPOINT_DESKTOP},isDesktopBreakpoint:function(){return w.width()<w.SIDEBAR_BREAKPOINT_DESKTOP},width:function(){return n.outerWidth()},innerWidth:function(){return c.innerWidth},height:function(b){var c=n.outerHeight();if(b){var d=a.element(".sl.navbar").outerHeight();return c-d}return c},update:function(){a.forEach(p,function(a){if(i(a)){var b=a.getAttribute("data-mode");switch(w.setSize(b),b){case"sm":case"xs":w.setMode("mobile");break;case"md":case"lg":w.setMode("desktop");break;case"xl":case"hd":w.setMode("wide")}return!1}});var b=w.width();b>=w.XS_WIDTH&&b<=w.SM_WIDTH&&(w.calculatedSize="xs",w.calculedSizeMatch=w.XS_WIDTH),b>=w.SM_WIDTH&&b<=w.MD_WIDTH&&(w.calculatedSize="sm",w.calculedSizeMatch=w.SM_WIDTH),b>=w.MD_WIDTH&&b<=w.LG_WIDTH&&(w.calculatedSize="md",w.calculedSizeMatch=w.MD_WIDTH),b>=w.LG_WIDTH&&b<=w.HD_WIDTH&&(w.calculatedSize="lg",w.calculedSizeMatch=w.LG_WIDTH),b>w.HD_WIDTH&&(w.calculatedSize="hd",w.calculedSizeMatch=w.HD_WIDTH),f.$broadcast("$screenChange",w.calculatedSize)},fixSize:function(){if(!m.hasClass("fixed-size")){var a=jQuery(c).width(),b=jQuery(c).height();l.width(a).height(b),m.width(a).height(b).css("overflow","hidden").addClass("fixed-size"),q=!0}},unfixSize:function(){m.hasClass("fixed-size")&&(l.css({width:"",height:""}),m.css({width:"",height:"",overflow:""}).removeClass("fixed-size"),q=!1)},blockScroll:function(a){(w.isMobile()||a)&&m.addClass(r)},unblockScroll:function(){m.removeClass(r)},hasVerticalScroll:function(){return o.height()>n.height()},visibleTop:function(){var b=a.element(".sl.navbar").outerHeight(),c=a.element(".sl-sticky-menu").outerHeight()||0;return b+v+c},isVisible:function(){return"visible"===b.visibilityState},getProportionalSize:function(a,b,c,d){var e,f;return a<c&&b<d?{width:a,height:b}:(e=a>c?c:a,f=Math.ceil(e*b/a),b>a&&(f=b>d?d:b,e=Math.ceil(f*a/b)),e>c&&(e=c,f=Math.ceil(e*b/a)),f>d&&(f=d,e=Math.ceil(f*a/b)),{width:e,height:f})}};return e(function(){w.update()}),f.$on("promotionReady",function(a,b){v=b.height}),w}])}(angular,document,window,jQuery),function(a,b){"use strict";a.module("Kinkee").factory("$script",["$q",function(a){var c={};return c.inject=function(c){var d=a.defer();c||d.reject();var e=b.createElement("script");e.type="text/javascript",e.src=c,e.async=!0,e.onreadystatechange=function(){"complete"===this.readyState&&d.resolve()},e.onload=function(){d.resolve()};var f=b.getElementsByTagName("body")[0];return f.appendChild(e),d.promise},c}])}(angular,document),function(a,b){"use strict";a.module("Kinkee").factory("$scroll",["$q","$timeout","$rootScope",function(c,d,e){var f=b("html, body");return{to:function(d,e,g,h){g&&(f=b(g));var i=0,j=c.defer();return a.isString(d)&&(d=a.element(d),d.length&&(i=d.offset().top)),a.isNumber(d)&&(i=d),e=e||400,a.isNumber(h)&&(i+=h),f.animate({scrollTop:i},{duration:e,complete:function(){j.resolve()}}),j.promise},toElement:function(b,c){return a.isString(b)?d(function(){e.$broadcast("scrollOn",b,c)}):(a.isArray(b)&&(b=b[0]),"top"===c&&(b.scrollTop=0),void("bottom"===c&&(b.scrollTop=b.scrollHeight)))},toTop:function(a){return this.toElement(a,"top")},toBottom:function(a){return this.toElement(a,"bottom")}}}])}(angular,jQuery),function(a){"use strict";a.module("Kinkee").factory("Socket",["$rootScope","$window","$driveRealtime","$interval","$q","DRIVE_REALTIME",function(b,c,d,e,f,g){var h=function(){this.id=null,this.token=null,this.key=null,this.dev=!0,this.cluster=0,a.extend(this,arguments[0]),this.url=this.dev?g.DEV_URL:g.URL,this.connected=!1,this.subscribed=!1,this.connectionMetaData={},this.ortc=null,this.channels=[],this.client=null,this.options={retry:!1,retryInterval:1e4,retryRepeat:0}},i=null;return h.prototype.onDisconnect=a.noop,h.prototype.onDisconnected=a.noop,h.prototype.onException=a.noop,h.prototype.onSubscribed=a.noop,h.prototype.onReconnecting=a.noop,h.prototype.onReconnected=a.noop,h.prototype.onConnected=a.noop,h.prototype.set=function(){a.isDefined(arguments[0])&&a.extend(this,arguments[0]),this.url=this.dev?g.DEV_URL:g.URL},h.prototype.connect=function(b){var c=this;b=b||{},a.extend(c.options,b);var d=f.defer();return this.key?(this.get().then(function(a){d.resolve(a)}),this.options.retry&&(this.interval=e(function(){c.isConnected()?e.cancel(c.interval):c.get().then(function(a){d.resolve(a)})},c.options.retryInterval,c.options.retryRepeat))):d.reject("Invalid Application Key"),d.promise},h.prototype.get=function(){var b=this,c=f.defer();return d.get().then(function(d){d.setClusterUrl(b.url),d.setId(b.id),d.setConnectionMetadata(a.toJson(b.connectionMetaData)),d.setHeartbeatActive(!0),d.setHeartbeatFails(20),d.setHeartbeatTime(10),d.setConnectionTimeout(2e3),d.connect(b.key,b.token),d.onConnected=function(a){b.ortc=a,b.connected=!0,c.resolve(b.ortc),b.options.retry&&e.cancel(i),b.onConnected.call(b,b.ortc)},d.onReconnected=function(a){b.ortc=a,b.connected=!0,b.onReconnected.call(b,b.ortc)},d.onReconnecting=function(a){b.reconnecting=!0,b.onReconnecting.call(b,a)},d.onSubscribed=function(a,c){b.subscribed=!0,b.onSubscribed.call(b,a,c)},d.onDisconnected=function(a){b.connected=!1,b.reconnected=!1,b.reconnecting=!1,b.onDisconnected.call(b,a)},d.onDisconnect=function(a){b.connected=!1,b.reconnected=!1,b.reconnecting=!1,b.onDisconnect.call(b,a)},d.onException=function(a,c){b.onException.call(b,a,c)},b.client=d}),c.promise},h.prototype.send=function(b,c,d){this.ortc&&b&&c&&(b=this.parseChannelName(b,d),this.ortc.send(b,a.toJson(c)))},h.prototype.subscribe=function(c,d,e){c=this.parseChannelName(c,e),this.channels.push(c),this.ortc.subscribe(c,!0,function(c,e,f){d.call(h,a.fromJson(f)),b.$$phase||b.$apply()})},h.prototype.unsubscribe=function(a,b){a=this.parseChannelName(a,b),this.channels.indexOf(a)!==-1&&h.ortc&&this.ortc.unsubscribe(a)},h.prototype.isConnected=function(){return!!this.ortc&&this.ortc.getIsConnected()},h.prototype.disconnect=function(){return!!this.ortc&&this.ortc.disconnect()},h.prototype.parseChannelName=function(a,b){return b&&(a="server:"+a,this.cluster&&(a+=":"+this.cluster)),a},h}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$templateRequest",["$templateCache","$url","$http","$q",function(a,b,c,d){function e(f,g,h,i){function j(){return k.totalPendingRequests--,d.reject()}var k=e;k.totalPendingRequests++;var l={cache:a,params:g},m=h?b.api(f):b.api(f+"/template");return m=i?b.base(f):m,c.get(m,l).then(function(b){var c=b.data;return c&&0!==c.length?(k.totalPendingRequests--,a.put(f,c),c):j()},j)}return e.totalPendingRequests=0,e}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$throttle",["$timeout",function(a){return function(b,c,d){c=c||250;var e,f;return function(){var g=d||this,h=Date.now(),i=arguments;e&&h<e+c?(a.cancel(f),f=a(function(){e=h,b.apply(g,i)},c)):(e=h,b.apply(g,i))}}}])}(angular),function(a){"use strict";var b="rivest";a.module("Kinkee").factory("$uniquehash",["$ecookie","$q",function(a,c){function d(a,b){a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]],b=[b[0]>>>16,65535&b[0],b[1]>>>16,65535&b[1]];var c=[0,0,0,0];return c[3]+=a[3]+b[3],c[2]+=c[3]>>>16,c[3]&=65535,c[2]+=a[2]+b[2],c[1]+=c[2]>>>16,c[2]&=65535,c[1]+=a[1]+b[1],c[0]+=c[1]>>>16,c[1]&=65535,c[0]+=a[0]+b[0],c[0]&=65535,[c[0]<<16|c[1],c[2]<<16|c[3]]}function e(a,b){a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]],b=[b[0]>>>16,65535&b[0],b[1]>>>16,65535&b[1]];var c=[0,0,0,0];return c[3]+=a[3]*b[3],c[2]+=c[3]>>>16,c[3]&=65535,c[2]+=a[2]*b[3],c[1]+=c[2]>>>16,c[2]&=65535,c[2]+=a[3]*b[2],c[1]+=c[2]>>>16,c[2]&=65535,c[1]+=a[1]*b[3],c[0]+=c[1]>>>16,c[1]&=65535,c[1]+=a[2]*b[2],c[0]+=c[1]>>>16,c[1]&=65535,c[1]+=a[3]*b[1],c[0]+=c[1]>>>16,c[1]&=65535,c[0]+=a[0]*b[3]+a[1]*b[2]+a[2]*b[1]+a[3]*b[0],c[0]&=65535,[c[0]<<16|c[1],c[2]<<16|c[3]]}function f(a,b){return b%=64,32===b?[a[1],a[0]]:b<32?[a[0]<<b|a[1]>>>32-b,a[1]<<b|a[0]>>>32-b]:(b-=32,[a[1]<<b|a[0]>>>32-b,a[0]<<b|a[1]>>>32-b])}function g(a,b){return b%=64,0===b?a:b<32?[a[0]<<b|a[1]>>>32-b,a[1]<<b]:[a[1]<<b-32,0]}function h(a,b){return[a[0]^b[0],a[1]^b[1]]}function i(a){return a=h(a,[0,a[0]>>>1]),a=e(a,[4283543511,3981806797]),a=h(a,[0,a[0]>>>1]),a=e(a,[3301882366,444984403]),a=h(a,[0,a[0]>>>1])}function j(a,b){a=a||"",b=b||0;for(var c=a.length%16,j=a.length-c,k=[0,b],l=[0,b],m=[0,0],n=[0,0],o=[2277735313,289559509],p=[1291169091,658871167],q=0;q<j;q+=16)m=[255&a.charCodeAt(q+4)|(255&a.charCodeAt(q+5))<<8|(255&a.charCodeAt(q+6))<<16|(255&a.charCodeAt(q+7))<<24,255&a.charCodeAt(q)|(255&a.charCodeAt(q+1))<<8|(255&a.charCodeAt(q+2))<<16|(255&a.charCodeAt(q+3))<<24],n=[255&a.charCodeAt(q+12)|(255&a.charCodeAt(q+13))<<8|(255&a.charCodeAt(q+14))<<16|(255&a.charCodeAt(q+15))<<24,255&a.charCodeAt(q+8)|(255&a.charCodeAt(q+9))<<8|(255&a.charCodeAt(q+10))<<16|(255&a.charCodeAt(q+11))<<24],m=e(m,o),m=f(m,31),m=e(m,p),k=h(k,m),k=f(k,27),k=d(k,l),k=d(e(k,[0,5]),[0,1390208809]),n=e(n,p),n=f(n,33),n=e(n,o),l=h(l,n),l=f(l,31),l=d(l,k),l=d(e(l,[0,5]),[0,944331445]);switch(m=[0,0],n=[0,0],c){case 15:n=h(n,g([0,a.charCodeAt(q+14)],48));break;case 14:n=h(n,g([0,a.charCodeAt(q+13)],40));break;case 13:n=h(n,g([0,a.charCodeAt(q+12)],32));break;case 12:n=h(n,g([0,a.charCodeAt(q+11)],24));break;case 11:n=h(n,g([0,a.charCodeAt(q+10)],16));break;case 10:n=h(n,g([0,a.charCodeAt(q+9)],8));break;case 9:n=h(n,[0,a.charCodeAt(q+8)]),n=e(n,p),n=f(n,33),n=e(n,o),l=h(l,n);break;case 8:m=h(m,g([0,a.charCodeAt(q+7)],56));break;case 7:m=h(m,g([0,a.charCodeAt(q+6)],48));break;case 6:m=h(m,g([0,a.charCodeAt(q+5)],40));break;case 5:m=h(m,g([0,a.charCodeAt(q+4)],32));break;case 4:m=h(m,g([0,a.charCodeAt(q+3)],24));break;case 3:m=h(m,g([0,a.charCodeAt(q+2)],16));break;case 2:m=h(m,g([0,a.charCodeAt(q+1)],8));break;case 1:m=h(m,[0,a.charCodeAt(q)]),m=e(m,o),m=f(m,31),m=e(m,p),k=h(k,m)}return k=h(k,[0,a.length]),l=h(l,[0,a.length]),k=d(k,l),l=d(l,k),k=i(k),l=i(l),k=d(k,l),l=d(l,k),("00000000"+(k[0]>>>0).toString(16)).slice(-8)+("00000000"+(k[1]>>>0).toString(16)).slice(-8)+("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)}return function(){return a(b)["catch"](function(){var d=c.defer(),e=[];e.push((new Date).toISOString()),e.push(Math.random()),e.push(Math.random()+(new Date).toISOString());var f=j(e.join("~~~"),31);return a(b,f).then(function(a){d.resolve(a)}),d.promise})}}])}(angular),function(a,b){"use strict";var c=a.element("base").attr("href");a.module("Kinkee").factory("$url",["$window",function(d){var e={base:function(a){return b?b.base_url_Kinkee+a:c+"/"+a},baseAccounts:function(a){if(b)return b.base_url_account+a},baseJsCDN:function(a){if(b)return b.base_url_js_cdn+a},assets:function(a){if(b)return b.base_url_assets+a},api:function(a){return e.base("service/"+a)},template:function(a){return e.api(a+"/template")},templateKey:function(a,b){return e.api(a+"?templateKey="+b)},referrer:function(){return document.referrer},redirect:function(a){d.location.href=a},reload:function(a){return a?void e.redirect(a):void d.location.reload()},path:function(){return d.location.pathname},href:function(a){return a?d.location.href.replace(d.location.search,"")+a:d.location.href},commonDirective:function(a){return"assets/js/sl/angular/_common/_app/directives/"+a+".html"},commonService:function(a){return"assets/js/sl/angular/_common/_app/services/"+a+".html"},customParams:function(b,c){var d=b+(b.indexOf("?")!==-1?"&":"?");return d+=c?a.param(c):"",decodeURIComponent(d)},toQueryString:function(b){return"?"+decodeURIComponent(a.param(b))},pushState:function(a,b,c){d.history.pushState(a,b,e.href(c))},replaceState:function(a,b,c){d.history.replaceState(a,b,e.href(c))},getCDN:function(){return a.element("meta[name=cdnbase]").attr("content")},getQueryString:function(){var a=d.location.href,b=a.split("?"),c={};if(b.length>1){var e=b[1].split("&");if(e.length>1)e.forEach(function(a){var b=a.split("=");c[b[0]]=!(b.length>1)||b[1]});else{var f=e[0].split("=");c[f[0]]=!(f.length>1)||f[1]}}return c||!1},removeSearch:function(a){return a.split("?")[0]},avatar:function(a,b){return e.base("avatar/"+a+"/"+b)}};return e}])}(angular,window.lib),function(a){"use strict";a.module("Kinkee").factory("$validator",function(){function b(b){var c=document.createElement("input");return c.type="email",c.value=a.trim(b),a.isFunction(c.checkValidity)?c.checkValidity():/\S+@\S+\.\S+/.test(b)}return{email:function(a){return b(a)}}})}(angular),function(){"use strict";var a=angular.module("Kinkee");a.constant("WEB_PUSH_TYPES",{COMMENTS_PHOTOS:"comment-photos"})}(angular),function(a){"use strict";a.module("Kinkee").factory("$webPush",["$q","$dialog","$lang","$browser","$url","$googleAnalytics","$auth","WebPushModel","WEB_PUSH_TYPES",function(b,c,d,e,f,g,h,i,j){function k(){return"Notification"in window}function l(){var a=b.defer();return"granted"===Notification.permission&&a.resolve(),"denied"===Notification.permission&&a.reject(),"default"===Notification.permission&&Notification.requestPermission().then(function(b){switch(b){case"granted":a.resolve();break;case"denied":a.reject();break;case"default":a.reject()}}),a}function m(a){var b=j.COMMENTS_PHOTOS+"-"+a,c=localStorage.getItem(b);return c||localStorage.setItem(b,!0),!!c}var n={appID:a.element("[name='one-signal-key']").attr("content"),userId:null};return n.init=function(){window.OneSignal&&window.OneSignal.push(function(){window.OneSignal.init({appId:n.appID,autoRegister:!1,persistNotification:!1,welcomeNotification:{disable:!0}}),window.OneSignal.getUserId(function(a){n.userId=a})})},n.show=function(a,b){k()&&l().promise.then(function(){n.show=function(a){return new Notification(a,b)},n.show(a)})["catch"](function(){console.log("Reject")})},n.close=function(){Notification.close()},n.test=function(){var a=d("webpush_headings_comment_photos"),b={icon:f.base("/assets/images/icons/png/web-push.png"),body:d("webpush_contents_comment_photos")};n.show(a,b),g.trackEvent("WebPush","Teste da notificação")},n.invitation=function(a){var d=b.defer();return b.all([h.checkSession(),e["private"]()]).then(function(b){var e=b[1],f=window.OneSignal.isPushNotificationsSupported();return m(h.user.accountid)?d.reject():e||!f?d.reject():(g.trackEvent("WebPush","Abertura da modal"),void c.confirm(a).then(function(){n.sign().then(function(a){d.resolve(a),g.trackEvent("WebPush","Assinado a notifição")})})["catch"](function(){g.trackEvent("WebPush","Fechamento da modal")}))}),d.promise},n.saveType=function(a){var c=b.defer();return a&&n.userId||c.reject(),i.sign({type:a,userId:n.userId},function(){c.resolve()},function(){c.reject()}),c.promise},n.sign=function(){var a=b.defer();return window.OneSignal||a.reject(),window.OneSignal.push(function(){window.OneSignal.isPushNotificationsEnabled(function(b){b?a.resolve(n.userId):(window.OneSignal.registerForPushNotifications(),window.OneSignal.on("subscriptionChange",function(b){b||a.reject(),window.OneSignal.getUserId(function(b){n.userId=b,a.resolve(n.userId)})}))})}),a.promise},n.success=function(){window.lib.message.showSuccessMessage(d("web_push_success_message"),!0)},n.error=function(){window.lib.message.showErrorMessage(d("web_push_error_message"),!0)},n.init(),n}])}(angular),function(a,b){"use strict";a.module("Kinkee").factory("$webpage",function(){return{title:function(c){return a.isDefined(c)&&(b.title=c),b.title},meta:function(b){return a.element("meta[name={value}]".replace("{value}",b)).attr("content")}}})}(angular,document),function(a,b){"use strict";a.module("Kinkee").config(["$provide",function(c){c.decorator("$window",["$delegate",function(c){return a.extend(c,{popup:function(a,c,d,e){d=d||600,e=e||600;var f=screen.width/2-d/2,g=screen.height/2-e/2;return b.open(a,c,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+d+", height="+e+", top="+g+", left="+f)}}),c}])}])}(angular,window),function(a){"use strict";a.module("Kinkee").controller("LoginController",["$scope","$login","$signup","$url","$modalInstance","$focus","$newRecaptcha","$googleAnalytics","modalData","LoginModel","LocalStorage",function(b,c,d,e,f,g,h,i,j,k,l){b.modal=j,b.login=new k,b.setGoTo=function(a){a&&(b.login.postgoto=a)},b.doLogin=function(a){return a.preventDefault(),b.hasError=!1,b.signinForm.$error.required?(b.hasError=!0,g(b.signinForm.$error.required[0].$name)):(b.loading=!0,b.loginValidationMessage="",void b.login.$save().then(function(a){if(i.trackEvent("Login","Sucesso"),b.modal.storage&&b.modal.storage.key&&b.modal.storage.value){var c=new l;c.set(b.modal.storage.key,b.modal.storage.value).then(function(){e.reload(a.redirectTo)})}else e.reload(a.redirectTo)},function(a){return i.trackEvent("Login","Erro"),b.loading=!1,b.loginValidationMessage=a.data.validationMessage,a.data.recaptcha&&h.reload(),g("topLogin")}))},b.doForgetPassword=function(){return b.forgetForm.$error.required?g(b.forgetForm.$error.required[0].$name):(b.loading=!0,void b.login.$forgotPassword().then(function(){b.loading=!1,c.goToConfirmPassword()}))},b.signup=function(){c.injected||b.close(),d.modal()},b.close=function(){a.isFunction(b.modal.onClose)&&b.modal.onClose.call(c,b),f.close()},b.clearErrors=function(){b.loginValidationMessage="",b.forgetValidationMessage=""},b.getFormGroupCss=function(a){return{"has-error":b.loginValidationMessage||b.hasError&&!b.login[a]
}},b.setModalData=function(a){b.modal=a},b.getLoginButtonCss=function(){return{"btn-disabled":!b.login.login||!b.login.password||b.loading}}}])}(angular),function(a){"use strict";a.module("Kinkee").controller("SignupController",["$scope","$timeout","$window","$signup","$detection","$errorMessages","$modalInstance","$http","$url","$screen","$login","$fingerprint","$subscribe","$uniquehash","$q","$googleAnalytics","$focus","reCAPTCHA","modalData","langs","SignupModel",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(a){g.set("signup",{login:{required:a.account_login_empty},email:{required:a.account_email_empty,email:a.account_email_invalid1},password:{required:a.account_password_empty},gender:{required:a.account_gender_empty}})}function x(){b.modal.title=b.modal.title||b.langs.account_title,b.modal.subtitle=b.modal.subtitle||b.langs.account_subtitle}function y(a){if(a.$submited=!0,a.$pristine||a.$invalid){a.$pristine=!1,a.$dirty=!0;for(var b in a){var c=a[b];c.$error&&c.$inlineValidator&&(c.$pristine=!1,c.$dirty=!0,c.$inlineValidator.offlineValidation())}return r.getFirstError(".sl-modal.signup"),!1}return!0}b.langs=u,b.$modalInstance=h,b.newAccount=new v({terms:!1,gender:"",newsletter:!1}),b.recaptchaError=!1,b.isMobile=f.isMobile(),e.setModalScope(b),w(u),b.init=function(a){b.newAccount.terms=a,n.modalOpened||(b.modal=t,x())},b.create=function(){y(b.signupForm)&&(b.busy=b.langs.account_creating,p.all(o(),m()).then(function(){b.newAccount.href=d.location.href,v.save(b.newAccount,function(a){q.trackEvent("SignUp","Sucesso","Somente Cadastro"),j.redirect(a.redirectTo)},function(a){c(function(){b.busy=!1},1e3),q.trackEvent("SignUp","Erro",a.data.validationMessage),406===parseInt(a.status)&&("recaptcha"===a.data.validationKey?b.recaptchaError=a.data.validationMessage:b.recaptchaError=!1)})}))},b.setModalData=function(a){b.modal=a},b.setLangs=function(a){b.langs=a,w(a),x()},b.close=function(){a.isFunction(b.modal.onClose)&&b.modal.onClose.call(e,b),h.close()},b.login=function(){return h.close&&b.close(),a.isDefined(d.OpenNewDropAccounts)?void(k.isDesktop()?c(function(){d.OpenNewDropAccounts()},100):l.modal()):l.modal()},b.nextStep=function(a){y(b.signupForm)&&(n.subscribe.valid=!0,e.user=b.subscription.signup,n.setActiveTab(a))},b.openTerms=function(){e.openTerms()}}])}(angular),function(a){"use strict";var b=!1,c=885;a.module("Kinkee").controller("SubscribeOneClickController",["$scope","SubscribeOneClickModel","modalData","plans","card","$modalInstance","$subscribeOneClick","$timeout","$q","$compile","$url","$token","$subscribe","$carousel","$screen","MODAL_TYPE",function(d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(a,b){var c=l.defer(),e=a.find(".modal-content"),f=a.find(".modal-dialog");return u(a,b.title).then(function(){e.empty().load(b.url,j.params,function(){m(e.contents())(d),a.removeClass("erro sucesso pagseguro iframe").addClass(b.classModal),v(a,b).then(function(){setTimeout(function(){e.removeClass("in"),f.find(".modal-loader").remove(),c.resolve()},500)})})}),c.promise}function u(a,c){var e=l.defer(),f=a.find(".modal-dialog"),g=a.find(".modal-content");if(b)e.resolve();else{var h='<div class="modal-loader">';h+=c?"<h1>"+c+"</h1>":"",h+="</div>",f.find(".modal-loader").remove();var i=f.prepend(h).find(".modal-loader");d.injected||f.height(w(g)),setTimeout(function(){f.addClass("loading progress"),i.addClass("in"),e.resolve()}),b=!0}return e.promise}function v(a,c){var e=l.defer(),f=a.find(".modal-dialog"),g=a.find(".modal-content"),h=a.find(".modal-loader");return b?(setTimeout(function(){h.removeClass("in").empty(),d.injected||f.height(w(g)),f.addClass(c.classToAdd),f.removeClass(c.classToRemove).removeClass("progress"),setTimeout(function(){f.removeClass("loading"),g.addClass("in"),e.resolve()},800)},1e3),b=!1):e.resolve(),e.promise}function w(a){var b=a.height();return b>c?c:b}function x(a){return j.getTemplateUrl(n.api("subscribe/"+a))}function y(){d.planIndex=0,a.forEach(d.plans,function(a,b){+a.id===h.planid&&(d.planIndex=b,j.setPlan(a))})}d.subscription=new e(f.params),d.$subscribeOneClick=j,d.$subscribe=p,d.modal=f,d.$modalInstance=i,d.plans=g,d.init=function(a,b){d.subscription.autorecharge=!!a,d.$subscribeOneClick.testab=b?b:null,d.autorechargeEventShow="mouseover",d.autorechargeEventHide="mouseleave",r.isMobile()&&(d.autorechargeEventShow="click",d.autorechargeEventHide="")},d.card={flag:null,last:null,planid:null},a.extend(d.card,h),d.subscription=a.extend(d.subscription,{onebuy:!0,planid:d.card.planid,card:{plots:null}}),d.hasPlots=!1,j.setModalScope(d),d.setElem=function(a){d.$elem=a},d.close=function(){a.isFunction(d.modal.onClose)&&d.modal.onClose.call(j,d),i.close()},d.error=function(b){a.isDefined(window.zEmbed)&&window.zEmbed.show(),b=b||{};var c=" erro ";return a.isDefined(b.windowClass)&&(c=b.windowClass+c),t(d.$elem,a.extend({url:x("subscribe-one-click-error"),classModal:c,classToRemove:"modal-sm"},b))},d.fatalError=function(b){a.isDefined(window.zEmbed)&&window.zEmbed.show(),b=b||{};var c=" erro ";return a.isDefined(b.windowClass)&&(c=b.windowClass+c),t(d.$elem,a.extend({url:x("subscribe-one-click-fatal-error"),classModal:"subscribe-one-click erro",classToAdd:"modal-sm",classToRemove:"modal-lg"},b))},d.success=function(b){b=b||{};var c=" sucesso ";return a.isDefined(b.windowClass)&&(c=b.windowClass+c),t(d.$elem,{url:x("subscribe-one-success"),classModal:c,classToRemove:"modal-lg"}).then(function(){a.isFunction(d.modal.onSuccess)&&d.modal.onSuccess.call(j,d)})},d.pagseguro=function(b){b=b||{};var c=" iframe-pagseguro ";return a.isDefined(b.windowClass)&&(c=b.windowClass+c),t(d.$elem,a.extend({url:x("subscribe-one-click-pagseguro"),classModal:c,classToAdd:"modal-lg",classToRemove:"modal-sm"},b))},d.process=function(b){var c,e=a.copy(d.subscription),f=t(d.$elem,{title:b});return c=d.$subscribeOneClick.isPagseguro()?e.$pagseguro():e.$sign(),l.all(c,f)},d.choice=function(){var b=t(d.$elem,{url:x("subscribe-one-click"),classToAdd:"modal-sm",classToRemove:"modal-lg"});return l.when(b).then(function(){var b=q("ul[rn-carousel]");a.isDefined(b.carouselIndex)&&b.carouselIndex<0?b.nextSlide():y()}),b},d.changePaymentMethod=function(b){if(a.isDefined(j.params.onebuy)&&j.params.onebuy){var c={params:{action:(j.params.action?"-":"")+"CHANGE",preventOneBuy:!0,planid:d.subscription.planid,payment:b,to:j.params.to?j.params.to:""},onSuccess:function(){d.modal.onSuccess.call(p,p.$modalScope)},onClose:function(){d.modal.onClose.call(p,p.$modalScope)}};j.params.to&&a.extend(c,{title:d.modal.title,subtitle:d.modal.subtitle}),j.type===s.TOKEN?o.modal(c):j.type===s.SUBSCRIPTION&&p.modal(c)}else{var e={params:{action:j.params.action+"-CHANGE",planid:d.subscription.planid,payment:b},onSuccess:function(){d.modal.onSuccess.call(p,p.$modalScope)},onClose:function(){d.modal.onClose.call(p,p.$modalScope)}};p.modal(e)}d.close()},d.getClass=function(a){return{one:!a,two:1===a,three:2===a}},d.$watch("planIndex",function(b){b>-1&&(d.subscription.planid=+d.plans[b].id,j.setPlan(d.plans[b]),a.isArray(d.plans[b].parcs)?(d.hasPlots=!!d.plans[b].parcs.length,d.setPlot(),d.setPlotName()):d.hasPlots&&d.resetPlot())}),d.resetPlot=function(){d.hasPlots=!1,d.editPlot=!1},d.setPlotName=function(){a.isArray(d.plans[d.planIndex].parcs)&&(d.subscription.card.plots?d.plans[d.planIndex].parcs.forEach(function(a){a.value===d.subscription.card.plots&&(d.plotName=a.name)}):(d.subscription.card.plots=+d.plans[d.planIndex].parcs[0].value,d.plotName=d.plans[d.planIndex].parcs[0].name))},d.setEditPlot=function(){d.editPlot=!0},d.setPlot=function(b){b?d.subscription.card.plots=b:a.isArray(d.plans[d.planIndex].parcs)&&(d.subscription.card.plots=d.plans[d.planIndex].parcs[0].value)},k(function(){y(),d.$elem=i.elem||{},d.setPlot()})}])}(angular),function(a){"use strict";var b=885,c=!1;a.module("Kinkee").controller("SubscribeController",["$scope","$screen","$browser","$url","$subscribe","$q","$compile","$interpolate","$timeout","$errorMessages","$modalInstance","$lang","plans","testimonials","modalData","langs","SubscribeModel","AddressModel","SignupModel","AccountModel",function(d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(b){var c={};return c=d.injected?a.isDefined(d.removeFixScreen)&&e.equals(d.removeFixScreen)?{3:{row:"row",cols:"col-md-4 col-sm-4 col-xs-4"},4:{row:"row",cols:"col-md-3 col-sm-6 col-xs-3"},5:{row:"row-10",cols:"col-10-md-5"}}:{3:{row:"row",cols:"col-md-6 col-sm-6"},4:{row:"row",cols:"col-md-4 col-sm-4"},5:{row:"row-10",cols:"col-10-md-5"}}:{3:{row:"row",cols:"col-md-4 col-sm-6 col-xs-12"},4:{row:"row",cols:"col-md-3 col-sm-4 col-xs-12"},5:{row:"row-10",cols:"col-10-md-2 col-10-sm-5 col-10-xs-12"}},c[b||3]}function y(){var a="";return d.injected?(a=["specialOffer","bestOption","main"],e.equals(d.removeFixScreen)&&(a="")):a=e.isMobile()?["specialOffer","bestOption","main"]:"",a}function z(a,b){var e=i.defer(),f=a.find(".modal-dialog"),g=a.find(".modal-content");if(c)e.resolve();else{var h='<div class="modal-loader">';h+=b?"<h1>"+b+"</h1>":"",h+="</div>",f.find(".modal-loader").remove();var j=f.prepend(h).find(".modal-loader");d.injected||f.height(C(g)),l(function(){f.addClass("loading progress"),j.addClass("in"),e.resolve()}),c=!0}return e.promise}function A(a,b){var e=i.defer(),f=a.find(".modal-dialog"),g=a.find(".modal-content"),h=a.find(".modal-loader");return c?(l(function(){h.removeClass("in").empty(),d.injected||f.height(C(g)),f.addClass(b.classToAdd),f.removeClass(b.classToRemove).removeClass("progress"),l(function(){f.removeClass("loading"),g.addClass("in"),e.resolve()},800)},1e3),c=!1):e.resolve(),e.promise}function B(b,c){var e=i.defer(),f=b.find(".modal-content"),g=b.find(".modal-dialog");return z(b,c.title).then(function(){f.empty().load(c.url,h.params,function(){j(f.contents())(d),b.removeClass("erro sucesso pagseguro iframe").addClass(c.classModal),a.isDefined(c.payment)&&(h.setActivePayment(c.payment),h.showPayment(c.payment)),A(b,c).then(function(){l(function(){f.removeClass("in"),g.find(".modal-loader").remove(),e.resolve()},500)})})}),e.promise}function C(a){var c=a.height();return c>b?b:c}function D(){var a='<div class="popoverSecurity">';return a+='<div class="{{cvv.cssClass}}"></div>',a+="<p>{{cvv.message}}</p>",a+="</div>",d.popoverRule.placeholder=4===d.popoverRule.cvv.code?"0000":"000",d.popoverRule.mask="000"===d.popoverRule.placeholder?"999":"9999",k(a)(d.popoverRule)}function E(a){return h.getTemplateUrl(g.base("subscribe/?template="+a))}function F(){d.langs&&m.set("subscribeCard",{number:{required:d.langs.subscribe_validCard,creditCard:d.langs.subscribe_validCard,flag:d.langs.subscribe_WithoutFlag},validity:{required:d.langs.subscribe_expirationDate,month:d.langs.subscribe_monthBetween,month2:d.langs.subscribe_monthInvalid,year:d.langs.subscribe_invalidYear},name:{required:d.langs.subscribe_sameNameCard},securityCode:{required:d.langs.subscribe_securityCode},zipCode:{required:d.langs.subscribe_valid_required_zipcode,zipcode:d.langs.subscribe_invalid_required_zipcode},city:{required:d.langs.subscribe_valid_required_city},state:{required:d.langs.subscribe_valid_required_state,state:d.langs.subscribe_invalid_required_state},addressNum:{required:d.langs.subscribe_valid_required_address_num_min,addressnum:d.langs.subscribe_invalid_required_address_num},addressNumFixed:{required:d.langs.subscribe_valid_required_address_num,addressnum:d.langs.subscribe_invalid_required_address_num},address:{required:d.langs.subscribe_valid_required_address},ddd:{required:d.langs.subscribe_valid_required_ddd,ddd:d.langs.subscribe_invalidDD},phone:{required:d.langs.subscribe_valid_required_phone,phone:d.langs.subscribe_invalid_required_phone},neighborhood:{required:d.langs.subscribe_valid_required_neighborhood},email:{required:d.langs.subscribe_email,email:d.langs.subscribe_add_email_valid_error_invalidemail},nome:{required:d.langs.subscribe_fullName},cpf:{required:d.langs.subscribe_validCpf,cpf:d.langs.subscribe_invalidCpf},banco:{required:d.langs.subscribe_select_bank}})}function G(b){if(!a.isArray(b))throw"O parametro deve ser um array";return!b.every(function(b){return a.isUndefined(b.specialOffer)})}function H(){d.subscription.signup.login=d.subscription.signup.email=d.subscription.signup.password=d.subscription.signup.terms=null}d.$screen=e,d.$modalInstance=n,d.injected=a.isUndefined(n.close),d.grid=x(p.length),d.popoverRule={size:16,cvv:{code:3,cssClass:"securityCode",message:o("subscribe_number3Digits")}},d.subscription=new t(a.extend({},r.params)),d.plans=p,w.getAccount({},function(a){d.isExterior=a.isExterior}),a.extend(d.subscription,{card:{plots:0}}),d.langs=s,d.testimonials=q,d.modal=r,d.popoverSecurity=D(),d.showAddress=!1,F(),d.gridOrder=y(),d.isSpecialPlan=function(a){return a.bestOption||a.specialOffer||a.discount},d.getClassByPlans=function(){return d.plans.length>=4?"small-discount":""},d.setRemoveFixScreen=function(a){d.removeFixScreen=a.split(" ")},d.setPlots=function(b){b?d.subscription.card.plots=b:a.isArray(h.selectedPlan.parcs)?d.subscription.card.plots=h.selectedPlan.parcs[0].value:d.subscription.card.plots=null},d.setPlans=function(a){d.plans=a,d.grid=x(a.length),d.gridOrder=y(),d.hasSpecialOffer=G(d.plans)},d.setLangs=function(a){d.langs=a,F()},d.setTestimonials=function(a){d.testimonials=a},d.setModalInstance=function(a){d.$modalInstance=a},d.setModalData=function(b){d.modal=b,b.params&&(d.subscription=a.extend(d.subscription,b.params))},d.setSubscribeScope=function(){h.setModalScope(d)},d.setElem=function(a){d.$elem=a},d.recheckValidator=function(){var b=d.$subscribe.getForm();(b.$pristine||b.$invalid)&&(b.$pristine=!1,b.$dirty=!0,b.address.$inlineValidator.offlineValidation(),b.neighborhood.$inlineValidator.offlineValidation(),b.city.$inlineValidator.offlineValidation(),b.state.$inlineValidator.offlineValidation(),a.forEach(b.$error,function(b){a.forEach(b,function(a){a.$error&&a.$inlineValidator&&(a.$pristine=!1,a.$dirty=!0,a.$inlineValidator.offlineValidation())})}))},d.fitBestOptionPlan=function(b){return d.injected?d.hasSpecialOffer?!e.equals(d.removeFixScreen)&&a.isDefined(b.specialOffer):a.isDefined(d.removeFixScreen)?!e.equals(d.removeFixScreen)&&(a.isDefined(b.bestOption)||a.isDefined(b.specialOffer)||a.isDefined(b.main)):a.isDefined(b.bestOption)||a.isDefined(b.specialOffer)||a.isDefined(b.main):e.isSmallScreen()&&(a.isDefined(b.bestOption)||a.isDefined(b.specialOffer)||a.isDefined(b.main))},d.checkPlanSelected=function(){var b=null;a.forEach(d.plans,function(a){a.selected&&(b=a)}),b&&(h.setActiveTab(h.TABS.PAYMENTS),h.setActivePayment(h.PAYMENTS.CREDIT),h.setPlan(b))},d.getPlanStyle=function(a){return{main:a.main,"best-option":a.bestOption,"special-offer":a.specialOffer,discount:a.discount,xdays:a.xdays,xdays30:a.xdays&&30===a.period,"plan-annual":365===a.period,blackfriday:"black-friday2015"===a.cssclass,cybermonday:"cyber-monday2015"===a.cssclass,woman:"woman"===a.cssclass}},d.load=function(a){z(n.elem,a),l(function(){A(n.elem)},2e3)},d.process=function(b){var c,e=a.copy(d.subscription),f=B(d.$elem,{title:b});return d.$subscribe.isPagseguro()?c=e.$pagseguro():d.$subscribe.isInvoice()?c=e.$invoice():d.$subscribe.isDebit()||d.$subscribe.isCredit()?c=e.$sign():d.$subscribe.isDebitOnline()?(e.senderHash=PagSeguroDirectPayment.getSenderHash(),c=e.$pagseguroDebitOnline()):d.$subscribe.isVerotel()&&(c=e.$verotel()),i.all(c,f)},d.saveSignup=function(a,b){var c=v.save(a),e=B(d.$elem,{title:b});return i.all(c,e)},d.choice=function(b){a.isUndefined(b)&&(b=h.PAYMENTS.CREDIT);var c=B(d.$elem,{url:E("subscribe"),classToAdd:"modal-lg",classToRemove:"modal-sm",payment:b});return a.isDefined(d.subscription.signup)&&(H(),h.subscribe.valid=!1,h.setActiveTab(h.TABS.SUBSCRIBE)),i.when(c).then(function(){if(d.$broadcast("$subscribe-retry",d.subscription),h.retry=!0,f.ie()&&f.version>9){var b=a.copy(d.subscription.card);l(function(){d.subscription.card=b},100)}}),c},d.success=function(){return B(d.$elem,{url:E("success"),classModal:"sucesso",classToRemove:"modal-lg"}).then(function(){a.isFunction(d.modal.onSuccess)&&d.modal.onSuccess.call(h,d)})},d.templateSuccess=function(a){return B(d.$elem,{url:E(a),classModal:"sucesso",classToRemove:"modal-lg"})},d.invoice=function(b){return B(d.$elem,a.extend({url:E("invoice"),classModal:"iframe-boleto",classToAdd:"modal-lg",classToRemove:"modal-sm"},b))},d.error=function(b){return a.isDefined(window.zEmbed)&&window.zEmbed.show(),B(d.$elem,a.extend({url:E("error"),classModal:"erro",classToRemove:"modal-lg"},b))},d.pagseguro=function(b){return B(d.$elem,a.extend({url:E("pagseguro"),classModal:"iframe-pagseguro",classToAdd:"modal-lg",classToRemove:"modal-sm"},b))},d.verotel=function(b){return B(d.$elem,a.extend({url:E("verotel"),classModal:"iframe-pagseguro",classToAdd:"modal-lg",classToRemove:"modal-sm"},b))},d.fatalError=function(b){return a.isDefined(window.zEmbed)&&window.zEmbed.show(),B(d.$elem,a.extend({url:E("fatal-error"),classModal:"erro",classToRemove:"modal-lg"},b))},d.closeSubscribe=function(){t.close({testab:h.testab}),a.isFunction(d.modal.onClose)&&d.modal.onClose.call(h,d),n.close(),h.modalOpened=!1,a.isDefined(window.zEmbed)&&window.zEmbed.hide(),l(function(){h.clear()},500)},d.getMasterValue=function(){return h.isCredit()?"mastercard":h.isDebit()?"mastercardmaestro":void 0},d.getVisaValue=function(){return h.isCredit()?"visa":h.isDebit()?"visaelectron":void 0},d.getAddress=function(){var b=d.subscription.address.zipCode;b&&b.length>7&&(d.subscription.address.city="",d.subscription.address.state="",d.subscription.address.street="",d.subscription.address.neighborhood="",d.subscription.address.formatedAddress="",d.subscription.address.number="",d.subscription.address.adjunct="",d.loadingAddress=!0,u.get({cep:b},function(b){var c=!1;a.isUndefined(b.cidade)||""===b.cidade?c=!0:d.subscription.address.city=b.cidade,a.isUndefined(b.uf)||""===b.uf?c=!0:d.subscription.address.state=b.uf,a.isUndefined(b.logradouro)||""===b.logradouro?c=!0:d.subscription.address.street=b.logradouro,a.isUndefined(b.bairro)||""===b.bairro?c=!0:d.subscription.address.neighborhood=b.bairro,e.isMobile()||c?d.showAddress=!0:d.subscription.address.formatedAddress=b.bairro+", "+b.cidade+"/"+b.uf,d.loadingAddress=!1},function(){d.loadingAddress=!1}))},d.getAddressBlur=function(){if(d.subscription.address){var b=d.subscription.address.zipCode;b&&b.length>=7&&(7===b.length&&(d.subscription.address.zipCode="0"+b,b=d.subscription.address.zipCode),u.get({cep:b},function(b){var c=!1;a.isUndefined(b.cidade)||""===b.cidade?c=!0:d.subscription.address.city=b.cidade,a.isUndefined(b.uf)||""===b.uf?c=!0:d.subscription.address.state=b.uf,a.isUndefined(b.logradouro)||""===b.logradouro?c=!0:d.subscription.address.street=b.logradouro,a.isUndefined(b.bairro)||""===b.bairro?c=!0:d.subscription.address.neighborhood=b.bairro,e.isMobile()||c?d.showAddress=!0:d.subscription.address.formatedAddress=b.bairro+", "+b.cidade+"/"+b.uf,d.loadingAddress=!1},function(){d.loadingAddress=!1}))}},d.showAddressFields=function(){d.showAddress=!0},d.$on("$screenChange",function(){d.$screen=e,d.grid=x(d.plans.length),d.gridOrder=y(),e.isDesktop()&&(h.hasPayment()||h.setActivePayment(h.PAYMENTS.CREDIT))}),d.$on("$cardValidationRule",function(a,b){d.popoverRule=b,d.subscription.flag=b.flag,d.popoverSecurity=D(b)}),d.$watch(function(){return d.subscription.flagBank},function(a){if(a){d.subscription.bank=h.BANKS[a];var b=h.getForm();b.banco.$inlineValidator.clearError("required")}}),d.createScriptPagSeguro=function(a,b,c){var e=a.createElement("script");e.type="text/javascript",e.async=!0,e.src=d.urlPagSeguro,e.onreadystatechange=function(){"complete"===this.readyState&&c()},e.onload=c;var f=a.getElementsByTagName("body")[0];f.appendChild(e)},l(function(){d.$elem=n.elem||{},d.plans.length>0&&n.elem.addClass(d.plans[0].cssclass)}),d.initCreditPayment=function(b,c){a.isDefined(d.subscription.saveonebuy)||(d.subscription.saveonebuy=!!b),a.isDefined(d.subscription.autorecharge)||(d.subscription.autorecharge=!!c)},d.alertDefult=function(){if(h.selectedPlan)return!h.selectedPlan.xdays},d.alert3Days=function(){if(h.selectedPlan)return h.selectedPlan.xdays&&30!==h.selectedPlan.period},d.alert30Days=function(){if(h.selectedPlan)return h.selectedPlan.xdays&&30===h.selectedPlan.period},h.setModalScope(d),d.checkPlanSelected()}])}(angular),function(a){"use strict";a.module("Kinkee").controller("TermsOfUseController",["$scope","$modalInstance",function(a,b){a.close=function(){b.close()}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("signupValidator",["$inlineValidator","AccountModel",function(a,b){return{restrict:"AC",require:"ngModel",link:function(c,d,e,f){a(d,f,e.name,b[e.method])}}}]),a.module("Kinkee").directive("subscribeValidator",["$inlineValidator","SubscribeModel",function(a,b){return{restrict:"AC",require:"ngModel",link:function(c,d,e,f){a(d,f,e.name,b[e.method],"SubscribeValidator")}}}])}(angular),function(a){"use strict";var b=a.module("Kinkee"),c="$modalInstance modalData".split(" ");a.forEach(c,function(c){b.service(c,a.noop)}),b.directive("loginInjected",["$login","$url",function(b,c){return{restrict:"EA",replace:!0,controller:"LoginController",templateUrl:function(b,d){var e=a.isDefined(d.resendPassword)?"&resendPassword=true":"";return c.api("login/template/?inject=true"+e)},link:function(c,d){var e=d.data("config")||{},f=a.extend(b.modalDataDefault(),e);c.setModalData(f),b.injected=!0}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("plans",["$detection",function(b){return{restrict:"A",link:function(c,d){setTimeout(function(){if(!b.isMobile()){var e=d.find(".plan");e.each(function(b,c){c=a.element(c);var d=c.find(".plan-footer .btn-default");c.hover(function(){e.addClass("fade hover"),c.removeClass("fade hover"),d.text(d.attr("hover-text")).addClass("active")},function(){e.removeClass("fade hover"),d.text(d.attr("text")).removeClass("active")})}),c.$on("$destroy",function(){e.off("mouseenter mouseleave")})}})}}}])}(angular),function(a){"use strict";var b=a.module("Kinkee"),c="$modalInstance modalData langs".split(" "),d="";a.forEach(c,function(c){b.service(c,a.noop)}),b.directive("signupInjected",["$signup","$url","$templateCache","SignupModel",function(b,c,e,f){return{restrict:"EA",controller:"SignupController",templateUrl:function(a,e){return d=c.api(b.URL_PATH+"template/?inject=false"),e.templateSecondary&&(d+="&templateSecondary=true"),e.checkRecaptcha&&(d+="&recaptcha=true"),e.landingPage&&(d+="&landingPage=true"),e.module&&(d+="&module="+e.module),d},link:function(c,g,h){var i=g.data("config")||g.data()||{},j=a.extend(b.modalDataDefault(),i);a.isDefined(h.checkRecaptcha)&&e.remove(d),f.langs({module:h.module},function(a){c.setLangs(a)}),a.isDefined(h.applyModalData)&&!h.applyModalData.bool()||c.setModalData(j)}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("subscribeCarousel",function(){return{restrict:"C",controller:["$scope",function(b){b.setSlide=function(b,c){a.forEach(b,function(a){a.active=!1}),c.active=!0},b.setNexSlide=function(a,c){var d=a.indexOf(c);d++,d>=a.length&&(d=0),b.setSlide(a,a[d])},b.setPrevSlide=function(a,c){var d=a.indexOf(c);d--,d<0&&(d=a.length-1),b.setSlide(a,a[d])}}]}})}(angular),function(a){"use strict";a.module("Kinkee").directive("subscribeHref",["$subscribe",function(a){return{restrict:"AC",link:function(b,c){c.on("click",function(b){b.preventDefault();var d={params:c.data()};a.modal(d)})}}}])}(angular),function(a){"use strict";var b=a.module("Kinkee"),c="$modalInstance modalData plans testimonials".split(" ");a.forEach(c,function(c){b.service(c,a.noop)}),b.directive("subscribeInjected",["$subscribe","$url","$http","$timeout","SubscribeModel","$q","$auth","$templateRequest","$compile","CHECK_SESSION",function(b,c,d,e,f,g,h,i,j,k){return{restrict:"EA",controller:"SubscribeController",link:function(d,l,m){function n(b){return h.checkSession(b).then(function(b){a.isUndefined(b.template)?r.resolve():r.resolve(b)},function(){r.reject()}),r.promise}function o(){var g=c.customParams(b.URL_PATH,a.extend({inject:!0,modalClass:m.modalClass},b.params));i(g,{},!1,!0).then(function(c){l.append(j(c)(d)),f.plans(b.params).$promise.then(function(a){d.setPlans(a);var c=b.findCurrentPlan(a);b.setPlan(c)}),f.langs().$promise.then(function(a){d.setLangs(a)}),d.setModalData(q),a.isDefined(m.removeFixScreen)&&d.setRemoveFixScreen(m.removeFixScreen),e(function(){d.setElem(l.find(".sl-modal"))}),b.setParams(b.modalDefaults().params)})}var p=l.data("config")||{},q=a.extend(b.modalDataDefault(),p),r=g.defer();k?n(!0).then(function(){o()}):o()}}}])}(angular),function(a){"use strict";var b=a.module("Kinkee"),c="$modalInstance modalData plans testimonials".split(" ");a.forEach(c,function(c){b.service(c,a.noop)}),b.directive("subscribeInjectedToken",["$subscribe","$url","$http","$timeout","SubscribeModel","$lang","TokenModel",function(b,c,d,e,f,g,h){return{restrict:"EA",controller:"SubscribeController",templateUrl:c.base(b.URL_PATH+"/?inject=true&token=true"),link:function(c,d){var i=d.data("config")||{},j={windowClass:"sl-modal sl-subscription-modal sl-subscription-token",keyboard:!0,token:!0,backdrop:"static",onClose:a.noop,title:g("subscribe_token_title"),subtitle:g("subscribe_token_subtitle")},k=a.extend(b.modalDataDefault(),j,i),l={};l=a.extend({token:!0},b.params),f.plans(l).$promise.then(function(a){c.setPlans(a)}),h.langs().$promise.then(function(a){c.setLangs(a)}),k.params=l,c.setModalData(k),b.setParams(l),e(function(){c.setElem(d.find(".sl-modal"))})}}}])}(angular),function(a){"use strict";a.module("Kinkee").factory("AccountModel",["BaseModel","$url",function(a,b){return new a("account",{checkSession:{method:"GET",url:b.api("account/check-session")},checkSubscription:{method:"GET",url:b.api("account/check-subscription")},checkEmail:{method:"GET",url:b.api("account/check-email")},checkLogin:{method:"GET",url:b.api("account/check-login")},checkPassword:{method:"POST",url:b.api("account/check-password")},disablePromotion:{method:"POST",url:b.api("account/disable-promotion")},getAccount:{method:"GET",url:b.api("account/get-account")},activeTempSubscriber:{method:"POST",url:b.api("promotion/active-temp-subscriber")},activeAwardSubscription:{method:"POST",url:b.api("promotion/woman-month/award-subscription")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("LoginModel",["BaseModel","$url",function(a,b){return new a("login",{forgotPassword:{method:"POST",url:b.api("forgot-password")},changeEmail:{method:"POST",url:b.api("change-email")},changePassword:{method:"POST",url:b.api("change-password")},resendConfirmation:{method:"POST",url:b.api("resend-confirmation")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("SignupModel",["BaseModel",function(a){return new a("account/signup")}])}(angular),function(a){"use strict";a.module("Kinkee").factory("SubscribeOneClickModel",["BaseModel","$url",function(a,b){return new a("subscribe",{getCard:{method:"GET",url:b.base("subscribe/one-click")},sign:{method:"POST",url:b.base("subscribe/sign")},pagseguro:{method:"POST",url:b.base("subscribe/pag-seguro")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("SubscribeModel",["BaseModel","$url",function(b,c){return new b("subscribe",{close:{method:"GET",url:c.base("subscribe/close/:testab")},plans:{method:"GET",url:c.base("subscribe/plans"),transformResponse:function(b){return b&&(b=a.fromJson(b),a.forEach(b,function(b){a.isObject(b.xdays)&&(b.currency="",b.price={"int":b.xdays.title},b.benefits.unshift(b.xdays.link))})),b},isArray:!0},testimonials:{method:"GET",url:c.base("subscribe/testimonials"),isArray:!0},langs:{method:"GET",url:c.base("subscribe/langs"),isArray:!1},invoice:{method:"POST",url:c.base("subscribe/billet")},printInvoice:{method:"GET",url:c.base("subscribe/invoice/:id")},pagseguro:{method:"POST",url:c.base("subscribe/pag-seguro")},sign:{method:"POST",url:c.base("subscribe/sign")},checkCard:{method:"POST",url:c.base("subscribe/card/details")},checkSession:{method:"GET",url:c.base("subscribe/check-session")},pagseguroSession:{method:"GET",url:c.base("subscribe/pag-seguro/session")},pagseguroDebitOnline:{method:"POST",url:c.base("subscribe/pag-seguro/debit-online")},disabledNotification:{method:"POST",url:c.base("subscribe/close-expiration-range")},verotel:{method:"POST",url:c.base("subscribe/verotel")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("TokenModel",["BaseModel","$url",function(a,b){return new a("token",{langs:{method:"GET",url:b.base("subscribe/token/langs"),isArray:!1},getBalance:{method:"GET",url:b.api("token/balance")}})}])}(angular),function(a,b,c){"use strict";a.module("Kinkee").factory("$account",["$q","$timeout","$subscribe","$signup","$modalLoading","$auth",function(b,d,e,f,g,h){function i(b){return h.checkSession(b).then(function(b){a.isUndefined(b.template)?k.resolve():k.resolve(b)},function(){k.reject()}),k.promise}function j(b){if(a.isFunction(b.onClose)){var c=b.onClose;b.onClose=function(){m.close(),c()}}else b.onClose=m.close;return b}var k=b.defer(),l=!1,m={URL_PATH:"account/"};return m.modal=function(b,d){m.isOpen()&&!d||(b=b||{},b=j(b),i(!0).then(function(c){a.isUndefined(c)||(b.template=c.template),e.modal(b)},function(){f.modal(b)}),m.isOpen(!0)),m.isOpen()&&m.injected()&&c("html, body").animate({scrollTop:a.element("#divSubscribeTransactionInvoice").length?a.element("#divSubscribeTransactionInvoice").offset().top:0},500)},m.injected=function(){return f.$modalScope?f.$modalScope.injected:!!e.$modalScope&&e.$modalScope.injected},m.isOpen=function(b){return a.isUndefined(b)||(l=b),l},m.close=function(){m.isOpen(!1),g.restoreScroll()},c.fn.injectAccount=function(b){var g=c(this),h={};if(!m.injected())return g.each(function(){i(!0).then(function(){e.inject(g,b)},function(){f.inject(g,b)}),m.isOpen(!0)});var k=c(".sl-modal.injected"),l=k.parent().parent();return l.length&&l.attr("id")!==this.attr("id")&&a.isUndefined(f.$modalScope)?(l.empty(),b.onClose=function(){d(function(){e.setActiveTab(),e.getForm().$setPristine(),l.injectAccount(h)},500)},b=j(b),h=a.extend({},e.params,e.$modalScope.modal),void m.modal(b,!0)):void(k.length?c("html, body").animate({scrollTop:k.offset().top-50},500):(f.$modalScope&&(f.$modalScope.injected=!1),e.$modalScope&&(e.$modalScope.injected=!1),m.isOpen(!1),g.injectAccount(b)))},m}])}(angular,window,window.jQuery),function(a){"use strict";a.module("Kinkee").factory("$antiFraude",function(){var b={};return b.getCode=function(){return parseInt(a.element("#referenceCode").val())||0},b})}(angular),function(a){"use strict";var b={LOGIN:"login",PASSWORD:"forget-password",CONFIRM_PASSWORD:"confirm-forget-password"};a.module("Kinkee").factory("$login",["$lang","$modalLoading","$modal","$compile","$rootScope","LoginModel",function(c,d,e,f,g,h){var i={view:b.LOGIN},j={windowClass:"sl-modal login",size:"sm",keyboard:!0},k={onClose:a.noop,onSuccess:a.noop};return i.modal=function(b){return b=b||{},i.setParams(b.params),d.create(),i.goToLogin(),e.open(a.extend({templateUrl:h.templateUrl(),controller:"LoginController",resolve:{modalData:function(){return a.extend(k||{},b)},langs:function(){return{}}}},j))},i.inject=function(a,b){if(!a.jquery)throw new Error("É necessário informar o elemento onde o modal vai ser injetado.");f("<div login-injected />")(g.$new(),function(c){c.prependTo(a),c.data("config",b)}),i.setParams(b.params)},i.modalDataDefault=function(){return k},i.setModalScope=function(a){i.$modalScope=a},i.setParams=function(a){i.params=a||{}},i.goToLogin=function(){i.view=b.LOGIN},i.goToPassword=function(){i.view=b.PASSWORD},i.goToConfirmPassword=function(){i.view=b.CONFIRM_PASSWORD},i.isLogin=function(){return i.view===b.LOGIN},i.isPassword=function(){return i.view===b.PASSWORD},i.isConfirmPassword=function(){return i.view===b.CONFIRM_PASSWORD},i}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$signup",["$rootScope","$compile","$timeout","$modal","$window","$url","$modalLoading","$lang","SignupModel","$templateCache",function(b,c,d,e,f,g,h,i,j,k){
var l={URL_PATH:"account/signup/"},m={windowClass:"sl-modal signup",keyboard:!0,backdrop:"static"},n={onClose:a.noop};return l.modal=function(b){b=b||{},l.setParams(b.params),h.create();var c=e.open(a.extend({templateUrl:j.templateUrl(l.params),controller:"SignupController",resolve:{modalData:function(){return a.extend({},n,b)},langs:function(){return j.langs().$promise.then(function(a){return a})}}},m));return k.remove(j.templateUrl()),c},l.inject=function(a,d){if(!a.jquery)throw new Error("É necessário informar o elemento onde o modal vai ser injetado.");c("<div signup-injected />")(b.$new(),function(b){b.prependTo(a),b.data("config",d)}),l.setParams(d.params)},l.modalDataDefault=function(){return n},l.setModalScope=function(a){l.$modalScope=a},l.setParams=function(a){l.params=a||{},l.params.referrer=g.referrer()},l.openTerms=function(){e.open({templateUrl:g.api("landingpage/termsofuse"),windowClass:"sl-modal",controller:"TermsOfUseController",size:"lg"})},l}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$subscribeOneClick",["$q","$screen","$url","$timeout","$lang","$modalLoading","$modal","SubscribeModel","SubscribeOneClickModel","MODAL_TYPE",function(b,c,d,e,f,g,h,i,j,k){var l={URL_TEMPLATE:"subscribe/subscribe-one-click",controller:"SubscribeOneClickController",PAYMENTS:{CREDIT:"credit",PAGSEGURO:"pagseguro"},STATUS:{ERROR:-207,SUCCESS:"0000",SUCCESS_REDIRECT:"0000r",PAGSEGURO:"0000p"},type:k.TOKEN,selectedPlan:null},m={},n={windowClass:"sl-modal subscribe-one-click has-carousel",size:"sm",keyboard:!1,backdrop:"static"},o={hasCarousel:!0,size:"sm",title:"",subtitle:"",titleClass:"large primary text-center",headerClass:"",bodyClass:"no-padding",footerClass:"",onClose:a.noop,onSuccess:a.noop},p={activePayment:l.PAYMENTS.CREDIT};return l.modal=function(d){d=d||{},l.setModalParent(d);var f={params:a.extend({onebuy:!0},d.params)};return d.onSuccess&&a.extend(f,{onSuccess:d.onSuccess}),d.onClose&&a.extend(f,{onClose:d.onClose}),d.title&&a.extend(f,{title:d.title}),d.subtitle&&a.extend(f,{subtitle:d.subtitle}),d.type&&(l.type=d.type,a.extend(f,{windowClass:n.windowClass+" "+l.type})),l.setParams(f.params),g.create(),h.open(a.extend({templateUrl:l.getTemplateUrl(),controller:l.controller,resolve:{modalData:function(){return a.extend(a.copy(o)||{},f)},plans:function(){return i.plans(f.params).$promise.then(function(a){return a})},card:function(){return j.getCard({type:l.type}).$promise.then(function(a){return a})},screen:function(){var a=b.defer();return e(function(){return a.resolve(c)}),a.promise}}},n,f))},l.setModalParent=function(b){m=a.copy(b)},l.getModalParent=function(){return m},l.isCredit=function(){return p.activePayment===l.PAYMENTS.CREDIT},l.isPagseguro=function(){return p.activePayment===l.PAYMENTS.PAGSEGURO},l.setModalScope=function(a){l.$modalScope=a},l.getTemplateUrl=function(a){return d.customParams(a||d.api(l.URL_TEMPLATE),l.params)},l.setParams=function(a){l.params=a||{},l.params.referrer=d.referrer()},l.setPlan=function(a){l.selectedPlan=a,l.$modalScope.subscription.autorecharge=a.tokenrepurchase.enable},l.setPlanId=function(b){l.params=a.extend(l.params,{planid:b})},l.goTo=function(a){var b=l.$modalScope[a];b&&b.apply()},l.pagseguro=function(){p.activePayment=l.PAYMENTS.PAGSEGURO,l.saveProcess()},l.credit=function(){p.activePayment=l.PAYMENTS.CREDIT,l.saveProcess()},l.recoverSetting=function(){var b=l.getModalParent();return b.params=a.extend({action:l.params.action,planid:l.params.planid,token:l.params.token},b.params),b},l.saveProcess=function(){l.$modalScope.subscription.testeab=l.testab,l.$modalScope.process(f("subscribe_pleaseWait")).then(function(a){var b=l.recoverSetting();switch(a.returncode){case l.STATUS.ERROR:l.$modalScope.error(b);break;case l.STATUS.SUCCESS:l.$modalScope.success(b);break;case l.STATUS.PAGSEGURO:l.isPagseguro()&&l.$modalScope.pagseguro(b).then(function(){c.isMobile()&&(a.returnmessage=a.returnmessage.replace("pagseguro","m.pagseguro")),l.$modalScope.pagseguroUrl=a.returnmessage});break;case l.STATUS.SUCCESS_REDIRECT:d.redirect(a.returnmessage);break;default:l.$modalScope.fatalError(b).then(function(){l.$modalScope.subscribeErrorMessage=a.returnmessage})}})},l}])}(angular),function(a,b){"use strict";a.module("Kinkee").factory("$subscribe",["$q","$timeout","$url","$modal","$screen","$lang","$compile","$rootScope","$browser","$http","$document","$modalLoading","$auth","$signup","$subscribeOneClick","$interval","$scroll","$googleAnalytics","$antiFraude","SubscribeModel","TokenModel","CHECK_SESSION","MODAL_TYPE",function(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){function z(a,b){return C=c.defer(),o.checkSession(a,b).then(function(a){C.resolve(a)},function(){C.reject()}),C.promise}function A(b){var c={modalData:function(){return a.extend(a.copy(F)||{},b)},plans:function(){return v.plans(b.params).$promise.then(function(a){return G.plans=a,a})}};return a.extend(b.resolve||{},c)}function B(b,c){D.setPlan(D.findCurrentPlan(c)),a.isDefined(b.params)&&a.isDefined(b.params.payment)&&(D.showPayment(b.params.payment),D.setActivePayment(b.params.payment))}var C,D={URL_PATH:"subscribe",URL_PLANS:"subscribe/plans",URL_LANGS:"subscribe/langs",URL_TESTIMONIALS:"subscribe/testimonials",URL_PROCESS:"subscribe/billet",TABS:{PLANS:"plans",SUBSCRIBE:"subscribe",PAYMENT:"payment"},PAYMENTS:{CREDIT:"credit",DEBIT:"debit",INVOICE:"invoice",PAGSEGURO:"pagseguro",DEBITOONLINE:"debitonline",VEROTEL:"verotel"},CARDS:{VISA:"visa",MASTER:"mastercard",VISAELECTRON:"visaelectron"},BANKS:{bancodobrasil:"Banco do Brasil",banrisul:"Banrisul",bradesco:"Bradesco",hsbc:"HSBC",itau:"Itaú"},STATUS:{ERROR:-207,SUCCESS:"0000",SUCCESS_REDIRECT:"0000r",INVOICE:"0000i",PAGSEGURO:"0000p",POPPUP:"0000pp",VEROTEL:"0000v"},plans:{valid:!1},subscribe:{valid:!1},payment:{valid:!1},modalOpened:!1,$modalScope:{}},E={windowClass:"sl-modal sl-subscription-modal has-carousel",size:"lg",keyboard:!1,backdrop:"static",params:{showcredit:!0,showdebit:!0,showdebitonline:!0,showinvoice:!0,showverotel:!0}},F={hasCarousel:!1,size:"lg",title:h("subscribe_title"),subtitle:h("subscribe_subtitle"),titleClass:"large primary text-center",headerClass:"",bodyClass:"no-padding",footerClass:"",onClose:a.noop,onSuccess:a.noop},G={activeTab:D.TABS.PLANS,activePayment:D.PAYMENTS.CREDIT,showAllCards:!1,plans:null},H=null,I=null,J=null;return D.modal=function(b,e){var h={},i={};e=!!a.isDefined(e)&&e,b=b||{},b.params&&(b.params.preventOneBuy&&a.extend(i,{preventOneBuy:b.params.preventOneBuy}),b.params.action&&a.extend(i,{action:b.params.action}),b.params.planid&&a.extend(i,{planid:b.params.planid}));var j=a.extend({},E.params,b.params||{});if(D.setParams(j),a.isDefined(b.template)){if(b.params.template=b.template,h=a.extend(E,{templateUrl:D.getTemplateUrl(),controller:"SubscribeController",windowClass:"sl-modal sl-subscription-modal "+(b.windowClass||"sucesso"),size:b.size||"",resolve:A(b)}),!x||h.token||e)return n.create(),f.open(h).opened.then(function(){B(b,G.plans)});z(!0,i).then(function(c){var d=!(!c||!c.hasOwnProperty("oneclick"))&&c.oneclick;return a.isDefined(c.template)&&(b.params.template=b.template=c.template,a.extend(h,{resolve:A(b)})),d?(h=a.extend(h,{type:y.SUBSCRIPTION}),q.modal(h)):(n.create(),f.open(h).opened.then(function(){B(b,G.plans)}))})}return b.resolve={testimonials:function(){return D.isTokenModal()?{}:v.testimonials().$promise.then(function(a){return a})},screen:function(){var a=c.defer();return d(function(){return a.resolve(g)}),a.promise},langs:function(){return D.isTokenModal()?w.langs().$promise.then(function(a){return a}):v.langs().$promise.then(function(a){return a})}},D.modalOpened=!0,h=a.extend({templateUrl:D.getTemplateUrl(),controller:"SubscribeController",resolve:A(b)},E,b),!x||h.token||e?(n.create(),f.open(h).opened.then(function(){B(b,G.plans)})):void z(!0,i).then(function(c){var d=!(!c||!c.hasOwnProperty("oneclick"))&&c.oneclick;return a.isDefined(c.template)&&(b.params.template=b.template=c.template,a.extend(h,{resolve:A(b)},b)),d?(h=a.extend(h,{type:y.SUBSCRIPTION}),q.modal(h)):(n.create(),f.open(h).opened.then(function(){B(b,G.plans)}))})},D.inject=function(a,b){if(!a.jquery)throw new Error("É necessário informar o elemento onde o modal vai ser injetado.");D.setParams(b.params),i("<div subscribe-injected />")(j.$new(),function(c){c.prependTo(a),c.data("config",b)})},D.isTokenModal=function(){if(D.params)return D.params.token},D.setPlan=function(a){a&&(D.selectedPlan=a,o.isLogged()?D.setActiveTab(D.TABS.PAYMENT):D.setActiveTab(D.TABS.SUBSCRIBE),g.isSmallScreen()&&(D.showJustCredit()||D.setActivePayment(null)),D.isXDays()?D.setActivePayment(D.PAYMENTS.CREDIT):D.selectedPlan.showverotel&&D.setActivePayment(D.PAYMENTS.VEROTEL),D.plans.valid=!0,D.$modalScope.subscription.planid=a.id,D.$modalScope.subscription.autorecharge=a.tokenrepurchase.enable,D.$modalScope.setPlots(),s.to(0,0,".modal"))},D.clearPlan=function(){D.setActiveTab(D.TABS.PLANS),D.selectedPlan=null,D.plans.valid=!1},D.clearPayment=function(){D.setActiveTab(D.TABS.PAYMENT),G.activePayment=null},D.clear=function(){D.clearPlan(),D.clearPayment()},D.setActiveTab=function(a){D.selectedPlan&&(G.activeTab=a||D.TABS.PLANS)},D.isActiveTab=function(a){return G.activeTab===a},D.changeTabs=function(a,b){var c=D[a].valid;c&&D.setActiveTab(b)},D.setActivePayment=function(b){G.activePayment=b;var c=D.$modalScope.subscription.flag;a.isDefined(c)&&(D.isDebit()&&(c===D.CARDS.VISA&&(c=D.CARDS.VISAELECTRON),c===D.CARDS.MASTER&&(c=D.CARDS.MAESTRO)),D.isCredit()&&(c===D.CARDS.VISAELECTRON&&(c=D.CARDS.VISA),c===D.CARDS.MAESTRO&&(c=D.CARDS.MASTER)),D.$modalScope.subscription.flag=c)},D.modalDefaults=function(){return E},D.modalDataDefault=function(){return F},D.isPlans=function(){return G.activeTab===D.TABS.PLANS},D.isSubscribe=function(){return G.activeTab===D.TABS.SUBSCRIBE},D.isPayment=function(){return G.activeTab===D.TABS.PAYMENT},D.isCredit=function(){return G.activePayment===D.PAYMENTS.CREDIT},D.isVerotel=function(){return G.activePayment===D.PAYMENTS.VEROTEL},D.isDebit=function(){return G.activePayment===D.PAYMENTS.DEBIT},D.isInvoice=function(){return G.activePayment===D.PAYMENTS.INVOICE},D.isPagseguro=function(){return G.activePayment===D.PAYMENTS.PAGSEGURO},D.isDebitOnline=function(){var b=G.activePayment===D.PAYMENTS.DEBITOONLINE;return b&&a.isUndefined(G.PagSeguroSessionId)&&(j.$subscribe.waiting=!0,G.PagSeguroSessionId="0",D.$modalScope.createScriptPagSeguro(m[0],D.$modalScope.urlPagSeguro,function(){D.pagSeguroSession()})),b},D.isExterior=function(){return D.$modalScope.isExterior},D.isAvailableDebitOnline=function(b){if(!a.isUndefined(j.$subscribe.pagseguroDebitAvailable))switch(b){case"bancodobrasil":return"AVAILABLE"===j.$subscribe.pagseguroDebitAvailable.BANCO_BRASIL.status;case"banrisul":return"AVAILABLE"===j.$subscribe.pagseguroDebitAvailable.BANRISUL.status;case"bradesco":return"AVAILABLE"===j.$subscribe.pagseguroDebitAvailable.BRADESCO.status;case"hsbc":return"AVAILABLE"===j.$subscribe.pagseguroDebitAvailable.HSBC.status;case"itau":return"AVAILABLE"===j.$subscribe.pagseguroDebitAvailable.ITAU.status;default:return!1}return!1},D.pagSeguroSession=function(){D.isDebitOnline()&&(j.$subscribe.waiting=!0,v.pagseguroSession().$promise.then(function(a){G.PagSeguroSessionId=a.session,PagSeguroDirectPayment.setSessionId(a.session),PagSeguroDirectPayment.getPaymentMethods({success:function(a){a.error||(j.$subscribe.pagseguroDebitAvailable=a.paymentMethods.ONLINE_DEBIT.options),j.$subscribe.waiting=!1,j.$apply()},error:function(){j.$subscribe.waiting=!1}})}))},D.hasPayment=function(){return G.activePayment},D.hasSelectedPlan=function(){return D.selectedPlan},D.isXDays=function(){if(D.hasSelectedPlan())return a.isDefined(D.selectedPlan.xdays)},D.isGift=function(){if(D.params)return a.isDefined(D.params.to)},D.showDebit=function(){if(D.hasSelectedPlan())return!D.isXDays()&&D.selectedPlan.showdebit&&D.params.showdebit},D.showCredit=function(){if(D.hasSelectedPlan())return D.selectedPlan.showcredit&&D.params.showcredit},D.showDebitOnline=function(){if(D.hasSelectedPlan())return!D.isXDays()&&D.selectedPlan.showdebitonline&&D.params.showdebitonline},D.showVerotel=function(){if(D.hasSelectedPlan())return!D.isXDays()&&D.selectedPlan.showverotel&&D.params.showverotel},D.showInvoice=function(){if(D.hasSelectedPlan())return!D.isXDays()&&D.selectedPlan.showinvoice&&D.params.showinvoice},D.showPayment=function(a){if(!a)throw"Argumento é obrigatório";switch(a){case D.PAYMENTS.DEBIT:D.selectedPlan.showdebit=D.params.showdebit=!0;break;case D.PAYMENTS.DEBITOONLINE:D.selectedPlan.showdebitonline=D.params.showdebitonline=!0;break;case D.PAYMENTS.DEBITOONLINE:D.selectedPlan.showdebitonline=D.params.showdebitonline=!0;break;case D.PAYMENTS.INVOICE:D.selectedPlan.showinvoice=D.params.showinvoice=!0}},D.showJustCredit=function(){return!(D.showDebit()||D.showInvoice()||D.showDebitOnline())},D.showAllCards=function(a){return a?(G.showAllCards=!0,!0):G.showAllCards},D.setModalScope=function(a){D.$modalScope=a,D.clearPlan(),D.clearPayment(),D.setActivePayment(D.PAYMENTS.CREDIT)},D.getForm=function(){if(!D.isPagseguro()&&!D.isVerotel())return D.isDebit()?D.$modalScope.subscribeFormDebit:D.isCredit()?D.$modalScope.subscribeFormCredit:D.isDebitOnline()?D.$modalScope.subscribeFormDebitOnline:D.isInvoice()?D.$modalScope.subscribeFormInvoice:void 0},D.save=function(){var b=c.defer();D.isVerotel()&&(H=k.ie()?window.open("","","width="+screen.width/2+",height="+screen.height/2):window.open("","Verotel","width="+screen.width/2+",height="+screen.height/2));var d=D.getForm();if(a.isUndefined(d))return D.isDebitOnline()&&D.openPopup("Débito - PagSeguro"),D.saveProcess()["finally"](function(){b.resolve()});if(d.$submited=!0,!d.$pristine&&!d.$invalid||D.retry)D.isDebitOnline()&&D.openPopup("Débito - PagSeguro"),D.saveProcess()["finally"](function(){b.resolve()});else{d.$pristine=!1,d.$dirty=!0,a.forEach(d.$error,function(b){a.forEach(b,function(a){a.$error&&a.$inlineValidator&&(a.$pristine=!1,a.$dirty=!0,a.$inlineValidator.offlineValidation())})});for(var e in d){var f=d[e];f.$error&&f.$inlineValidator&&(f.$pristine=!1,f.$dirty=!0,f.$inlineValidator.offlineValidation())}b.reject()}return b.promise},D.saveProcess=function(){D.saving=!0;var a=p.user;return a?(a.lpSignUpSubscribe=!0,void D.$modalScope.saveSignup(a,h("subscribe_pleaseWait")).then(function(){D.saveSubscribe()})):D.saveSubscribe()},D.saveSubscribe=function(){var a=c.defer();return D.$modalScope.subscription.testeab=D.testab,D.$modalScope.subscription.referenceCode=u.getCode(),D.$modalScope.process(h("subscribe_pleaseWait")).then(function(b){var c={category:"Compra - Sucesso",action:D.isTokenModal()?"Token":"Assinatura",label:D.selectedPlan?D.selectedPlan.name:"Minha Conta - Troca de cartão",value:D.selectedPlan?parseFloat(D.selectedPlan.totalprice.replace(D.selectedPlan.currency,"")):""};switch(D.saving=!1,b.returncode){case D.STATUS.ERROR:c.category="Compra - Erro",t.trackEvent(c),D.$modalScope.error(),(D.isDebitOnline()||D.isVerotel())&&(I&&(r.cancel(I),I=null),r.cancel(J),H.close(),D.pagSeguroSession()),a.reject();break;case D.STATUS.INVOICE:c.category="Compra - Boleto",t.trackEvent(c),D.isInvoice()&&(D.$modalScope.invoice().then(function(){D.$modalScope.invoiceId=b.result,D.$modalScope.boletoUrl=e.base("subscribe/invoice/"+b.result)}),a.resolve());break;case D.STATUS.VEROTEL:D.isVerotel()&&(c.category="Compra - Verotel",t.trackEvent(c),H.location=b.returnmessage,D.isTokenModal()?e.redirect(e.base(D.$modalScope.langs.link_myaccount_credits)):e.redirect(D.$modalScope.langs.link_account_subscription),a.resolve());break;case D.STATUS.PAGSEGURO:D.isPagseguro()&&(c.category="Compra - Pagseguro",t.trackEvent(c),D.params.template="pagseguro",D.$modalScope.pagseguro().then(function(){g.isMobile()&&(b.returnmessage=b.returnmessage.replace("pagseguro","m.pagseguro")),D.$modalScope.pagseguroUrl=b.returnmessage,a.resolve()}));break;case D.STATUS.POPPUP:c.category="Compra - Débito Online Pagseguro",t.trackEvent(c),H.location=b.returnmessage,a.resolve();break;case D.STATUS.SUCCESS:t.trackEvent(c),D.$modalScope.success(),a.resolve();break;case D.STATUS.SUCCESS_REDIRECT:t.trackEvent(c),e.redirect(b.returnmessage),D.saving=!1,a.resolve();break;default:D.$modalScope.fatalError().then(function(){c.category="Compra - Erro Fatal",t.trackEvent(c),D.isDebitOnline()&&(r.cancel(J),H.close(),D.pagSeguroSession()),D.$modalScope.subscribeErrorMessage=b.returnmessage}),a.reject()}}),a.promise},D.printInvoice=function(){a.isDefined(D.$modalScope.invoiceId)&&(H=k.ie()?window.open("","","width=1,height=1"):k.chrome()?window.open("","Boleto","width="+screen.width+",height="+screen.height):window.open("","Boleto","width=1,height=1"),l.get(e.base("subscribe/invoice/"+D.$modalScope.invoiceId)).then(function(a){var c=b(H.document.body);c.html(a.data),window.print&&(H.print(),H.close())}))},D.openPopup=function(a){H=k.ie()?window.open("","","width="+screen.width/2+",height="+screen.height/2):window.open("",a,"width="+screen.width/2+",height="+screen.height/2),J=r(function(){H.closed&&(D.$modalScope.$modalInstance.close(),r.cancel(J))},1e3),D.isTokenModal()||(I=r(function(){try{(null===H||H.openedWindowclosed)&&(r.cancel(I),I=null,e.redirect(D.$modalScope.langs.link_account_subscription))}catch(a){}},1e3))},D.goTo=function(a,b){var c=D.$modalScope[a];c&&c.call(D,b)},D.pagseguro=function(){D.setActivePayment(D.PAYMENTS.PAGSEGURO),D.save()},D.getTemplateUrl=function(a){return e.customParams(a||e.base(D.URL_PATH),D.params)},D.setParams=function(a){D.params=a||{},D.params.referrer=e.referrer()},D.findCurrentPlan=function(a){var b=a.filter(function(a){return a.selectedPlan});return b[0]},D}])}(angular,jQuery),function(a){"use strict";a.module("Kinkee").factory("$token",["$modal","$lang","$subscribe","$signup","$subscribeOneClick","SubscribeModel","TokenModel","MODAL_TYPE",function(b,c,d,e,f,g,h,i){function j(a){return g.checkSession({token:!0,preventOneBuy:a})}var k={balance:null,balanceformat:null},l={windowClass:"sl-modal sl-subscription-modal sl-subscription-token",keyboard:!0,backdrop:"static",token:!0,onClose:a.noop,title:c("subscribe_token_title"),subtitle:c("subscribe_token_subtitle")};return k.modal=function(b){b=b||{},b.params=a.extend({token:!0,preventOneBuy:null},b.params);var c=a.extend({params:b.params},l,b);return j(b.params.preventOneBuy).$promise.then(function(b){var e=!(!b||!b.hasOwnProperty("oneclick"))&&b.oneclick;if(a.isFunction(c.onSuccess))var g=a.copy(c.onSuccess);return c.onSuccess=function(){k.updateBalance(),a.isFunction(g)&&(e?g.call(f,f.$modalScope):g.call(d,d.$modalScope))},e?(c=a.extend(c,{type:i.TOKEN}),f.modal(c)):d.modal(c)},function(){e.modal(b)})},k.setBalance=function(b){a.isDefined(b)&&(k.balance=b)},k.getBalance=function(){return k.balance},k.setBalanceFormat=function(b){a.isDefined(b)&&(k.balanceformat=b)},k.getBalanceFormat=function(){return k.balanceformat},k.updateBalance=function(){h.getBalance({},function(a){k.setBalance(a.balance),k.setBalanceFormat(a.balanceformat)})},k}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$carousel",function(){return function(b){return a.element(b).scope()||a.element(b)}})}(angular),function(a){"use strict";a.module("Kinkee").controller("CropController",["$scope",function(a){a.busy=!1,a.format="free"}])}(angular),function(a,b){"use strict";a.module("Kinkee").directive("slCrop",["$share","$crop","$rootScope",function(c,d,e){return{restrict:"A",require:"ngModel",scope:!0,link:function(f,g,h,i){function j(){var c,e,f,h,i=d.getImage(),j=d.getImageDimensions(),l=g.find(".previewCrop"),m=d.getLastCrop();e=a.element("<canvas></canvas>").attr("width",m.w||j.width).attr("height",m.h||j.height),f=e.get(0).getContext("2d"),c=i.get(0),f.drawImage(c,0,0),h=b.URL||b.webkitURL,b.loadImage(e.get(0).toDataURL("image/png"),function(a){l.append(a),setTimeout(function(){d.jCrop&&d.jCrop.destroy(),l.find("img").Jcrop({bgOpacity:.6,minSize:[150,150],onChange:function(a){k=a},onSelect:function(a){k=a}},function(){d.jCrop=this,this.animateTo([0,0,99999,99999])})})},{maxWidth:636,maxHeight:585})}var k={x:0,y:0,w:0,h:0};j(),f.free=function(){d.jCrop.setOptions({aspectRatio:0}),d.jCrop.animateTo([99999,999999,0,0]),i.$setViewValue("free")},f.landscape=function(){d.jCrop.animateTo([9999999,999999,0,0]),d.jCrop.setOptions({aspectRatio:4/3}),i.$setViewValue("landscape")},f.portrait=function(){d.jCrop.animateTo([999999,999999,0,0]),d.jCrop.setOptions({aspectRatio:.75}),i.$setViewValue("portrait")},f.square=function(){d.jCrop.setOptions({aspectRatio:1}),d.jCrop.animateTo([99999,99999,0,0]),i.$setViewValue("square")},f.crop=function(){var f,i,j,l,m,n,o,p=a.element(h.container),q=d.getImage(),r=d.getLastCrop(),s=d.getImageOriginalDimensions();f=(r.w||s.width)/g.find(".previewCrop img").width(),i=Math.floor(k.x*f),j=Math.floor(k.y*f),l=Math.floor(k.w*f),m=Math.floor(k.h*f),i+l>s.width&&(l-=i+l-s.width),j+m>s.height&&(m-=j+m-s.height);var t={x:i+r.x,y:j+r.y,w:l,h:m};d.setLastCrop(t),c.setImageDimensions({width:t.w,height:t.h}),n=a.element("<canvas></canvas>"),n.attr("width",l),n.attr("height",m),o=n.get(0).getContext("2d"),o.drawImage(q.get(0),i,j,l,m,0,0,l,m),b.loadImage(n.get(0).toDataURL("image/png"),function(b){p.empty().append(b),c.setImage(a.element(b)),d.hasCrop=!0,e.$broadcast("$positionateWatermark"),d.close()},{maxWidth:475,maxHeight:385})},f.close=function(){d.close()}}}}])}(angular,window),function(a){"use strict";a.module("Kinkee").factory("$crop",["$url","$modalLoading","$modal",function(b,c,d){var e=null,f={},g={},h={x:0,y:0,w:0,h:0},i={hasCrop:!1,jCrop:null,modalInstance:null},j={windowClass:"sl-modal sl-crop"};return i.modal=function(e){e=e||{},c.create();var f=a.extend(j,{templateUrl:b.api("share/modal-crop-template"),controller:"CropController",backdrop:"static"});return i.modalInstance=d.open(f),i.modalInstance},i.close=function(){i.modalInstance.close()},i.getLastCrop=function(){return h},i.setLastCrop=function(a){h=a},i.setImage=function(a){e=a},i.getImage=function(){return e},i.setImageDimensions=function(a){f.width=a.width,f.height=a.height},i.getImageDimensions=function(){return f},i.setImageOriginalDimensions=function(a){g.width=a.width,g.height=a.height},i.getImageOriginalDimensions=function(){return g},i.clean=function(){f=g={},e=i.hasCrop=i.jCrop=null,h={x:0,y:0,w:0,h:0}},i}])}(angular),function(a){"use strict";a.module("Kinkee").factory("ExploreModel",["BaseModel","$url",function(a,b){return new a("explore",{Filter:{method:"POST",url:b.api("explore/filter")},topKinkee:{method:"GET",url:b.api("explore/topKinkee")},GetState:{method:"POST",url:b.api("states/:id")},saveFeatured:{method:"POST",url:b.api("featured/save-featured-online")},getOnlineFeatured:{method:"GET",url:b.api("explore/get-online-featured"),isArray:!0},getFeatured:{method:"GET",url:b.api("explore/get-featured")},closePromote:{method:"POST",url:b.api("explore/close-banner")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$featured",["$modal","$modalLoading","$url",function(b,c,d){var e={};return e.openModal=function(){c.create();var e=["sl-modal","sl-featured","modal-highlight"],f={},g={};f=b.open({templateUrl:d.api("explore/featured-modal"),windowClass:e.length?e.join(" "):"",size:"sm",controller:["$scope","$token","TokenModel","$rootScope","$campaign","ExploreModel",function(b,c,d,e,h,i){b.templateCountdown='<span class="countdown-section"><span class="countdown-amount">{hnn}</span>:<span class="countdown-amount">{mnn}</span>:<span class="countdown-amount">{snn}</span></span></span>',b.loadingAvatar=!1,b.loading=!1,b.error=!1,b.errorMessage=null,b.onlines=[],b.init=function(){b.loading=!0,i.getFeatured().$promise.then(function(c){b.loading=!1,g=a.extend(c),g.hasManDayPromotion&&f.elem.addClass("has-man-day-promotion"),(!g.subscribe||g.subscribe&&!g.free.seconds||g.cancelFreeSubscribe)&&(b.loadingAvatar=!0,i.getOnlineFeatured().$promise.then(function(a){b.onlines=a,b.loadingAvatar=!1},function(){b.loadingAvatar=!1})),b.featured=g},function(){b.loading=!1})},b.updateBalance=function(d){a.isDefined(d.balance)&&(g.balance=d.balance),b.featured=g,c.setBalance(d.balance),c.setBalanceFormat(d.balanceformat)},b.saveFeatured=function(c){i.saveFeatured({free:c}).$promise.then(function(){i.getFeatured().$promise.then(function(c){a.isDefined(c)&&(g=a.extend(c),b.featured=g,e.$broadcast("featured",g)),f.close()},function(){f.close()}),d.getBalance({},function(a){b.updateBalance(a)})},function(a){a.data.validationMessage&&(b.errorMessage=a.data.validationMessage,b.error=!0)})},b.buyTokens=function(a){c.modal({params:{action:b.featured.subscribe?"FEATURED-SUBSCRIBER":"FEATURED"},onSuccess:function(c){d.getBalance({},function(c){b.updateBalance(c),a&&b.saveFeatured(!1)}),c.$modalInstance.close()}})},b.setFeaturedSubscribe=function(a){a=a||!1,g.subscribe&&(g.free.seconds>0&&g.free.seconds<=g.validate.timeFree||g.cancelFreeSubscribe?g.balance<g.validate.cost&&!a?b.buyTokens(!0):b.saveFeatured(!1):b.saveFeatured(!0))},b.setFeatured=function(){g.subscribe||(g.balance<g.validate.cost?b.buyTokens(!0):b.saveFeatured(!1))},b.close=function(){f.close()}}],keyboard:!1})},e}])}(angular),function(a,b){"use strict";a.module("Kinkee").controller("ListController",["$scope","$friendList","$debounce","$timeout","lang","FriendListModel",function(c,d,e,f,g,h){function i(){return c.listSelected.map(function(a){return a.accountid})}c.$list=d,c.editingName=!0,c.friends=[],c.listFriends=[],c.listSelected=[],c.selectedCount=0,c.query={tipo:d.FIND_TYPE.LOGIN,busca:"",pagina:0,listid:0},c.toggle=function(a){var b;c.listSelected.forEach(function(c){c.accountid===a.accountid&&(b=c)}),b?c.listSelected.splice(c.listSelected.indexOf(b),1):c.listSelected.push(a),c.showSelected&&(c.showSelected=!!c.listSelected.length)},c.init=function(){c.busy=!0,h.search(c.query).$promise.then(function(a){c.listFriends=c.listFriends.concat(a.accounts),c.busy=!1,c.query.pagina++,c.noData=!c.listFriends.length,c.stop=a.accounts.length<24,c.query.listid&&(c.listSelected=a.listSelected,c.name=a.name)})},c.search=function(){c.busy=!0,c.query.pagina=0,c.showSelected=!1,h.search(c.query).$promise.then(function(a){c.listFriends=a.accounts,c.query.pagina++,c.noData=!c.listFriends.length,c.stop=a.accounts.length<24,c.busy=!1})},c.infiniteScroll=function(){c.busy||c.stop||c.showSelected||(c.busy=!0,h.search(c.query).$promise.then(function(a){c.listFriends=c.listFriends.concat(a.accounts),c.busy=!1,c.query.pagina++,c.noData=!c.listFriends.length,c.stop=a.accounts.length<24}))},c.getLocations=function(a){return c.busy=!0,c.query.pagina=0,h.locations({term:a}).$promise.then(function(a){return c.busy=!1,a},function(){return c.busy=!1,[]})},c.onSelect=function(a){c.query.busca=a,c.search()},c.formatSelection=function(b){if(b)return a.isString(b)?b:b.city||b.state||b.country},c.clearSearch=function(){c.query.busca=c.query.tipo===d.FIND_TYPE.GENDER?0:"",c.search()},c.selectFriend=function(a){var b=c.listSelected.filter(function(b){return b.accountid===a.accountid});return b.length},c.blurLocation=function(){c.term||(c.query.busca="",c.search())},c.toggleShowSelected=function(){c.showSelected=!c.showSelected},c.create=function(){if(!c.name)return void b.lib.message.showErrorMessage(g.listErrorEmptyname);if(!c.listSelected.length)return void b.lib.message.showErrorMessage(g.listErrorSelectfriends);var e={accounts:i()};if(c.saving=g.panelSaving,!d.newList)return e.accounts;var f=c.query.listid?"update":"create";e.name=c.name,e.listid=c.query.listid,h[f](e).$promise.then(function(b){return c.query.listid=b.listid,a.isFunction(d.onSave)?void d.onSave(c):void c.close()})},c.changeGender=function(){c.query.pagina=0,c.search()},c.verifyName=function(){c.editingName=!1,c.name&&h.verify({name:c.name}).$promise.then(function(){c.invalidName=!1},function(){c.invalidName=!0,b.lib.message.showErrorMessage(g.listErrorNameunavaiable)})},c.enterName=function(a){13===a.which&&(c.editingName=!1)},c.editName=function(){c.editingName=!0,f(function(){a.element(".list-name").focus()},50)},c.validate=function(){return c.busy||c.saving||c.invalidName},c.close=function(){d.closeModal()},c.typeSearch=e(c.search,200)}])}(angular,window),function(a){"use strict";a.module("Kinkee").factory("FriendListModel",["BaseModel","$url",function(a,b){return new a("list",{search:{method:"POST",url:b.api("list/search")},locations:{method:"GET",isArray:!0,cache:!0,url:b.base("search/find"),params:{type:"raw",resulttype:"location"}},create:{method:"POST",url:b.api("list/create")},update:{method:"POST",url:b.api("list/update")},verify:{method:"GET",url:b.api("list/verify")},lang:{method:"GET",url:b.api("list/lang")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$friendList",["$url","$modal","$modalLoading","FriendListModel",function(b,c,d,e){var f={modalInstance:null,newList:!1,onSave:a.noop,FIND_TYPE:{LOGIN:"login",LOCATION:"locality",GENDER:"gender"}},g={windowClass:"sl-modal sl-list"};return f.modal=function(d){f.newList=!!d;var h=a.extend(g,{templateUrl:b.api("list/template"),controller:"ListController",resolve:{lang:function(){return e.lang().$promise.then(function(a){return a})}}});return f.modalInstance=c.open(h),f.modalInstance},f.closeModal=function(){f.modalInstance.close()},f}])}(angular),function(a){"use strict";a.module("Kinkee").controller("MessagesController",["$scope","$timeout","$subscribe","$modalInstance","$messages","modalData","MessagesModel","AccountModel",function(b,c,d,e,f,g,h,i){b.modal=g,i.getAccount({},function(a){b.isSubscribe=a.subscriber,b.gender=a.genderid}),b.langs={title:"",subtitle:"",subtitlenologin:"",titlesend:"",subtitlesend:""},b.newMessage=new h({toid:null,tologin:null,message:null,"private":!0}),b.getAccounts=function(a){return h.autocomplete({term:a}).$promise.then(function(a){return a},function(){return b.newMessage.toid=null,[]})},b.setLangs=function(a){b.langs=a},b.onPrivate=function(){if(!b.isSubscribe&&(b.isSubscribe||null!==b.gender&&"1"!==b.gender)){b.newMessage.tologin?b.langs.subtitle=b.langs.subtitle.replace("{0}",b.newMessage.tologin):b.langs.subtitle=b.langs.subtitlenologin;var a={title:b.langs.title,subtitle:b.langs.subtitle,params:{action:"SEND_MESSAGE_PRIVATE"},onSuccess:function(){b.newMessage["private"]=!0,b.isSubscribe=!0},onClose:function(){b.newMessage["private"]=b.isSubscribe}};d.modal(a)}},b.onSelect=function(a){b.newMessage.toid=a.accountid},b.send=function(){if(b.isSubscribe||null!==b.gender&&"1"!==b.gender)b.busy=b.langs.sending,h.save(b.newMessage,function(a){b.sent={success:!0,message:a.validationMessage},c(function(){b.close()},2e3)},function(a){b.busy=!1,b.sent={error:!0,message:a.data.validationMessage}});else{var a={title:b.langs.titlesend,subtitle:b.langs.subtitlesend,params:{action:"SEND_MESSAGE_MAN"},onSuccess:function(){b.isSubscribe=!0}};d.modal(a)}},b.close=function(){a.isFunction(b.modal.onClose)&&b.modal.onClose.call(d,b),e.close()},f.fixModalBackdrop()}])}(angular),function(a){"use strict";a.module("Kinkee").factory("MessagesModel",["BaseModel","$url",function(a,b){return new a("message",{autocomplete:{method:"GET",isArray:!0,cache:!0,url:b.api("message/autocomplete")},closewarningprivate:{method:"GET",url:b.api("message/close-warning-private")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$messages",["$modal","$modalLoading","$detection","$url","$window","$timeout","MessagesModel",function(b,c,d,e,f,g,h){var i={},j={windowClass:"sl-modal send-message"},k=null;return i.modal=function(f){c.create();var g=f?f.params:{};return k=b.open(a.extend({templateUrl:h.templateUrl(g),controller:"MessagesController",resolve:{modalData:function(){return a.extend({onClose:function(){d.isAndroid()&&e.path().indexOf("painel/mensagens")!==-1&&e.reload()}},f)}}},j))},i.fixModalBackdrop=function(){return g(function(){var a=k.elem,b=a.prev();a&&b&&a.insertBefore(b)},500)},f.NewMessage=function(a){i.modal(a)},i}])}(angular),function(a){"use strict";var b=a.module("Kinkee");b.directive("slMetrics",["$http","$url",function(a,b){
return{restrict:"A",scope:!0,link:function(c,d,e){var f=e.mtEvent||"click",g=e.mtKey||e.boAttrMtKey,h=e.mtValue||!0,i=b.base("service/set-mnemonic");d.on(f,function(){g&&a.post(i,{mnemonic:g,value:h})})}}}])}(angular),function(a){"use strict";a.module("Kinkee").controller("NewsletterController",["$scope","$newsletter","$q","NewsletterModel",function(a,b,c,d){a.newsletter={},a.newEmail={},a.init=function(){a.initLoading=!0,d.getSettings(function(b){a.newsletter.emailnews=b.emailnews?"true":"false",a.newsletter.emailsys=b.emailsys?"true":"false",a.oldEmail=b.email,a.initLoading=!1})},a.toggleCheck=function(b){a.loading||(a.newsletter[b]=a.newsletter[b].bool()?"false":"true")},a.replaceEmail=function(b){return b.replace("{0}",a.newEmail.email)},a.save=function(){a.emailError="",a.loading=!0,a.newEmail.email&&a.oldEmail!==a.newEmail.email?d.saveEmail(a.newEmail).$promise.then(function(){d.saveReceivingEmail(a.newsletter).$promise.then(function(){a.loadTemplate()})},function(b){a.loading=!1,a.emailError=b.data.validationMessage}):d.saveReceivingEmail(a.newsletter).$promise.then(function(){a.close()})},a.close=function(){b.close()}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("slNewsletterReady",["$newsletter",function(a){return{restrict:"A",link:function(){a.modal()}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("slNewsletter",["$templateRequest","$compile",function(a,b){return{restrict:"A",link:function(c,d){c.loadTemplate=function(){a("template/modal/modal-newsletter/modal-newsletter-confirm",{},!0).then(function(a){d.parents(".sl-newsletter").addClass("confirm"),d.empty().append(b(a)(c))})}}}}])}(angular),function(a){"use strict";a.module("Kinkee").factory("NewsletterModel",["BaseModel","$url",function(a,b){return new a("message",{saveReceivingEmail:{method:"POST",url:b.api("my-account/save-receiving-email")},saveEmail:{method:"POST",url:b.api("my-account/add-email/force-main")},getSettings:{method:"GET",url:b.api("my-account/email-settings"),cache:!0}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$newsletter",["$url","$modalLoading","$modal",function(b,c,d){var e={};return e.modal=function(f){f=f||{},c.create();var g=a.extend(f,{templateUrl:b.api("template/modal/modal-newsletter"),windowClass:"sl-modal sl-newsletter",controller:"NewsletterController",backdrop:"static",keyboard:!1});return e.modalInstance=d.open(g),e.modalInstance},e.close=function(){e.modalInstance.close()},e}])}(angular),function(a){"use strict";a.module("Kinkee").controller("PersonasController",["$scope","$personas",function(a,b){a.init=function(){a.initLoading=!0,b.getQuiz().$promise.then(function(b){a.quiz=b,a.initLoading=!1})},a.selectQuestion=function(b){a.selectedQuestion=b},a.isSelected=function(b){return a.selectedQuestion&&a.selectedQuestion.quizoptionid===b.quizoptionid},a.closeModal=function(){b.closeModal()},a.closeQuiz=function(){b.closeQuiz().$promise.then(function(){a.closeModal()})},a.saveQuiz=function(){a.loading=!0,b.saveQuiz(a.selectedQuestion).$promise.then(function(){a.loadTemplate()})},a.disableSave=function(){return a.loading||!a.selectedQuestion}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("slPersonasReady",["$personas",function(a){return{restrict:"A",link:function(b,c,d){var e={quizName:d.slPersonasReady};a.modal(e)}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("slPersonas",["$compile","$templateRequest",function(a,b){return{restrict:"A",link:function(c,d){c.loadTemplate=function(){b("template/modal/modal-personas/modal-personas-success",{},!0).then(function(b){d.empty().append(a(b)(c))})}}}}])}(angular),function(a){"use strict";a.module("Kinkee").factory("QuizModel",["BaseModel","$url",function(a,b){return new a("message",{getQuiz:{method:"POST",url:b.api("quiz/get")},saveQuiz:{method:"POST",url:b.api("quiz/set")},closeQuiz:{method:"POST",url:b.api("quiz/close")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$personas",["$url","$modal","QuizModel",function(b,c,d){var e,f,g={};return g.modal=function(d){d=d||{},e=d.quizName;var f=a.extend(d,{templateUrl:b.api("template/modal/modal-personas"),windowClass:"sl-modal sl-personas",controller:"PersonasController",backdrop:"static",keyboard:!1});return g.modalInstance=c.open(f),g.modalInstance},g.closeModal=function(){g.modalInstance.close()},g.getQuiz=function(){return f=d.getQuiz({quizname:e})},g.saveQuiz=function(a){return a.quizvariationid=f.quizvariationid,d.saveQuiz(a)},g.closeQuiz=function(){return d.closeQuiz({quizid:f.quizid})},g}])}(angular),function(a){"use strict";a.module("Kinkee").controller("PrivacyController",["$scope","$privacy","$subscribe","$auth","$friendList","langs","PrivacyModel",function(b,c,d,e,f,g,h){function i(){var d=[];a.element(".sl-privacy .active div").each(function(){d.push(a.element(this).find(".title")[0].innerHTML)}),c.setLists(b.selected),c.setListsName(d)}b.page=0,b.selected=c.getLists().slice(0),b.moreItens=!1,b.lists={common:[],user:[]},b.paginate=function(){h.getLists({page:b.page}).$promise.then(function(a){"undefined"!=typeof a.common&&a.common.length>0&&(b.lists.common=a.common),"undefined"!=typeof a.user&&a.user.length>0&&(b.lists.user=b.lists.user.concat(a.user));var c=b.page?10:9;b.moreItens=!0,b.moreItens=a.user.length>=c,b.page++})},b.select=function(a){var d=b.selected.indexOf(a)!==-1,e=a===c.ID_LIST_PUBLIC,f=b.selected.indexOf(c.ID_LIST_PUBLIC);e?b.selected=[c.ID_LIST_PUBLIC]:d?(b.selected.splice(b.selected.indexOf(a),1),b.selected.length||(b.selected=[c.ID_LIST_PUBLIC])):(b.selected.push(a),f=b.selected.indexOf(c.ID_LIST_PUBLIC),f!==-1&&b.selected.splice(f,1))},b.isSelected=function(a){return b.selected.indexOf(a)!==-1},b.returnModal=function(){e.revalidateSubscription().then(function(){i(),c.closeModal()},function(){if(i(),c.isPublic())c.closeModal();else{c.clean();var a={subtitle:g.privacyErrorSubscribertopostwithprivacy,params:{action:"UPLOAD_WITH_PRIVACY"}};d.modal(a)}})},b.create=function(){f.onSave=function(a){var c={listid:a.query.listid,listname:a.name,total:a.listSelected.length};b.lists.user.unshift(c),b.selected=[c.listid],a.close()},f.modal(!0)},b.close=function(){c.closeModal(),b.selected=[]}}])}(angular,window),function(a){"use strict";a.module("Kinkee").factory("PrivacyModel",["BaseModel","$url",function(a,b){return new a("privacy",{getLists:{method:"GET",url:b.api("privacy/lists")},langs:{method:"GET",url:b.api("privacy/langs")}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$privacy",["$url","$modal","$modalLoading","PrivacyModel",function(b,c,d,e){var f={ID_LIST_PUBLIC:"public",modalInstance:null},g={windowClass:"sl-modal sl-privacy",showBackButton:!0},h=[f.ID_LIST_PUBLIC],i=[];return f.modal=function(){var d=a.extend(g,{templateUrl:b.api("privacy/template"),controller:"PrivacyController",resolve:{langs:function(){return e.langs().$promise.then(function(a){return a})}}});return f.modalInstance=c.open(d),f.modalInstance.selected=h,f.modalInstance},f.closeModal=function(){f.modalInstance.close()},f.setLists=function(a){h=a.length?a:[f.ID_LIST_PUBLIC]},f.getLists=function(){return h},f.setListsName=function(a){i=a},f.getListsName=function(){return i},f.set=function(b){if(b){var c=[],d=[];a.forEach(b,function(a,b){c.push(b),d.push(a)}),f.setLists(c),f.setListsName(d)}},f.isPublic=function(){return h.length&&h[0]===f.ID_LIST_PUBLIC},f.clean=function(){h=[f.ID_LIST_PUBLIC],i=[]},f}])}(angular),function(a){"use strict";a.module("Kinkee").directive("promoteVideo",["$modal",function(b){return{restrict:"E",scope:{video:"@",title:"@",description:"@",template:"@",linkMore:"@",onClose:"&"},link:function(c){var d={modal:{templateUrl:c.template,windowClass:"sl-modal promote-video",keyboard:!0,backdrop:"static",size:"md",onClose:a.noop}},e=null;e=b.open(a.extend(d.modal,{controller:["$scope","$compile",function(b,d){var f=a.element('<div class="video-inline"></div>').attr("sl-video-inline",c.video);b.html=d(f)(c),b.link=c.linkMore,b.title=c.title,b.description=c.description,b.close=function(){e.close()}}]}))}}}])}(angular),function(a,b){"use strict";a.module("Kinkee").directive("slReport",function(){return{restrict:"A",link:function(a,c){c.on("click",b.Zenbox.render)}}})}(angular,window),function(a){"use strict";a.module("Kinkee").directive("slSearchMobile",["SearchModel","$debounce","$search",function(a,b,c){return{restrict:"A",scope:!0,link:function(d,e){function f(){d.clear(),e.remove()}function g(){e.find('input[type="search"]').focus()}d.custons=[],d.locations=[],d.friends=[],d.loading=!1,d.search=b(function(){d.term?(d.loading=!0,a.query({term:d.term},function(a){d.custons=a.custons,d.locations=a.locations,d.friends=a.friends,d.loading=!1})):d.clear()},c.delay),d.clear=function(){d.term=null,d.custons=[],d.locations=[],d.friends=[],d.loading=!1},d.close=function(){return d.term?(d.clear(),void g()):void f()},d.submit=function(a){c.submit(d.term,a)},setTimeout(function(){g()})}}}])}(angular),function(a){"use strict";a.module("Kinkee").directive("slSearch",["SearchModel","$debounce","$search","$lang",function(b,c,d,e){return{restrict:"A",scope:!0,compile:function(){return function(f,g){function h(b){var c=[];return a.forEach(b,function(b){a.isArray(b)&&(c=c.concat(b))}),c.push({cssClass:"advanced-search",text:e("advancedsearch")}),c}function i(){return[{cssClass:"empty",text:e("searchonKinkee")},{cssClass:"advanced-search",text:e("advancedsearch")}]}function j(){g.addClass("loading")}function k(){g.removeClass("loading")}function l(){g.find("input[type=search]").focus()}f.selectedItem={},f.search=c(function(a){return a&&a.length>=3?(j(),b.query({term:a}).$promise.then(function(a){return k(),h(a)},function(){return k(),[]})):(k(),i())},d.delay),f.select=function(a){f.selectedItem=a,f.submit()},f.clear=function(){k(),f.selectedItem={}},f.close=function(a){f.term="",f.clear(),f.search(),l(),f.$emit("$closeTypeaheadDropdown",a)},f.submit=function(){f.submitAfterBlur=!0,d.submit(f.term,f.selectedItem)},f.formatSelection=function(a){if(a){if("all"===a.cssClass)return a.desc;if("friend"===a.cssClass)return a.login;if("location"===a.cssClass){var b="";return a.city&&(b+=a.city+", "),a.state&&(b+=a.state+" - "),a.country&&(b+=a.country),b?b:f.term}}}}}}}])}(angular),function(a){"use strict";a.module("Kinkee").factory("SearchModel",["BaseModel","$url",function(b,c){return new b("search",{query:{method:"GET",url:c.base("search/find"),isArray:!1,cache:!0,params:{type:"raw"},transformResponse:function(b){return b&&(b=a.fromJson(b),a.isArray(b.custons)&&a.forEach(b.custons,function(a){a.cssClass="all"}),a.isArray(b.friends)&&a.forEach(b.friends,function(a){a.cssClass="friend"}),a.isArray(b.locations)&&a.forEach(b.locations,function(a){a.cssClass="location"})),b}}})}])}(angular),function(a){"use strict";a.module("Kinkee").factory("$search",["$url","$timeout",function(b,c){function d(){return a.element("#navbar-search-form")}function e(){return a.element("#navbar-search-form input[type=search]")}function f(){return d().find(".form-data")}function g(){return e().scope()}var h={set:function(a){var b=f();b.find('input[name="txtLocations"]').attr("value",a.txtLocations),b.find('input[name="gender"]').attr("value",a.gender),b.find('input[name="country"]').attr("value",a.country),b.find('input[name="state"]').attr("value",a.state),b.find('input[name="city"]').attr("value",a.city)},submit:function(c,f){var g=e().val();if(g&&(c=g===c?c:g),a.isDefined(f)&&(h.set({txtLocations:c,gender:f.gender,country:f.countryid,state:f.stateid,city:f.cityid}),"friend"===f.cssClass))return b.redirect(b.base(f.login));var i=d();return i.length?i.submit():void 0},setNavbarText:function(a){if(a){var b=g();c(function(){b.term=a})}},clear:function(){var a=g();c(function(){a.term=""})},delay:400};return h}])}(angular),function(){"use strict";angular.module("Kinkee").constant("SHARE_TYPE",{TYPE_JPG:"image/jpg",TYPE_GIF:"image/gif"})}(angular),function(a){"use strict";var b={facebook:"https://www.facebook.com/sharer/sharer.php?u={url}",twitter:"https://twitter.com/home?status=Friends, help me win the top prize in the Sexually Empowered Photo Contest by @Kinkee and @sluttygirlprobs! {url}",pinterest:"https://www.pinterest.com/pin/create/button/?url={url}&media={media}&description={description}"};a.module("Kinkee").controller("ShareController",["$scope","$share","$url","$compile","$crop","$privacy","$auth","lang","$subscribe","$timeout","LocalStorage","ShareModel","news",function(c,d,e,f,g,h,i,j,k,l,m,n,o){function p(b){var g=a.element(".sl-share"),i=g.find(".modal-content");c.busy=!0,i.height(i.outerHeight()),g.addClass("sl-share-success"),i.parent().prepend('<div class="modal-loader in"></div>'),n[b](c.post,function(b){function h(){c.message.saveMessage=b.returncode===-1?b.returnmessage:j.shareSuccessText,c.message.limit=b.returncode===-1,f(i.contents())(c),c.$apply(),r.clear("editor"),l(function(){i.height(i.find(".modal-body").outerHeight()),l(function(){g.find(".modal-loader").remove()},600)})}c.post.image=b.result&&b.result.image,i.empty().load(e.api(q(b)),function(){return d.showWebPush=!0,a.isFunction(d.onSave)&&!c.config[d.UPLOAD_TYPE.VIDEO]&&b.returncode!==-1?void d.onSave.call(c,{complete:h,isSgp:b.result&&b.result.image.share}):void h()})},function(){c.busy=!1}),h.clean()}function q(a){return a.result&&a.result.image&&a.result.image.share?"share/template?t=sluttygirlprobs":"share/template?t=success"}var r=new m;c.$share=d,c.$privacy=h,c.busy=!1,c.config={},c.error={},c.message={},c.showAllText=!1,c.post={text:d.getHashtag()||"",rotate:0},c.saved=!1,c.ShowAllPrivacy=function(){c.showAllText=!c.showAllText},c.showAll=function(){var a=h.getListsName();return a.length>3&&c.showAllText!==!0},c.privacyText=function(){var a=h.getListsName(),b="";return a.length<=0?(c.showAllText=!1,j.privacyPublic):(a.length>3?b=c.showAllText?a.join(", "):a.slice(0,3).join(", ")+"... ":(c.showAllText=!1,b=a.join(", ")),b)},c.close=function(){return d.showWebPush&&d.openWebPushDialog(),d.close()},c.save=function(){if(c.post.privacy=h.getLists(),c.post.tmpFileName){var a=g.getLastCrop();g.clean(),c.post.description=c.post.text,a?(c.post.crop=!0,c.post.cropx=a.x,c.post.cropy=a.y,c.post.cropw=a.w,c.post.croph=a.h):c.post.crop=!1,p("saveFile")}else i.checkSubscription().then(function(){p("saveText")},function(){k.modal({subtitle:j.panelSubscribeForCreateNews})})},c.limitText=function(a){return a.substring(0,256)},c.repost=function(){return d.showWebPush=!1,c.injected?void e.reload():(c.close(),void l(function(){d.modal()},200))},c.getShareLink=function(a){var d=b[a];return d.replace("{url}",c.post.image.shareUrl).replace("{media}",c.post.image.cropLp).replace("{description}",c.post.text)},c.initSgp=function(b){if(o){if(o.media.thumb){var e=a.element('<img src="'+o.media.thumb+' ">');d.setImage(e)}c.post={text:o.media.description,image:{cropLp:b.cropLp,shareUrl:b.shareUrl}}}},c.setLangs=function(a){j=a}}])}(angular),function(a){"use strict";var b=/(mp3)$/i,c=67108864;a.module("Kinkee").directive("slShareAudio",["$share",function(a){return{restrict:"A",require:"^slShare",scope:!0,link:function(d,e,f,g){var h,i,j,k;e.fileupload({acceptFileTypes:b,maxFileSize:c,tmpInput:"tmpPostFileName",queueID:"queueMedia",showCancelButton:!1,autoStart:!1,self:this,onSelect:function(b,c){k=!1,h=b.data.fileupload.options.fileInput,i=c;var d=c.files[0];return g.onSelect(b,d,a.UPLOAD_TYPE.AUDIO),!0},onComplete:function(b,c){g.onComplete(c,a.UPLOAD_TYPE.AUDIO)},onError:function(){k||g.onError(a.UPLOAD_TYPE.AUDIO)}}),d.$on("upload:"+a.UPLOAD_TYPE.AUDIO,function(){h&&setTimeout(function(){j=h.fileupload("uploadStart",i)})}),d.$on("upload:cancel",function(){j&&(k=!0,j.abort())})}}}])}(angular,window),function(a,b){"use strict";var c=new RegExp("(jpg)|(jpeg)|(gif)|(png)$","i"),d=67108864,e=!!b.URL||!!b.webkitURL;a.module("Kinkee").directive("slShareFile",["$share",function(a){return{restrict:"A",require:"^slShare",scope:!0,link:function(b,f,g,h){var i,j,k,l;f.fileupload({acceptFileTypes:c,maxFileSize:d,tmpInput:"tmpPostFileName",queueID:"queuePhoto",showCancelButton:!1,autoStart:!1,self:this,onSelect:function(b,c){return l=!1,i=b.data.fileupload.options.fileInput,j=c,b.isPreviewCompatible=e,h.onSelect(b,c.files[0],a.UPLOAD_TYPE.PHOTO),a.setUploader(i),!0},onComplete:function(b,c){h.onComplete(c,a.UPLOAD_TYPE.PHOTO)},onError:function(){l||h.onError(a.UPLOAD_TYPE.PHOTO),l=!1}}),b.$on("upload:"+a.UPLOAD_TYPE.PHOTO,function(){i&&setTimeout(function(){k=i.fileupload("uploadStart",j)})}),b.$on("upload:cancel",function(){k&&(l=!0,k.abort())})}}}])}(angular,window),function(a){"use strict";var b=a.module("Kinkee"),c="$modalInstance modalData lang news".split(" "),d="";a.forEach(c,function(c){b.service(c,a.noop)}),a.module("Kinkee").directive("shareInjected",["$url","ShareModel",function(a,b){return{restrict:"EA",controller:"ShareController",templateUrl:function(){return d=a.api("share/template?t=modal&inject=true")},link:function(a){b.lang().$promise.then(function(b){a.setLangs(b)}),a.injected=!0}}}])}(angular),function(a,b){"use strict";a.module("Kinkee").directive("slShareRotate",["$share","$crop","$rootScope",function(c,d,e){return{require:"ngModel",scope:!0,link:function(f,g,h,i){f.rotate=function(){var f,g,j,k,l=a.element(h.container),m=a.element("<canvas></canvas>"),n=c.getImageDimensions(),o=c.getImageOriginalDimensions(),p=c.getImage();if(j=n.width,g=n.height,k=o.width,c.setImageDimensions({width:g,height:j}),c.setImageOriginalDimensions({width:o.height,height:k}),d.hasCrop){var q,r=d.getLastCrop();q={x:o.width-r.h-r.y,y:r.x,w:r.h,h:r.w},d.setLastCrop(q)}m.attr("width",g).attr("height",j),f=m.get(0).getContext("2d"),f.translate(g,0),f.rotate(Math.PI/2),f.drawImage(p.get(0),0,0),b.loadImage(m.get(0).toDataURL("image/png"),function(b){var d=i.$viewValue;l.empty().append(b),c.setImage(a.element(b)),e.$broadcast("$positionateWatermark"),d+=90,360===d&&(d=0),i.$setViewValue(d)},{maxWidth:475,maxHeight:385})}}}}])}(angular,window),function(a){"use strict";var b=new RegExp("(avi)|(mpg)|(mpeg)|(mov)|(mp4)|(3gp)|(wmv)$","i"),c=536870912;a.module("Kinkee").directive("slShareVideo",["$share",function(a){return{restrict:"A",require:"^slShare",scope:!0,link:function(d,e,f,g){var h,i,j,k;e.fileupload({acceptFileTypes:b,maxFileSize:c,tmpInput:"tmpPostFileName",queueID:"queueMedia",showCancelButton:!1,autoStart:!1,self:this,onSelect:function(b,c){k=!1,h=b.data.fileupload.options.fileInput,i=c;var d=c.files[0];return g.onSelect(b,d,a.UPLOAD_TYPE.VIDEO),!0},onComplete:function(b,c){g.onComplete(c,a.UPLOAD_TYPE.VIDEO)},onError:function(){k||g.onError(a.UPLOAD_TYPE.VIDEO)}}),d.$on("upload:"+a.UPLOAD_TYPE.VIDEO,function(){h&&setTimeout(function(){j=h.fileupload("uploadStart",i)})}),d.$on("upload:cancel",function(){j&&(k=!0,j.abort())})}}}])}(angular,window),function(a){"use strict";a.module("Kinkee").directive("slShareWatermark",["$share",function(b){return{require:"ngModel",scope:!0,link:function(c,d,e,f){function g(){var a=b.getImage();a&&(h.width(a.width()),h.offset({left:a.offset().left}))}var h=a.element(e.watermarkContainer);c.$on("$screenChange",function(){g()}),c.$on("$positionateWatermark",function(){g()}),c.setMark=function(a,b){g(),a.target.className.indexOf("selected")!==-1?f.$setViewValue(""):f.$setViewValue(b)}}}}])}(angular),function(a,b){"use strict";a.module("Kinkee").directive("slShare",["$q","$share","$crop","$lang","$timeout","$privacy","$auth","$subscribe","$screen","$iframe","$url","$googleAnalytics","LocalStorage","SHARE_TYPE",function(c,d,e,f,g,h,i,j,k,l,m,n,o,p){return{restrict:"A",scope:!0,controller:["$scope","$element",function(g,q){function r(c,e){var f=c.size.toString();y.removeClass("image-edit image-no-preview error-media error-photo"),z.empty(),e?(y.addClass("image-edit"),s(c).then(function(e){if(z.append(e),c.type===p.TYPE_GIF){var f=a.element("<canvas></canvas>"),g=f.get(0).getContext("2d");return f.attr("width",e.naturalWidth).attr("height",e.naturalHeight),g.drawImage(e,0,0),void b.loadImage(f.get(0).toDataURL(p.TYPE_JPG),function(a){var b=z.empty().append(a).find("img");d.setImage(b)})}var h=z.append(e).find("img");d.setImage(h)})):(y.addClass("image-no-preview"),f.length>3&&(f=f.substring(0,f.length-3)),g.$apply())}function s(a){var d=c.defer();return b.loadImage(a,function(a){d.resolve(a)},{maxWidth:475,maxHeight:385}),d.promise}function t(){g.config[d.UPLOAD_TYPE.PHOTO]=!1,g.config[d.UPLOAD_TYPE.VIDEO]=!1,g.config[d.UPLOAD_TYPE.AUDIO]=!1}function u(b){a.element(b).trigger("click")}function v(a){return a.length>19?a.substr(0,8)+"..."+a.substr(a.length-8):a}function w(a,b){var c={name:v(b.name),size:+b.size/1e3+"kb"};return a===d.UPLOAD_TYPE.PHOTO||a===d.UPLOAD_TYPE.VIDEO?void(g.file=c):void(g.fileAudio=c)}function x(){A.get("editor").then(function(a){g.post.text=a.text,a.privacy&&(h.setLists(a.privacy.list),h.setListsName(a.privacy.names)),a.image&&(g.config[d.UPLOAD_TYPE.PHOTO]=!0,g.file={name:v(a.image.name),size:a.image.size+"kb"},y.addClass("image-edit"),d.refreshImage(a.image.url),g.post.tmpFileName=a.image.backName,g.objImage={result:{imageUrl:a.image.url,editorUrl:a.image.editorUrl,size:a.image.size,name:a.image.name}}),a.audio&&(g.config[d.UPLOAD_TYPE.AUDIO]=!0,g.fileAudio={name:v(a.audio.name)},g.post.tmpAudioName=a.audio.backName),a.watermark&&(g.post.watermark=a.watermark)})}var y=q.find(".body-container"),z=y.find(".preview .image"),A=new o;this.onSelect=function(a,b,c){g.isMobile=k.isMobile(),g.error={},g.$parent.busy=f("loading")+"...",g.post.watermark="",y.removeClass("error-media error-photo"),y.addClass("loading"),c===d.UPLOAD_TYPE.PHOTO?r(b,a.isPreviewCompatible):y.addClass("file-uploaded"),w(c,b),g.config[c]=!0,g.$broadcast("upload:"+c),g.$apply()},this.onComplete=function(a,b){if(g.$parent.busy=!1,y.removeClass("loading"),0===a.result.returncode){if(b===d.UPLOAD_TYPE.PHOTO){var c={width:a.result.result.width,height:a.result.result.height};d.setImageDimensions(c),d.setImageOriginalDimensions(c)}b===d.UPLOAD_TYPE.PHOTO||b===d.UPLOAD_TYPE.VIDEO?g.post.tmpFileName=a.result.result.name:b===d.UPLOAD_TYPE.AUDIO&&(g.post.tmpAudioName=a.result.result.name)}b===d.UPLOAD_TYPE.PHOTO&&(g.objImage=a.result),g.$apply()},this.onError=function(a){var b=q.find(".body-container");g.removeImage(),g.removeFile(),g.$parent.busy=!1,b.addClass(a===d.UPLOAD_TYPE.PHOTO?"error-photo":"error-media"),g.$apply()},g.removeImage=function(){y.removeClass("image-edit loading image-no-preview file-uploaded error-media error-photo"),g.post.tmpFileName=null,g.post.tmpAudioName=null,g.post.watermark="",g.post.rotate=0,d.setImage(null),e.clean(),t(),g.busy=!1,g.$broadcast("upload:cancel")},g.removeFile=function(a){y.removeClass("file-uploaded error-media error-photo loading"),g.config[d.UPLOAD_TYPE.AUDIO]?(g.post.tmpAudioName=null,g.config[d.UPLOAD_TYPE.AUDIO]=!1):(g.post.tmpFileName=null,t()),g.$broadcast("upload:cancel"),a&&a.stopPropagation()},g.openModalCrop=function(){e.setImage(d.getImage()),e.setImageDimensions(d.getImageDimensions()),e.setImageOriginalDimensions(d.getImageOriginalDimensions()),e.modal()},g.choosePhoto=function(){return g.config[d.UPLOAD_TYPE.VIDEO]?(q.parents(".modal-content").addClass("change-file-type"),void(g.message={changeTypeTitle:f("post_changetophoto_title"),changeTypeText:f("post_changefromvideo_txt"),changeTypeYes:f("post_changetophoto_btnyes"),changeTypeNo:f("post_changefromvideo_btnno")})):void u(".share-file")},g.chooseVideo=function(){return g.config[d.UPLOAD_TYPE.PHOTO]?(q.parents(".modal-content").addClass("change-file-type"),void(g.message={changeTypeTitle:f("post_changetovideo_title"),changeTypeText:f("post_changefromphoto_txt"),changeTypeYes:f("post_changetovideo_btnyes"),changeTypeNo:f("post_changefromphoto_btnno")})):void u(".share-video")},g.chooseAudio=function(b){if(!g.post.tmpAudioName&&!a.element(b.target).hasClass("disabled"))if(g.subscriber)u(".share-audio");else{var c={subtitle:f("upload_audio_subscribe")};j.modal(c)}},g.closeModalConfirm=function(){q.parents(".modal-content").removeClass("change-file-type")},g.changeFileType=function(){var a=g.config[d.UPLOAD_TYPE.PHOTO],b=g.config[d.UPLOAD_TYPE.VIDEO];t(),a?(g.removeImage(),g.chooseVideo()):b&&(g.removeFile(),g.choosePhoto()),g.closeModalConfirm()},g.modalPrivacy=function(){h.modal()},g.checkEnabled=function(a){if(g.busy)return a.preventDefault(),!1},g.init=function(b){i.revalidateSubscription().then(function(){g.subscriber=!0},function(){g.subscriber=!1}),setTimeout(function(){var b=a.element(q).find(".body-container textarea");b.focus()},100),b.injected&&x()},g.openEditor=function(a){if(k.isMobile()||g.injected){var b={},c=g.objImage.result,d=h.getLists(),e=g.fileAudio,f=g.post.watermark;return b.text=g.post.text,b.image={url:m.removeSearch(c.imageUrl)+"?t="+(new Date).getTime(),size:c.size,name:g.file.name,backName:g.post.tmpFileName,editorUrl:c.editorUrl},d&&(b.privacy={list:h.getLists(),names:h.getListsName()}),e&&(b.audio={name:g.fileAudio.name,backName:g.post.tmpAudioName}),f&&(b.watermark=f),"/editor"!==m.path()&&(b.editorOriginUrl=m.href()),void A.set("editor",b).then(function(){n.trackEvent("Editor de Fotos","Mobile"),m.redirect(m.customParams(c.editorUrl,{backUrl:m.base("editor"),originUrl:m.href()}))})["catch"](function(){g.openEditorFrame(a)})}g.openEditorFrame(a)},g.openEditorFrame=function(a){l.open({src:m.customParams(g.objImage.result.editorUrl,{iframe:!0}),fullscreen:!0,onClose:function(b){b.origin===a.editorUrl&&(d.refreshImage(g.objImage.result.imageUrl+"?t="+(new Date).getTime()),l.destroy(),n.trackEvent("Editor de Fotos","Desktop"))}})}}]}}])}(angular,window),function(a){"use strict";a.module("Kinkee").directive("slShareAppend",["$share",function(a){return{restrict:"A",scope:!0,link:function(b,c){var d=a.getImage();d&&c.append(d)}}}])}(angular),function(a){"use strict";a.module("Kinkee").factory("ShareModel",["BaseModel","$url",function(a,b){return new a("share",{saveText:{method:"POST",url:b.api("share/text")},saveFile:{method:"POST",url:b.base("news/post")},lang:{method:"GET",url:b.api("share/lang"),isArray:!1,cache:!0},testAbPush:{method:"POST",url:"service/web-push/set-testab-push"}})}])}(angular),function(a){"use strict";var b="sl-share";a.module("Kinkee").factory("$share",["$url","$modalLoading","$modal","$webPush","$lang","$privacy","ShareModel","WEB_PUSH_TYPES",function(c,d,e,f,g,h,i,j){var k=null,l={width:null,height:null},m={width:null,height:null},n={modalInstance:null,showWebPush:!1,UPLOAD_TYPE:{PHOTO:"Photo",VIDEO:"Video",AUDIO:"Audio"}},o={windowClass:"sl-modal "+b},p=null;return n.modal=function(){h.clean(),k=null,d.create();var b=a.extend(o,{templateUrl:c.api("share/modal-template"),controller:"ShareController",backdrop:"static",resolve:{lang:function(){return i.lang().$promise.then(function(a){return a})},news:function(){return!1}}});return n.showWebPush=!1,n.modalInstance=e.open(b),n.modalInstance},n.modalSgpSuccess=function(a){var b={windowClass:"sl-modal sl-share sl-share-success",templateUrl:c.api("share/template?t=sluttygirlprobs&contentId="+a.contentid),controller:"ShareController",backdrop:"static",resolve:{lang:function(){return i.lang().$promise.then(function(a){return a})},news:function(){return a}}};return n.modalInstance=e.open(b),n.modalInstance},n.close=function(){n.modalInstance.close()},n.setImage=function(a){k=a},n.getImage=function(){return k},n.setImageDimensions=function(a){l.width=a.width,l.height=a.height},n.getImageDimensions=function(){return l},n.setImageOriginalDimensions=function(a){m.width=a.width,m.height=a.height},n.getImageOriginalDimensions=function(){return m},n.hasImage=function(){return null!==k},n.setUploader=function(a){n.uploader=a},n.setHashtag=function(a){p="#"+a+" "},n.getHashtag=function(){return p},n.refreshImage=function(c){var d=a.element('<img src="'+c+'">');a.element("."+b).find(".image").empty().append(d),n.setImage(d)},n.openWebPushDialog=function(){i.testAbPush({},function(){var a={title:g("web_push_comment_photo_title"),info:g("web_push_comment_photo_subtitle"),yes:g("web_push_yes"),no:g("web_push_no")};f.invitation(a).then(function(){f.saveType(j.COMMENTS_PHOTOS).then(function(){f.success()},function(){f.error()})})})},n}])}(angular),function(a){"use strict";var b="bypass-locale";a.module("Kinkee").directive("slLanguageSelector",["CultureModel","$window","$cookies",function(c,d,e){return{restrict:"A",scope:!0,link:function(f){f.dropdownOpened=!1,f.langs=[],f.load=function(){return f.langs.length?void f.toggleDropdown():c.query({},function(a){f.langs=a,f.toggleDropdown()})},f.toggleDropdown=function(){f.dropdownOpened=!f.dropdownOpened},f.opened=function(){return{open:f.dropdownOpened}},f.set=function(f){e(b,!0,{path:"/",domain:d.document.domain.replace(/^[^.]+\./g,".")}),c.save({new_lang:+f.cultureid},function(){a.isFunction(d.refresh)&&d.refresh.call()})}}}}])}(angular),function(a){"use strict";var b=110,c=70,d=".sl-sidebar-collapse-item",e="sidebar-open",f=".hidden-sm-landscape",g="aside.sidebar",h=".sl-promotion";a.module("Kinkee").directive("slSidebarCollapse",["$screen","$window","$compile","$debounce",function(i,j,k,l){return{restrict:"A",scope:!0,link:function(j,m){function n(){return x=[],u.each(function(b,c){c=a.element(c),r(c),i.isMobile()||p(c)}),x.length?(m.show(),void s()):void m.hide()}function o(){return a.element("body").hasClass(e)}function p(a){var b=a.is(":visible")?a.position().top:a.data("lastTop"),c=a.height(),d=v.outerHeight(),e=t(c,b),g=e<d;if(!g){var h=a.find("li:visible:last").not(f);h.length&&(q(h),p(a))}return a.data("lastTop",b),g}function q(a){x.push(a.clone()),a.hide()}function r(a){a.find("li").not(f).show()}function s(){w.empty(),x.reverse(),a.forEach(x,function(a){w.append(k(a)(j))});var b=w.find("li:first-child");b.hasClass("separator")&&b.remove()}function t(d,e){var f=d+e+b,g=a.element(h);return o()&&(f+=c),g.length&&(f+=g.height()+30),f}var u=a.element(a.element(d).get().reverse()),v=a.element(g),w=m.find(".show-more"),x=[];j.$onMany("$screenChange sidebarToggle promotionLegacyLoaded",l(function(){n()},200))}}}])}(angular),function(a){"use strict";var b="sidebar-open",c=992,d=1200;a.module("Kinkee").directive("slSidebar",["$screen","$window","$compile","$templateRequest","$rootScope","$debounce","$timeout","$cookies",function(e,f,g,h,i,j,k,l){return{restrict:"A",scope:!0,link:function(f,m,n){function o(){y.hasClass(b)?q():p(),i.$broadcast("sidebarToggle"),e.width()>=d&&s()}function p(){y.addClass(b),e.blockScroll(),B.off("click.slSidebar").one("click.slSidebar",function(){y.removeClass(b),e.unblockScroll()})}function q(){e.unblockScroll(),y.removeClass(b)}function r(){h("search",{templateKey:"mobile"}).then(function(a){y.prepend(g(a)(f))})}function s(){var a=t();a?v():u(),i.$digest()}function t(){return l(b)}function u(){l(b,!0,{path:"/",expires:30})}function v(){l.remove(b,{path:"/"})}function w(){return e.width()<c&&y.hasClass(b)}function x(){return e.width()<d&&y.hasClass(b)}var y=a.element("body"),z=m.find("button.toggle"),A=m.find("input.fake-search"),B=a.element('<div class="sidebar-backdrop" />').appendTo(y),C=!1;z.click(function(a){a.preventDefault(),a.stopPropagation(),o()}),A.click(function(a){a.preventDefault(),r()}),f.$on("$screenChange",j(function(){return C?void(w()&&q()):void(C=!0)},200)),a.isDefined(n.autoOpen)&&k(function(){var a=t();a&&x()&&(o(),v(),q())})}}}])}(angular),function(a,b,c){"use strict";a.element(b).ready(function(){var d=a.bootstrap(b,["Kinkee"]);setTimeout(function(){c(b).trigger("angularReady",d)})})}(angular,document,jQuery);
