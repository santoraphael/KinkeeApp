/*! {Â© 2016 - 2020 Tinder, Inc., ALL RIGHTS RESERVED} */
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1197:function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var a=s(91),n=s.n(a),r=s(54);function i(){var e=r.b.getItem("onboardingDoneForIds");try{return e?JSON.parse(e):[]}catch(e){return[]}}function o(e){return!!e&&i().map((function(e){return e&&"string"==typeof e&&24!==e.length?window.atob(e):e})).filter((function(t){return 0===e.indexOf(t)})).length>0}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t=window.btoa(e.substring(0,12)),s=i();t&&"string"==typeof t&&r.b.setItem("onboardingDoneForIds",JSON.stringify([].concat(n()(s),[t])))}},1244:function(e,t,s){"use strict";var a=s(7),n=s.n(a),r=s(16),i=s.n(r),o=s(26),c=s.n(o),l=s(24),p=s.n(l),u=s(23),d=s.n(u),m=s(19),h=s.n(m),f=s(27),g=s.n(f),v=s(1),b=s.n(v),O=s(5),w=s(10),y=s(12),S=s(37),P=s(6),x=s.n(P),j=s(46),A=s.n(j),T=s(1199),k=s(449),N=s(1245),C=s(1110),M=s(51);function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function I(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){b()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var D=(function(e){function t(){var e,s;i()(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return s=p()(this,(e=d()(t)).call.apply(e,[this].concat(n))),b()(h()(s),"getPhotoSlideIndex",(function(){return s.props.recUser.get("activePhotoIndex")||0})),b()(h()(s),"getPhotos",(function(){return s.props.recUser.get("photos",new y.List).map((function(e){return I({id:e.get("id"),urls:Object(M.r)(e,[2,0]),videoUrls:Object(M.u)(e)},Object(C.g)(e))}))})),b()(h()(s),"handleImgError",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.getPhotoSlideIndex(),t=s.props,a=t.recUser,n=t.handlePhotoError;if(n){var r=a.getIn(["photos",e]),i=a.get("_id");if(r){var o=r.get("id");n(i,o)}else Object(w.u)("Encountered undefined photo for user ".concat(i," at activePhotoIndex ").concat(a.get("activePhotoIndex")))}})),s}return g()(t,e),c()(t,[{key:"render",value:function(){var e=this,t=this.props,s=t.handlePhotoError,a=t.inSwipe,r=t.isCurrentRec,i=t.isLikesYou,o=t.onClick,c=t.onPhotoChange,l=t.photoClassName,p=t.recUser,u=t.toggleTiltAnimation,d=this.getPhotoSlideIndex(),m=this.getPhotos(),h=m.get(d,{}),f=x()(h,"urls",[]),g=x()(h,"videoUrls",[]),v=n()("span",{onClick:o},void 0,n()(k.a,{alt:p.get("name"),className:l,deferLoadUntilInViewport:!0,intendedAspectRatio:.725,interestBottom:h.interestBottom,interestLeft:h.interestLeft,interestRight:h.interestRight,interestTop:h.interestTop,loader:p.get("active")&&!i?k.d.NORMAL:k.d.NONE,onError:s?this.handleImgError:A.a,urls:f}),!!g.length&&n()(T.a,{className:Object(S.a)({recsCard__loop:!i,Expand:i}),urls:g,lowResolution:i}));return i?v:n()(N.a,{className:"Expand Pos(a)",containerStyle:{height:"100%"},defaultActiveIndex:d,disabled:!!a,isProfileCard:!1,toggleTiltAnimation:u,shouldAdvanceOnSpace:r,slideClassName:"Expand Pos(a) CenterAlign",onSlideChange:c},void 0,m.map((function(t,a){var r=t||{},i=r.interestBottom,o=r.interestLeft,c=r.interestRight,u=r.interestTop;return n()(O.Fragment,{},a,n()(k.b,{alt:p.get("name"),className:l,intendedAspectRatio:.725,interestBottom:i,interestLeft:o,interestRight:c,interestTop:u,loader:k.d.NORMAL,onError:s?function(){e.handleImgError(a)}:A.a,urls:t.urls,shouldTrackPerf:!0}),!!t.videoUrls.length&&n()(T.a,{className:"recsCard__loop",urls:t.videoUrls}))})))}}]),t})(O.PureComponent);b()(D,"defaultProps",{photoClassName:"Bdrs(8px) Bgz(cv) Bgp(c) StretchedBox"}),t.a=D},1246:function(e,t,s){"use strict";var a=s(7),n=s.n(a),r=s(5),i=s(37),o=function(e){var t=e.className,s=e.heightClassName,a=e.gradientClassName,r=e.isSuperLike,o=e.isSuperBoost,c=e.isBoost,l=a;return r?l="Bgi($superlike-gradient)":o?l="Bgi($superboost-gradient)":c&&(l="Bgi($boost-gradient)"),n()("div",{className:Object(i.a)("Pos(a) Start(0) B(0) End(0) TranslateZ(0)",s,l,t)})};o.defaultProps={className:"",heightClassName:"H(30%)",gradientClassName:"Bgi($light-gradient)",isSuperLike:!1,isBoost:!1,isSuperBoost:!1},t.a=Object(r.memo)(o)},1248:function(e,t,s){"use strict";var a=s(70),n=s.n(a),r=s(7),i=s.n(r),o=s(78),c=s.n(o),l=s(5),p=s.n(l),u=s(178),d=function(e){var t=e.className,s=e.pathClassName,a=c()(e,["className","pathClassName"]);return p.a.createElement(u.a,n()({className:t},a),i()("path",{className:s,d:"M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"}))};d.defaultProps={className:"",pathClassName:"Fill($c-divider)"},d.normalized=!0,t.a=Object(l.memo)(d)},1325:function(e,t,s){"use strict";var a=s(7),n=s.n(a),r=(s(5),s(37)),i=s(436),o=n()("div",{className:"Sq(8px) Bgc($c-active-indicator-green) Bdrs(50%) Mend(6px) My(4px)"}),c=function(e){var t=e.className,s=Object(i.a)();return n()("div",{className:Object(r.a)("D(f) Jc(fs) Ai(c) Fld(r)",t)},void 0,o,n()("span",{className:"C(#fff) Fz($xs)"},void 0,s.formatMessage({id:"TinderGold.recentlyActive"})))};c.defaultProps={className:""},t.a=c},1326:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return o})),s.d(t,"i",(function(){return d})),s.d(t,"e",(function(){return m})),s.d(t,"c",(function(){return h})),s.d(t,"f",(function(){return f})),s.d(t,"g",(function(){return g})),s.d(t,"d",(function(){return v})),s.d(t,"h",(function(){return b}));var a,n=s(1238),r=s(65),i=200,o=300,c={stiffness:160,damping:16,precision:.01},l={stiffness:500,damping:34,precision:.01},p={stiffness:30,damping:8,precision:.01},u={stiffness:300,damping:30,precision:.01},d=function(){var e=Math.max(window.innerWidth,window.innerHeight,1300);a={right:e,left:-e,up:-e}},m=function(){return a},h=function(e,t,s,a,i,o,c){var l=null!=e.pageX?e.pageX:e.clientX,p=null!=e.pageY?e.pageY:e.clientY,d=l-t.x,m=p-t.y,h=Math.abs(m)/Math.abs(d)>2?"vertical":"horizontal",f="horizontal"===h?d/o:0,g="vertical"!==h||c?0:-m/(o+Math.max(Math.abs(2*d)-20,0)),v=Math.max(f,0),b=Math.max(-f,0),O=c?0:Math.max(g,0),w=null;f>=1?w=r.LIKE_STATUS:f<=-1?w=r.NOPE_STATUS:g>=1&&(w=r.SUPERLIKE_STATUS);var y=t.y-s>i/2?-1:1;return{translateX:d,translateY:m,rotate:1.3*Math.PI*y*(d/5e3),scale:c?Object(n.spring)(1.1,u):1,status:w,likeOpacity:v,dislikeOpacity:b,superlikeOpacity:O}},f=function(){return{translateX:Object(n.spring)(0,c),translateY:Object(n.spring)(0,c),rotate:Object(n.spring)(0,c),scale:Object(n.spring)(1,c),status:null,likeOpacity:0,dislikeOpacity:0,superlikeOpacity:0}},g=function(){return{translateX:Object(n.spring)(0,l),translateY:Object(n.spring)(0,l),rotate:Object(n.spring)(0,l),scale:Object(n.spring)(1,l),status:null,likeOpacity:0,dislikeOpacity:0,superlikeOpacity:0}},v=function(e){var t=f();return e===r.LIKE_STATUS&&(t.translateX=a.right,t.rotate=.5,t.likeOpacity=1),e===r.NOPE_STATUS&&(t.translateX=a.left,t.rotate=-.5,t.dislikeOpacity=1),e===r.SUPERLIKE_STATUS&&(t.translateY=a.up,t.superlikeOpacity=1),t},b=function(e,t){var s;s=t?t<0?-.5:.5:"right"===e?.5:-.5;var r="right"===e?a.right:a.left;return"up"===e?{translateY:Object(n.spring)(a.up,p),superlikeOpacity:1}:{translateX:Object(n.spring)(r,p),rotate:Object(n.spring)(s),likeOpacity:"right"===e?1:0,dislikeOpacity:"left"===e?1:0}}},1353:function(e,t,s){"use strict";var a=s(70),n=s.n(a),r=s(7),i=s.n(r),o=s(16),c=s.n(o),l=s(26),p=s.n(l),u=s(24),d=s.n(u),m=s(23),h=s.n(m),f=s(19),g=s.n(f),v=s(27),b=s.n(v),O=s(1),w=s.n(O),y=s(5),S=s.n(y),P=s(204),x=s(247),j=s(1238),A=s(37),T=s(46),k=s.n(T),N=s(32),C=s(144),M=s(297),E=s(229),I=s(8),D=s(65),U=s(4),R=s(456),B=s(1130),_=s(1324),L=s(206),$=s(264),F=s(1242),Y=s(1243),W=s(1325),z=s(71),H=s(51),X=s(1197),V=s(263),J=s(1326),K=s(1244),G=s(228),q=function(e){var t=e.recUser,s=e.isLikesYou;function a(){var e=Object(M.e)(t);return Object(z.a)(t,"hide_age")||!e?null:Object(G.a)(e)}return i()("span",{className:"Whs(nw)"},void 0,s?[" ",a()].filter((function(e){return!!e})).join(", ").trim():a())};q.defaultProps={isLikesYou:!1};var Z=Object(y.memo)(q),Q=s(1246),ee=(s(12),s(53)),te=new Set(["interest"]),se=function(e){var t=e.teasers,s=e.countLimit,a=e.fontClassName;return t&&t.size?(s?t.slice(0,s):t).map((function(e){var t=e.get("type"),s=e.get("string");return te.has(t)||!s?null:i()("span",{className:Object(A.a)("Ell W(100%) D(b)",a)},t,s)})):null};se.defaultProps={teasers:ee.a,countLimit:null,fontClassName:"Fz($ms)"};var ae=Object(y.memo)(se),ne=function(e){var t=e.primaryColor,s=e.secondaryColor;return i()("div",{className:"Pos(a) B(0) Mx(-20px) W(100%) H(30px) TranslateX(-30%)"},void 0,i()("div",{className:"Pos(r) W(100%) H(100px) Rotate(20deg)"},void 0,i()("div",{className:"StretchedBox TranslateY(-20px) Op(.58)",style:{backgroundImage:"linear-gradient(92deg,transparent,".concat(s,")")}}),i()("div",{className:"StretchedBox",style:{background:t}})))};ne.defaultProps={primaryColor:"transparent",secondaryColor:"transparent"};var re=Object(y.memo)(ne),ie=s(1144),oe=Object(y.memo)((function(e){var t=e.className,s=e.forwardedRef;return S.a.createElement("div",{className:Object(A.a)("Bgc($c-bg) Op(.2)",t),ref:s})})),ce=i()(oe,{className:"Sq(84px) Mend(8px) Bdrs(4px)"}),le=(function(e){function t(){var e,s;c()(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return s=d()(this,(e=h()(t)).call.apply(e,[this].concat(n))),w()(g()(s),"loader",ce),s}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.animationClassname,s=e.vinylItem;return i()(ie.b,{albumArtLoader:this.loader,artistName:s.getIn(["artists",0,"name"]),className:Object(A.a)("D(f) Mt(12px)",t),isActive:!1,template:ie.a.anthemRecPreview,track:s})}}]),t})(y.PureComponent),pe=s(1133),ue=(function(e){function t(){return c()(this,t),d()(this,h()(t).apply(this,arguments))}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.animationClassname,s=e.bio;return i()("div",{className:Object(A.a)("BreakWord Whs(pl) Fz($ms) LineClamp(4,94.5px) Ta(start)",t)},void 0,Object(pe.c)(s).map((function(e,t){return i()("span",{className:Object(A.a)({"D(ib) Mx(2px)":"emoji"===e.type})},t,e.text)})))}}]),t})(y.PureComponent);w()(ue,"defaultProps",{bio:null});var de=ue,me=s(1110),he=s(1201),fe=s(1331),ge=s(1332),ve=s(1333),be=s(1334),Oe={distance:fe.a,city:be.a,job:ge.a,school:ve.a},we=function(e){var t=e.animationClassname,s=e.city,a=e.distance,n=e.gender,r=e.jobs,o=e.loggedInUserJobs,c=e.loggedInUserSchools,l=e.schools,p=s&&s.get("name"),u=Object(me.a)(r,o),d=Object(me.b)(l,c),m=Object(me.h)(a);return i()("div",{className:Object(A.a)("C(#fff) Fz($ms)",t)},void 0,[{name:"job",text:u},{name:"school",text:d},{name:"city",text:Object(me.j)(p,n)},{name:"distance",text:m}].map((function(e){var t=e.name,s=e.text,a=Oe[t];return a&&s?i()(he.a,{iconSVG:i()(a,{fill:"#fff",className:"Sq(16px) Va(m)"}),text:s,textColor:"C(#fff)",type:t,iconClassName:"Va(t)"},t):null})))};we.defaultProps={city:null,distance:null,gender:0,jobs:null,schools:null};var ye=Object(y.memo)(we),Se=s(328),Pe=s(1248),xe=s(449),je=i()(oe,{className:"Bdrs(4px)"}),Ae=i()(he.a,{className:"D(f) Pb(8px)",text:i()(P.a,{id:"Instagram.Recent"}),textColor:"C(#fff)",type:"instagram",iconSVG:i()(Pe.a,{className:"Sq(16px)"})}),Te=(function(e){function t(){var e,s;c()(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return s=d()(this,(e=h()(t)).call.apply(e,[this].concat(n))),w()(g()(s),"loader",je),w()(g()(s),"subheaderInfo",Ae),s}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this,t=this.props,s=t.animationClassname,a=t.photos;return i()("div",{className:Object(A.a)(s)},void 0,this.subheaderInfo,i()("div",{className:"D(f)"},void 0,a.map((function(t){return i()(Se.AspectRatio,{className:"W(64px) Mend(8px)"},t.get("ts"),i()(xe.b,{className:"Bdrs(4px)",customLoader:e.loader,errorPlaceholder:xe.c.INSTAGRAM,intendedAspectRatio:1,loader:xe.d.CUSTOM,urls:[t.get("image")]}))}))))}}]),t})(y.PureComponent);w()(Te,"defaultProps",{photos:ee.a});var ke=Te,Ne=s(1138),Ce=Object(y.memo)((function(e){var t=e.animationClassname,s=e.interests;return s&&s.size?i()("div",{className:t},void 0,s.map((function(e){var t=e.get("id"),s=e.get("name");return i()(Ne.a,{className:"Mend(4px)",theme:"dark",text:s,id:t},t)}))):null})),Me=function(e){var t=e.text;return t?i()("div",{className:"W(100%) Fw(b) Fz($xl) Fs(i) C(#fff)"},void 0,t):null};Me.defaultProps={text:""};var Ee=Object(y.memo)(Me),Ie=s(1147),De=i()(oe,{className:"Bdrs(4px)"}),Ue=i()(Ie.a,{className:"Sq(16px)"}),Re=(function(e){function t(){var e,s;c()(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return s=d()(this,(e=h()(t)).call.apply(e,[this].concat(n))),w()(g()(s),"loader",De),s}return b()(t,e),p()(t,[{key:"render",value:function(){var e=this,t=this.props,s=t.animationClassname,a=t.numberArtists,n=t.titleId,r=t.topArtists,o=i()(he.a,{className:"Pb(8px)",text:i()(P.a,{id:n,values:{number:a,numberDisplay:a}}),textColor:"C(#fff)",type:"spotify",iconSVG:Ue});return i()("div",{className:Object(A.a)(s)},void 0,o,i()("div",{className:"D(f)"},void 0,r.map((function(t,s){var a=t.getIn(["top_track","album","images",2,"url"]);return a&&i()(Se.AspectRatio,{className:"W(64px) Mend(8px)"},s,i()(xe.b,{className:"Bdrs(4px)",customLoader:e.loader,intendedAspectRatio:1,loader:xe.d.CUSTOM,urls:[a]}))}))))}}]),t})(y.PureComponent);w()(Re,"defaultProps",{showMutualArtists:!1,titleId:"Spotify.numTopArtists",topArtists:ee.a});var Be=Re,_e="identity",Le="Animn($anim-slide-in-left) Animdur($fast)",$e=(function(e){function t(){var e,s;c()(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return s=d()(this,(e=h()(t)).call.apply(e,[this].concat(n))),w()(g()(s),"state",{animationClassname:Le,prevPhotoIndex:null,prevPreviewItem:_e}),w()(g()(s),"setRef",(function(e){s.ref=e})),s}return b()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.ref&&this.props.updatePreviewHeight(this.ref.clientHeight)}},{key:"shouldComponentUpdate",value:function(e,t){return!Object($.a)(this.props,e,["activePhotoIndex"])||!Object(L.a)(this.state,t)}},{key:"componentDidUpdate",value:function(){this.ref&&this.props.updatePreviewHeight(this.ref.clientHeight)}},{key:"createContent",value:function(){var e=this.props,t=e.loggedInUserJobs,s=e.loggedInUserSchools,a=e.recUser,n=e.userTopArtists,r=e.profilePreviews,o=this.state.animationClassname,c=r[a.get("activePhotoIndex")||0]||r[r.length-1],l=Object(z.a)(a,"hide_distance"),p=i()(ye,{animationClassname:o,city:a.get("city"),distance:!l&&Object(z.a)(a,"distance_mi"),gender:a.get("gender"),jobs:a.get("jobs"),loggedInUserJobs:t,loggedInUserSchools:s,schools:a.get("schools")});switch(c){case _e:return p;case"bio":return i()(de,{animationClassname:o,bio:a.get("bio")});case"anthem":return i()(le,{animationClassname:o,vinylItem:Object(z.a)(a.get("spotify"),"spotify_theme_track",ee.b)});case"instagram":return i()(ke,{animationClassname:o,photos:a.getIn(["instagram","photos"],ee.a).slice(0,4)});case"topArtists":var u=Object(z.a)(a.get("spotify"),"spotify_top_artists",ee.a);return i()(Be,{animationClassname:o,numberArtists:u.size,topArtists:u.slice(0,4)});case"mutualTopArtistsPreview":var d=Object(z.a)(a.get("spotify"),"spotify_top_artists",ee.a),m=d.filter((function(e){return-1!==n.indexOf(e)}));return m.size?i()(Be,{animationClassname:o,numberArtists:m.size,titleId:"Spotify.numMutualTopArtists",topArtists:m.slice(0,4)}):i()(Be,{animationClassname:o,numberArtists:d.size,topArtists:d.slice(0,4)});case"interest":var h=Object(z.a)(a.get("experiment_info"),["user_interests","selected_interests"],ee.a);return i()(Ce,{animationClassname:o,interests:h});default:return p}}},{key:"render",value:function(){var e=this.props.recUser.get("tinder_u");return S.a.createElement("div",{ref:this.setRef},this.createContent(),e&&Object(E.d)(e)&&i()(Ee,{text:e.getIn(["school","card_name"])}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var s=e.recUser,a=e.profilePreviews,n=s.get("activePhotoIndex")||0,r=a[n]||a[a.length-1];return n!==t.prevPhotoIndex&&r!==t.prevPreviewItem?n>t.prevPhotoIndex?{prevPhotoIndex:n,prevPreviewItem:r,animationClassname:"Animn($anim-slide-in-right) Animdur($fast)"}:{prevPhotoIndex:n,prevPreviewItem:r,animationClassname:Le}:t}}]),t})(y.Component);w()($e,"defaultProps",{loggedInUserJobs:ee.a,loggedInUserSchools:ee.a,recUser:ee.b,userTopArtists:ee.a,profilePreviews:[]});var Fe=$e;s(1008);function Ye(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function We(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(s),!0).forEach((function(t){w()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ye(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ze=i()(P.a,{id:"nope"}),He=i()(P.a,{id:"superlike"}),Xe=i()("div",{className:"mousePointer Pos(a) H(60px) W(60px) T(50%) Start(50%) Bdrs(50%) Bds(s) Bxsh($bxsh-circle-btn) Bgc($c-gray) Op(.5) Bd Bdc($c-dark-gray)"}),Ve=i()(W.a,{}),Je=(function(e){function t(e){var s;return c()(this,t),s=d()(this,h()(t).call(this,e)),w()(g()(s),"handleTouchStart",(function(e){e.stopPropagation(),e.preventDefault(),s.shouldAllowMouseEvents()&&s.handleMouseDown(e.touches[0])})),w()(g()(s),"handleTouchMove",(function(e){if(e.cancelable&&(e.stopPropagation(),e.preventDefault()),s.shouldAllowMouseEvents()&&s.cursorPressedAt){var t=e.touches[0],a=Math.abs(s.cursorPressedAt.y-(t.pageY||t.clientY))>Math.abs(s.cursorPressedAt.x-(t.pageX||t.clientX))&&s.props.isLikesYou?"scroll":"swipe";s.state.intention||(s.setState({intention:a}),"swipe"===a&&s.props.onDragStart({isDragging:!0})),"swipe"===s.state.intention&&s.handleMouseMove(t)}})),w()(g()(s),"handleTouchEnd",(function(){s.shouldAllowMouseEvents()&&s.handleMouseUp()})),w()(g()(s),"handleMouseDown",(function(e){s.shouldAllowMouseEvents()&&(s.props.recUser.get("confirmedStatus")||(s.cacheCardDimensions(),s.cursorPressedAt={x:e.pageX||e.clientX,y:e.pageY||e.clientY},s.mouseDown=!0))})),w()(g()(s),"handleMouseUp",(function(){var e=s.props.reactionOrSwipeNoteEnabled;if(!s.shouldAllowMouseEvents())return null;if(s.props.recUser.get("confirmedStatus"))return null;s.mouseDown=!1,s.cursorPressedAt=null,s.setState({intention:null}),s.props.onDragEnd({isDragging:!1});var t=s.state.transformData.status;if(!t)return s.setState({transformData:Object(J.f)()});switch(t){case D.LIKE_STATUS:return s.swiped=!0,s.animateSwipeOff("right"),s.props.like({method:R.recsRateMethods.swipe});case D.NOPE_STATUS:return s.swiped=!0,s.animateSwipeOff("left"),s.props.dislike({method:R.recsRateMethods.swipe});case D.SUPERLIKE_STATUS:return s.props.isLikesYou?null:(s.swiped=!0,Object(M.c)(s.props.recUser)?(s.animateSwipeOff("right"),s.props.like({method:R.recsRateMethods.swipe})):(e?(s.swiped=!1,s.setState({transformData:Object(J.f)()})):s.animateSwipeOff("up"),s.props.superlike({method:R.recsRateMethods.swipe})));default:return null}})),w()(g()(s),"handleMouseMove",(function(e){(e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),s.mouseDown)&&(s.shouldAllowMouseEvents()&&(s.props.onDragStart({isDragging:!0}),s.state.inSwipe||document.addEventListener("mouseout",s.handleMouseOutWindow),s.setState({inSwipe:!0,intention:"swipe",transformData:Object(J.c)(e,s.cursorPressedAt,s.cardTop,s.cardWidth,s.cardHeight,s.threshold,s.props.isLikesYou)})))})),w()(g()(s),"handleClick",(function(){s.state.inSwipe||(s.props.onClick(),s.handleRest()),s.setState({inSwipe:!1,intention:null}),s.props.onDragEnd({isDragging:!1})})),w()(g()(s),"handleMouseOutWindow",(function(e){if(!s.state.confirmedStatus&&s.cursorPressedAt){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(s.handleMouseUp(),document.removeEventListener("mouseout",s.handleMouseOutWindow))}})),w()(g()(s),"handleRest",(function(){s.mouseDown||(s.props.onAtRest(),s.setState({inSwipe:!1}))})),w()(g()(s),"cacheCardDimensions",(function(){s.cardWidth=s.cardRef.offsetWidth,s.cardHeight=s.cardRef.offsetHeight,s.cardTop=s.cardRef.getBoundingClientRect().top,s.threshold=s.cardWidth/2.5,Object(J.i)()})),w()(g()(s),"sendRecsViewEvent",(function(e){var t={otherId:e.get("_id"),didSuperLike:e.get("is_super_like"),teaserType:e.getIn(["teaser","type"]),teaserValue:e.getIn(["teaser","string"])};if(s.props.trackEvent(U.Sb,t),s.props.isLikesYou){var a=We({},t,{isRecentlyActive:Object(z.a)(e,"recently_active"),source:"Gold Home Page"});s.props.trackEvent(U.hb,a)}s.sendSuperlikeInteractEvent()})),w()(g()(s),"sendSuperlikeInteractEvent",(function(e){var t=s.props.recUser,a=Object(z.a)(t,"reaction_id"),n=!!Object(z.a)(t,"swipe_note");if(a||n){var r=Object(z.a)(t,"liked_content_id"),i={interactionSide:"receive",interactionType:e||"view",interactionValue:Object(V.j)(a,n),receivedMediaId:r||V.a,source:"reveal"===e?"cardstack":null};s.props.trackEvent(U.dc,i)}})),w()(g()(s),"setRef",(function(e){s.cardRef=e})),w()(g()(s),"updatePreviewHeight",(function(e){s.setState({nameTranslateY:-(e+20)})})),w()(g()(s),"handleClickSwipeNote",(function(e){s.setState({isSwipeNoteExpanded:e}),e&&s.sendSuperlikeInteractEvent("reveal")})),Object(J.i)(),s.stampTimeout=null,s.state={intention:null,transformData:Object(J.d)(e.recUser.get("confirmedStatus")),inSwipe:!1,isSwipeNoteExpanded:!1,nameTranslateY:0},s.profilePreviews=s.getPreviews(e),s}return b()(t,e),p()(t,[{key:"componentDidMount",value:function(){(this.props.recUser.get("active")||this.props.isLikesYou)&&this.sendRecsViewEvent(this.props.recUser)}},{key:"componentWillReceiveProps",value:function(e){var t=this,s=e.recUser,a=e.isOnboardingDemoRec,n=s.get("confirmedStatus");this.props.recUser.get("confirmedStatus")&&!n&&(this.swiped=!1,this.stampTimeout&&clearTimeout(this.stampTimeout),this.setState({transformData:Object(J.g)()})),!this.props.recUser.get("active")&&s.get("active")&&(a&&this.props.setSwipeDemoShown(),this.sendRecsViewEvent(e.recUser));var r=n===D.SUPERLIKE_STATUS;if(n&&!this.swiped){this.swiped=!0;var i,o=this.state.transformData;n===D.LIKE_STATUS?(o.likeOpacity=1,i="right"):n===D.NOPE_STATUS?(o.dislikeOpacity=1,i="left"):r?(o.superlikeOpacity=1,i="up"):Object(N.default)(!1),this.setState({transformData:o}),this.stampTimeout=setTimeout((function(){return t.animateSwipeOff(i)}),r?J.b:J.a)}this.profilePreviews=this.getPreviews(e)}},{key:"shouldComponentUpdate",value:function(e,t){return!Object(L.a)(this.props,e)||!Object($.a)(this.state,t,["transformData"])}},{key:"componentDidUpdate",value:function(){var e=this;this.props.isOnboardingDemoRec&&(this.swipeDemoTimer&&clearTimeout(this.swipeDemoTimer),this.swipeDemoTimer=setTimeout((function(){Object(X.a)(e.props.userId),e.props.setSwipeDemoShown()}),5e3))}},{key:"componentWillUnmount",value:function(){this.swipeDemoTimer&&(clearTimeout(this.swipeDemoTimer),this.swipeDemoTimer=null),document.removeEventListener("mouseout",this.handleMouseOutWindow),this.stampTimeout&&(clearTimeout(this.stampTimeout),this.stampTimeout=null)}},{key:"getPreviews",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.isSpotifyEnabled,s=e.recUser;return[s.get("bio")?"bio":null,Object(I.e)("alibi")&&s.getIn(["experiment_info","user_interests","selected_interests"])?"interest":null,_e,t&&s.getIn(["spotify","spotify_theme_track"])?"anthem":null,s.getIn(["instagram","photos"])?"instagram":null,t&&s.getIn(["spotify","spotify_top_artists",0])?"topArtists":null,t&&s.getIn(["spotify","spotify_top_artists",0])&&this.props.userTopArtists?"mutualTopArtistsPreview":null].filter((function(e){return!!e}))}},{key:"shouldAllowMouseEvents",value:function(){return this.props.recUser.get("active")||this.props.isLikesYou}},{key:"animateSwipeOff",value:function(e){this.stampTimeout&&(clearTimeout(this.stampTimeout),this.stampTimeout=null);var t=this.state.transformData.rotate,s="number"==typeof t?t:t.val;this.setState({transformData:We({},this.state.transformData,{},Object(J.h)(e,s))})}},{key:"render",value:function(){var e,t=this,s=this.props,a=s.handlePhotoError,r=s.intl,o=s.isCurrentRec,c=s.isLikesYou,l=s.isSwipeDemoShown,p=s.isReactionsReceiveEnabled,u=s.isSwipeNoteReceiveEnabled,d=s.loggedInUserJobs,m=s.loggedInUserSchools,h=s.onPhotoChange,f=s.ownPhotos,g=s.recUser,v=s.showInfoIcon,b=s.reactionOrSwipeNoteEnabled,O=s.teaserCountLimit,x=s.toggleTiltAnimation,T=s.userTopArtists,N=this.props.isOnboardingDemoRec&&!l,I=this.state.transformData,U=I.likeOpacity,R=I.dislikeOpacity,L=I.superlikeOpacity,$=I.translateX,W=I.translateY,X=I.rotate,V=I.scale,G=this.state,q=G.inSwipe,ee=G.nameTranslateY,te=G.isSwipeNoteExpanded,se=g.get("active"),ne=Object(M.d)(g),ie=Object(M.c)(g),oe=c&&g.get("isBoost"),ce=c&&g.get("isSuperBoost"),le=g.get("confirmedStatus")||"",pe=g.get("fromGamepad"),ue=g.get("tinder_u"),de=Object(z.a)(g,"reaction_id"),me=Object(z.a)(g,"liked_content_id"),he=me&&Object(H.s)(f,me),fe=g.get("name"),ge=g.get("gender"),ve=Object(z.a)(g,"swipe_note"),be=!(!p||!de)||!(!u||!ve),Oe=Object(z.a)(g,"recently_active"),we={allowMultiple:!0,isVerified:!c&&ne,isSwipeNote:!(!c||!u)&&!!ve,isSuperLike:!(!c&&be)&&ie,isBoostMatch:oe,isSuperBoostMatch:ce},ye=Object(A.a)("recCard Ov(h) Cur(p) W(100%) Bgc($c-placeholder) StretchedBox Bdrs(8px)",le,(e={"CenterAlign--ml Toa(n)":!c,"Bxsh($bxsh-card)--ml":c,"Bxsh($bxsh-card)":!se&&!c,onboardRec:N,"active Prs(1000px) Bfv(h)":se},w()(e,"".concat(le,"--fromGamepad"),pe),w()(e,"dragging",this.cursorPressedAt),w()(e,"superliked",ie),e)),Se=Object(A.a)("Pos(a) P(.1em)","Fw($semibold) Tt(u)","Bdrs(4px) Bdw(4px) Bds(s)","Wc($opacity) Op(0) Trsp($opacity) Trsdu($fast)",{"Fz(4rem) Lh(3.5rem)":!c,"Fz(4rem)--l Lh(3.5rem)--l Fz(3.5rem)--m Lh(3rem)--m Fz(3rem)--s Lh(2.5rem)--s":c}),Pe=Object(J.e)(),xe={translateX:$,translateY:W,rotate:X,scale:V},je=i()(Q.a,{isSuperLike:ie,className:"Bdrsbend(8px) Bdrsbstart(8px)"}),Ae=i()("div",{className:"My(4px)"},void 0,i()(F.a,{gender:ge,likedPhotoUrl:he,reactionId:de,recName:fe})),Te=i()(Z,{isLikesYou:c,recUser:g});return i()(j.Motion,{style:xe,onRest:this.handleRest},void 0,(function(e){var s=e.translateX,l=e.translateY,u=e.rotate,f=e.scale,j="swipe"===t.state.intention,M=t.swiped&&t.stampTimeout&&le&&(b||!j),I=Object(A.a)("translate3d(".concat(s,"px, ").concat(l,"px, 0px)"),"rotate(".concat(u||0,"rad)"),w()({},"scale(".concat(f,")"),!M)),$={transform:I,WebkitTransform:I,msTransform:I,MozTransform:I,visibility:Math.abs(s)>=Pe.right||l<=Pe.up?"hidden":"",touchAction:j?"none":null};return S.a.createElement("div",{className:Object(A.a)(ye,{"squeezeCard Trfo(bottom) Animdur($normal) Animtf(ei)":M&&le===D.SUPERLIKE_STATUS}),onMouseDown:t.handleMouseDown,onMouseMove:t.handleMouseMove,onMouseUp:t.handleMouseUp,onMouseLeave:t.handleMouseUp,onTouchStart:t.handleTouchStart,onTouchMove:t.handleTouchMove,onTouchEnd:t.handleTouchEnd,style:$,draggable:!1,ref:t.setRef,"aria-hidden":!o},i()(K.a,{isCurrentRec:o,isLikesYou:c,recUser:g,toggleTiltAnimation:x,onPhotoChange:h,inSwipe:q,onClick:t.handleClick,handlePhotoError:a}),i()("div",{className:Object(A.a)("".concat(Se," Pe(n) T(10%) End(10%) C($c-nope-red) Bdc($c-nope-red) Rotate(20deg)"),{"Animn($anim-fade-in) Animdur(2s) Animtf(eio) Animdel(1.7s)":N}),style:{opacity:R}},void 0,ze),i()("div",{className:Object(A.a)("".concat(Se," Pe(n) T(10%) Start(10%) C($c-like-green) Bdc($c-like-green) Rotate(-20deg)"),{"Animn($anim-fade-in) Animdur(2s) Animtf(eio)":N}),style:{opacity:ie?Math.max(L,U):U}},void 0,i()(P.a,{id:c?"match":"like"})),(!b||j)&&i()("div",{className:"Pos(a) B(20%) W(100%) M(a) Z(1) CenterAlign Pe(n)"},void 0,i()("div",{className:"".concat(Se," C($c-superlike-blue) Bdc($c-superlike-blue) Rotate(-20deg)"),style:{opacity:ie?0:L}},void 0,He)),N&&Xe,i()(y.Fragment,{},void 0,ue&&Object(E.d)(ue)&&i()(re,{primaryColor:ie?"#fff":ue.getIn(["school","primary_color"]),secondaryColor:ie?"#fff":ue.getIn(["school","secondary_color"])}),je,i()("div",{className:Object(A.a)("Pos(a) D(f) Jc(sb) C(#fff) Ta(start) B(0) W(100%) Wc($transform)",{"P(16px) P(20px)--l":!c,"P(20px)--l P(10px)--m P(5px)--s":c}),onClick:q?k.a:t.props.onClick},void 0,i()("div",{className:Object(A.a)("Tsh($tsh-s) Fl(start)",{"NetWidth(100%,50px)":v,"W(100%)":!v})},void 0,be&&!c?i()("div",{className:Object(A.a)("D(f) Fld(c) Trsdu($fast)",{"Pos(a) B(0)":!c}),style:{transform:te?"none":"translateY(".concat(ee-40,"px)")}},void 0,p&&de?Ae:i()("div",{className:Object(A.a)({"My(24px) Mend(20px)":te})},void 0,i()(Y.a,{onClick:t.handleClickSwipeNote,urls:he,messageContent:ve,name:fe}))):null,i()("div",{className:Object(A.a)({"Pos(a) Fz($l) B(0) Trsdu($fast)":!c,"Fz($m)--ml Fz($s)--s Fw($semibold)":c,"NetWidth(100%,50px)":v,"W(100%)":!v,"D(f) Ai(c)":!te,"D(n)":te}),style:{transform:te?"none":"translateY(".concat(ee,"px)")}},void 0,i()("div",{className:"D(f) Ai(b) Ov(h) Maw(80%)"},void 0,i()("div",{className:"Ov(h) Ws(nw) Ell"},void 0,i()("span",{className:Object(A.a)("Fxs($flx1) Flw(w)",{"Fz($xl) Fw($bold) Pend(8px)":!c})},void 0,fe)),Te),i()(C.a,{},void 0,S.a.createElement(B.a,n()({},we,{badgeProps:{size:"small",className:"Mstart(8px) Fxs(0) As(c)"}}))),i()(C.c,{},void 0,S.a.createElement(B.a,n()({},we,{badgeProps:{size:c?"xsmall":"small",className:"Mstart(4px)--s Mstart(8px)--m Fxs(0) As(c)"}})))),c?i()(y.Fragment,{},void 0,Oe?Ve:i()(ae,{teasers:g.get("teasers"),countLimit:O,fontClassName:c?"Fz($s)--ml Fz($xs)--s":"Fz($ms)"})):i()("div",{className:Object(A.a)({"D(n)":te})},void 0,i()(Fe,{isSwipeNoteExpanded:te,loggedInUserJobs:d,loggedInUserSchools:m,recUser:g,updatePreviewHeight:t.updatePreviewHeight,userTopArtists:T,profilePreviews:t.profilePreviews}))),v&&!te?!g.get("nonUser")&&i()("button",{className:"Pos(a) P(0) End(16px) B(40px) Trsdu($normal) Sq(28px) Bdrs(50%) Cur(p) Ta(c) Fl(end) Scale(1.2):h focus-button-style"},void 0,i()(_.a,{className:"Expand",title:r.formatMessage({id:"RecsToolbar.openProfile"})})):null)))}))}}]),t})(y.Component);w()(Je,"defaultProps",{handlePhotoError:k.a,isLikesYou:!1,isOnboardingDemoRec:!1,isSpotifyEnabled:!0,isSwipeDemoShown:!1,onAtRest:k.a,onClick:k.a,onDragEnd:k.a,onDragStart:k.a,onPhotoChange:k.a,setSwipeDemoShown:k.a,showInfoIcon:!0,superlike:k.a,teaserCountLimit:null,toggleTiltAnimation:k.a,trackEvent:k.a,userId:null});t.a=Object(x.c)(Je)}}]);