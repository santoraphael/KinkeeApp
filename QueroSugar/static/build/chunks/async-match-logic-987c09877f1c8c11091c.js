/*! {Â© 2016 - 2020 Tinder, Inc., ALL RIGHTS RESERVED} */
(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{1477:function(e,t,n){"use strict";n.r(t),n.d(t,"_sendMessageSaga",(function(){return v})),n.d(t,"sendMessageSaga",(function(){return y})),n.d(t,"_unmatchSaga",(function(){return A})),n.d(t,"unmatchSaga",(function(){return R})),n.d(t,"setLastSeenMatchMessageSaga",(function(){return _})),n.d(t,"setMatchSeenSaga",(function(){return D})),n.d(t,"toggleLikeMessageSaga",(function(){return C}));var r=n(1),a=n.n(r),c=n(6),s=n.n(c),o=n(141),u=n.n(o),i=n(0),b=n(12),d=n(10),O=n(20),p=n(13),g=n(4),h=n(21),j=n(57),m=n(8),f=n(1142),S=n(87),l=n(68),M=n(330),x=n(98),w=regeneratorRuntime.mark(v),E=regeneratorRuntime.mark(A);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t,n,r,a,c,s,o,O,g,j,f,E,I,v,y,A;return regeneratorRuntime.wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return Object(d.o)(x.SEND_MESSAGE),t=["song","contact_card"],n=e.payload.messageData,r=n.match,a=n.matchId,c=n.sessionId,s=n.message,o=n.type,O=n.gif_id,g=n.track_id,j=n.showNotification,f=void 0!==j&&j,E=n.position,I=n.durationInMillis,y=Date.now(),w.prev=5,w.next=8,Object(i.d)(Object(p.q)(p.o,"sendMessage"),a,k({},u()(n,t)));case 8:v=w.sent,w.next=28;break;case 11:if(w.prev=11,w.t0=w.catch(5),!((A=n.retries||0)<3)){w.next=19;break}return Object(d.o)(x.SEND_MESSAGE_RETRY),w.next=18,Object(i.h)(Object(M.e)(k({},u()(n,["userId"]),{retries:A+1})));case 18:return w.abrupt("return");case 19:return Object(d.o)(x.SEND_MESSAGE_FAILURE),w.next=22,Object(i.h)(Object(h.a)(S.c,{type:o||"text",action:"send",sessionId:c,matchId:a,success:!1,message:s,durationInMillis:I||Date.now()-y,position:E}));case 22:return w.next=24,Object(i.h)(Object(M.d)(w.t0,n));case 24:if(!f){w.next=27;break}return w.next=27,Object(i.h)(Object(l.a)("inApp","","Bg($pink-gradient)",{data:{route:Object(m.c)("messageMatch",{matchId:a})},shouldTranslate:!0,text:"ItsAMatch.sendAMessageFailure",textValues:{name:r.get("name")},avatarImgArray:r.getIn(["photos",0,"processedFiles"],new b.List).map((function(e){return e.get("url")}))},Date.now()));case 27:return w.abrupt("return");case 28:return Object(d.o)(x.SEND_MESSAGE_SUCCESS),w.next=31,Object(i.h)(Object(h.a)(S.c,{type:("song"===o?"vinyl":o)||"text",action:"send",sessionId:c,matchId:a,success:!0,message:s,contentId:O||g,durationInMillis:I||Date.now()-y,position:E}));case 31:return w.next=33,Object(i.h)(Object(M.f)(v,n));case 33:if(!f){w.next=36;break}return w.next=36,Object(i.h)(Object(l.a)("inApp","","Bg($green-gradient-diagonal)",{data:{route:Object(m.c)("messageMatch",{matchId:a})},shouldTranslate:!0,text:"ItsAMatch.sendAMessageSuccess",avatarImgArray:r.getIn(["photos",0,"processedFiles"],new b.List).map((function(e){return e.get("url")}))},Date.now()));case 36:case"end":return w.stop()}}),w,null,[[5,11]])}var y=Object(O.e)(v,{name:"sendMessageSaga"});function A(e){var t,n,r,a,c,s,o,u,b,O,S,l;return regeneratorRuntime.wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return Object(d.o)(x.UNMATCH),j.a.push(Object(m.c)("matches")),t=e.payload,n=t.reasonCustom,r=t.source,a=t.feedbackType,c=t.otherId,s=t.matchId,o=t.selectedCause,u=t.isBoostMatch,b=t.isFastMatch,O=t.isSuperLike,S=0,O&&(S=1),u&&(S=2),b&&(S=3),l={attribution:S,reasonCustom:n,reasonOption:f.REPORT_CAUSES_EVENT_MAP[o],source:r,feedbackType:a,otherId:c,matchId:s},w.prev=8,w.next=11,Object(i.d)(Object(p.q)(p.o,"unmatch"),s);case 11:if(o!==f.REPORT_CAUSES.NO_REASON){w.next=14;break}return w.next=14,Object(i.h)(Object(h.a)(g.Y,k({},l,{feedbackAction:"submit"})));case 14:w.next=25;break;case 16:return w.prev=16,w.t0=w.catch(8),Object(d.o)(x.UNMATCH_FAILURE,w.t0),w.next=21,Object(i.h)(Object(M.q)(s,w.t0));case 21:if(o!==f.REPORT_CAUSES.NO_REASON){w.next=24;break}return w.next=24,Object(i.h)(Object(h.a)(g.Y,k({},l,{feedbackAction:"error"})));case 24:return w.abrupt("return");case 25:return Object(d.o)(x.UNMATCH_SUCCESS),w.next=28,Object(i.h)(Object(M.r)(s));case 28:case"end":return w.stop()}}),E,null,[[8,16]])}var R=Object(O.e)(A,{name:"unmatchSaga"}),_=Object(O.e)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s()(t.payload,"matchId"),r=s()(t.payload,"messageId"),e.next=4,Object(i.d)(Object(p.q)(p.o,"setLastSeenMatchMessage"),n,r);case 4:case"end":return e.stop()}}),e)})),{name:"setLastSeenMatchMessageSaga"}),D=Object(O.e)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s()(t.payload,"matchId"),e.next=3,Object(i.d)(Object(p.q)(p.o,"setMatchSeen"),n);case 3:case"end":return e.stop()}}),e)})),{name:"setMatchSeenSaga"}),C=Object(O.e)(regeneratorRuntime.mark((function e(t){var n,r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=n.messageId,a=n.liked,c=a?"likeMessage":"unlikeMessage",e.next=4,Object(i.d)(Object(p.q)(p.o,c),r);case 4:case"end":return e.stop()}}),e)})))}}]);