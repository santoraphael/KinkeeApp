/*! {Â© 2016 - 2020 Tinder, Inc., ALL RIGHTS RESERVED} */
(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{1153:function(e,t,r){"use strict";r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return v})),r.d(t,"c",(function(){return h}));var a=r(1),n=r.n(a),s=r(12),c=r(6),i=r.n(c),o=r(98),u=r(15),d=r(84),p=r(331);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function g(e,t,r){var a=t.matchId,c=t.tempMessageId;return e.update(a,(function(e){return e.map((function(e){return e.get("_id")===c?e.merge(Object(s.fromJS)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{},r))):e}))}))}function l(e,t,r){return g(e,t,{state:r})}function _(e,t){var r=i()(t,["result","matches"]);return r?e.withMutations((function(e){r.forEach((function(r){var a=e.get(r);if(a&&0!==a.size){var n=t.entities.matches[r].messages,s=a.filter((function(e){return e.get("state")!==m||n.indexOf(e.get("_id"))<0}));e.set(r,s)}}))})):e}var m="success",v="failure",h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.messages,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.j:return _(e,t.payload.data);case o.SEND_MESSAGE:var r=t.payload.messageData,a=r.matchId,n=new Date,c={_id:r.tempMessageId,match_id:a,to:"",from:r.userId,message:r.message,sent_date:n.toISOString(),created_date:n.toISOString(),timestamp:n.getTime(),state:"sending"};return c.type=r.type,r.gif_id&&(c.gif_id=r.gif_id),"song"===r.type&&(c.song=r.song),"contact_card"===r.type&&(c.contact_card=r.contact_card),e.update(a,(function(e){return(e||new s.List).push(Object(s.fromJS)(c))}));case o.SEND_MESSAGE_RETRY:var i=t.payload.messageData;return l(e,i,"sending");case o.SEND_MESSAGE_SUCCESS:var f=t.payload,h=f.messageData,E=f.response;return g(e,h,{state:m,_id:E._id});case o.SEND_MESSAGE_FAILURE:var S=t.payload.messageData;return l(e,S,v);case o.DELETE_TEMP_MESSAGE:var y=t.payload,O=y.matchId,b=y.tempMessageId;return e.update(O,(function(e){return e.filter((function(e){return e.get("_id")!==b}))}));case Object(u.r)(t.type):return p.messages;default:return e}}},1290:function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return d}));var a=r(12),n=r(6),s=r.n(n),c=r(33),i=r(383),o=r(331),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.passport,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.RESET_LOCATION:return e.set("is_traveling",!1);case i.SET_TRAVEL_LOCATION_OPTIMISTIC:return Object(a.fromJS)({is_traveling:!0,travel_pos:t.payload.get("location"),travel_location_info:t.payload.get("info")});case c.FETCH_PROFILE_SUCCESS:var r=s()(t,["payload","data","travel"]);if(r){var n=r.travel_pos;if(!e.get("travel_pos")||!n)return e;var u=n.lat===e.getIn(["travel_pos","lat"]),d=n.lon===e.getIn(["travel_pos","lon"]),p=r.is_traveling===e.get("is_traveling"),f=u&&d;if(f&&p)return o.passport}return e;default:return e}},d=function(e){return e.optimistic.getIn(["passport","is_traveling"])}},1500:function(e,t,r){"use strict";r.r(t),r.d(t,"reducer",(function(){return _}));var a=r(140),n=r(6),s=r.n(n),c=r(472),i=r.n(c),o=r(98),u=r(84),d=r(15),p=r(331),f=r(1153),g=r(474),l=r(1290),_=Object(a.combineReducers)({matches:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.matches,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.b:case u.e:case u.j:var r=t.payload.data,a=s()(r,["entities","matches"]);if(i()(a))return e;var n=e.filter((function(e,t){return!a[t]}));return n;case o.SET_MATCH_SEEN:return e.mergeIn([t.payload.matchId],{seen:{match_seen:!0}});case o.SET_LAST_SEEN_MATCH_MESSAGE:var c=t.payload,f=c.matchId,g=c.messageId,l=c.from,_=c.otherUserId;return e.mergeIn([f],{seen:{match_seen:!0,last_seen_msg_id:g},person:{_id:_},messages:[{_id:g,from:l}]});case Object(d.r)(t.type):return p.matches;default:return e}},messages:f.c,unmatchedIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.unmatchedIds,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.j:var r=s()(t,["payload","data","result","blocks"]);return e.subtract(r);case o.UNMATCH_FAILURE:return e.remove(t.payload.matchId);case o.UNMATCH:return e.add(t.payload.matchId);case Object(d.r)(t.type):return p.unmatchedIds;default:return e}},settings:g.b,passport:l.b})}}]);